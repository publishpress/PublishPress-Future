/*! For license information please see backupPanel.min.js.LICENSE.txt */
(()=>{"use strict";var t={4337:(t,e,n)=>{n.d(e,{A:()=>c});var r=n(1601),o=n.n(r),a=n(6314),i=n.n(a)()(o());i.push([t.id,"ul#export-actions {\n    margin-bottom: 20px;\n}\n\nul#export-actions li ul {\n    margin-top: 10px;\n    border: 1px solid #e0e0e0e5;\n    padding: 10px;\n    background-color: #fff;\n}\n\nul#export-actions span {\n    display: inline-block;\n}\n\n.pe-settings-tab__backup-status {\n    margin-left: 5px;\n}\n\n.pe-settings-tab__backup-actions button {\n    margin-left: 5px !important;\n}\n\n.pe-settings-tab__backup-container {\n    margin-left: 30px;\n}\n\n.pe-settings-tab__export-cancel-button {\n    margin-left: 10px !important;\n}\n\n.components-snackbar-list {\n    position: fixed !important;\n    bottom: 20px;\n    left: 182px;\n    transform: none;\n    z-index: 100000;\n}\n\n.components-snackbar {\n    margin-bottom: 10px;\n}\n\n.wp-admin.folded .components-snackbar-list {\n    left: 58px;\n}\n\n.pe-settings-tab__import-file-upload {\n    margin-bottom: 20px;\n}\n\n.pe-settings-tab__import-file-upload-info {\n    margin-top: 10px;\n    font-size: 14px;\n}\n\n.pe-dropzone {\n    border: 3px dashed #ccc;\n    padding: 20px;\n    text-align: center;\n}\n\n.pe-dropzone--active {\n    border-color: #0073aa;\n}\n\n.pe-dropzone p {\n    margin: 0;\n}\n\n",""]);const c=i},6314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,o,a){"string"==typeof t&&(t=[[null,t,void 0]]);var i={};if(r)for(var c=0;c<this.length;c++){var l=this[c][0];null!=l&&(i[l]=!0)}for(var s=0;s<t.length;s++){var u=[].concat(t[s]);r&&i[u[0]]||(void 0!==a&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=a),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),e.push(u))}},e}},1601:t=>{t.exports=function(t){return t[1]}},5338:(t,e,n)=>{var r=n(5206);e.H=r.createRoot,r.hydrateRoot},5072:t=>{var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var a={},i=[],c=0;c<t.length;c++){var l=t[c],s=r.base?l[0]+r.base:l[0],u=a[s]||0,p="".concat(s," ").concat(u);a[s]=u+1;var f=n(p),d={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==f)e[f].references++,e[f].updater(d);else{var m=o(d,r);r.byIndex=c,e.splice(c,0,{identifier:p,updater:m,references:1})}i.push(p)}return i}function o(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,o){var a=r(t=t||[],o=o||{});return function(t){t=t||[];for(var i=0;i<a.length;i++){var c=n(a[i]);e[c].references--}for(var l=r(t,o),s=0;s<a.length;s++){var u=n(a[s]);0===e[u].references&&(e[u].updater(),e.splice(u,1))}a=l}}},7659:t=>{var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},5056:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},7825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},1113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},5206:t=>{t.exports=ReactDOM}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var a=e[r]={id:r,exports:{}};return t[r](a,a.exports,n),a.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0;var r=n(5338);const o=wp.i18n,a=wp.element,i=wp.components,c=wp.data;var l=function(t){var e=t.title,n=t.description,r=t.children;return React.createElement("div",{className:"pe-settings-tab"},React.createElement("h2",null,e),React.createElement("p",null,n),r)};function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,s=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);l=!0);}catch(t){s=!0,o=t}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return u(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}const p=function(){var t=s((0,a.useState)(!1),2),e=t[0],n=t[1],r=s((0,a.useState)(null),2),u=r[0],p=r[1],f=s((0,a.useState)(!1),2),d=f[0],m=f[1],h=s((0,a.useState)(null),2),y=h[0],v=h[1],b=s((0,a.useState)(!1),2),g=b[0],x=b[1],w=(0,c.useDispatch)("core/notices"),_=w.createSuccessNotice,E=w.createErrorNotice,S=function(t){if("json"!==t.name.split(".").pop())return m(!1),void v((0,o.__)("Invalid file type. Please upload a .json file.","post-expirator"));m(!0),v(null)};return React.createElement(l,{title:(0,o.__)("Import Settings","post-expirator"),description:(0,o.__)("Import the plugin settings or workflows from a .json file.","post-expirator")},React.createElement("div",{className:"pe-settings-tab__import-file-upload"},React.createElement("div",{className:"pe-dropzone ".concat(g?"pe-dropzone--active":""),onDrop:function(t){t.preventDefault();var e=t.dataTransfer.files[0];p(e),S(e)},onDragOver:function(t){t.preventDefault()},onDragEnter:function(t){t.preventDefault(),x(!0)},onDragLeave:function(t){t.preventDefault(),t.currentTarget===t.target&&x(!1)}},React.createElement("p",null,(0,o.__)("Drop your .json file here","post-expirator")),React.createElement("p",null,(0,o.__)("or","post-expirator")),React.createElement(i.FormFileUpload,{accept:".json,application/json,text/json,text/plain",onChange:function(t){p(t.currentTarget.files[0]),S(t.currentTarget.files[0])},className:"is-primary"},(0,o.__)("Select a .json file","post-expirator")),u&&React.createElement("div",{className:"pe-settings-tab__import-file-upload-info"},React.createElement("p",null,(0,o.__)("Selected file","post-expirator"),": ",u.name),React.createElement("p",null,(0,o.__)("File size","post-expirator"),": ",function(t){if(0===t)return"0 Bytes";var e=Math.floor(Math.log(t)/Math.log(1024));return"".concat(parseFloat((t/Math.pow(1024,e)).toFixed(2))," ").concat(["Bytes","KB","MB","GB"][e])}(u.size))))),d&&React.createElement(i.Button,{isPrimary:!0,isBusy:e,onClick:function(){n(!0);var t=new FormData;t.append("backupFile",u);var e=wp.apiFetch.nonceMiddleware?wp.apiFetch.nonceMiddleware.nonce:"";fetch("".concat(futureBackupPanelData.apiRoot,"publishpress-future/v1/backup/import"),{method:"POST",headers:{"X-WP-Nonce":e},body:t,credentials:"same-origin"}).then((function(t){return t.json()})).then((function(t){if(!t.ok)throw new Error(t.message);n(!1),_(t.message||(0,o.__)("Settings imported successfully.","post-expirator"),{type:"snackbar",isDismissible:!0,actions:[],autoDismiss:!0,explicitDismiss:!0,icon:React.createElement(i.Dashicon,{icon:"yes"})})})).catch((function(t){n(!1),E(t||(0,o.__)("Failed to import settings.","post-expirator"),{type:"snackbar",isDismissible:!0,actions:[],autoDismiss:!0,explicitDismiss:!0,icon:React.createElement(i.Dashicon,{icon:"warning"})})}))}},(0,o.__)("Import","post-expirator")),y&&React.createElement("p",{className:"error"},y))},f=wp.url;function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var m=function(t){var e=t.items,n=t.selectedItems,r=t.onSelect;return React.createElement(React.Fragment,null,React.createElement("div",null,React.createElement("span",{className:"pe-settings-tab__backup-actions"},React.createElement(i.Button,{isLink:!0,onClick:function(){r(e.map((function(t){return t.id})))}},(0,o.__)("Select all","post-expirator"))," |",React.createElement(i.Button,{isLink:!0,onClick:function(){r([])}},(0,o.__)("Unselect all","post-expirator")))),React.createElement("ul",null,e.map((function(t){return React.createElement("li",{key:t.id},React.createElement(i.CheckboxControl,{label:React.createElement(React.Fragment,null,t.title,t.status&&React.createElement("span",{className:"pe-settings-tab__backup-status"},"[",t.status,"]")),checked:n.includes(t.id),onChange:function(e){var o;r(e?[].concat(function(t){if(Array.isArray(t))return d(t)}(o=n)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(o)||function(t,e){if(t){if("string"==typeof t)return d(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[t.id]):n.filter((function(e){return e!==t.id})))}}))}))))};function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function y(){y=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var a=e&&e.prototype instanceof g?e:g,i=Object.create(a.prototype),c=new O(r||[]);return o(i,"_invoke",{value:j(t,n,c)}),i}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var f="suspendedStart",d="suspendedYield",m="executing",v="completed",b={};function g(){}function x(){}function w(){}var _={};s(_,i,(function(){return this}));var E=Object.getPrototypeOf,S=E&&E(E(T([])));S&&S!==n&&r.call(S,i)&&(_=S);var k=w.prototype=g.prototype=Object.create(_);function R(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function n(o,a,i,c){var l=p(t[o],t,a);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==h(u)&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,i,c)}),(function(t){n("throw",t,i,c)})):e.resolve(u).then((function(t){s.value=t,i(s)}),(function(t){return n("throw",t,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return a=a?a.then(o,o):o()}})}function j(e,n,r){var o=f;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:t,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=L(c,r);if(l){if(l===b)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var s=p(e,n,r);if("normal"===s.type){if(o=r.done?v:d,s.arg===b)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=v,r.method="throw",r.arg=s.arg)}}}function L(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,L(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var a=p(o,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,b;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,b):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function D(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(D,this),this.reset(!0)}function T(e){if(e||""===e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}throw new TypeError(h(e)+" is not iterable")}return x.prototype=w,o(k,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:x,configurable:!0}),x.displayName=s(w,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===x||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,s(t,l,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},R(A.prototype),s(A.prototype,c,(function(){return this})),e.AsyncIterator=A,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new A(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},R(k),s(k,l,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=T,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return c.type="throw",c.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(l&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:T(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),b}},e}function v(t,e,n,r,o,a,i){try{var c=t[a](i),l=c.value}catch(t){return void n(t)}c.done?e(l):Promise.resolve(l).then(r,o)}function b(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,s=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);l=!0);}catch(t){s=!0,o=t}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return g(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var x=wp.apiFetch;const w=function(){var t=b((0,a.useState)(!0),2),e=t[0],n=t[1],r=b((0,a.useState)(!0),2),s=r[0],u=r[1],p=b((0,a.useState)(!1),2),d=p[0],h=p[1],g=b((0,a.useState)(!1),2),w=g[0],_=g[1],E=b((0,a.useState)([]),2),S=E[0],k=E[1],R=b((0,a.useState)([]),2),A=R[0],j=R[1],L=b((0,a.useState)(["postTypesDefaults","general","notifications","display","advanced"]),2),D=L[0],C=L[1],O=(0,a.useRef)(new AbortController),T=futureBackupPanelData.enableWorkflowScreenshot,I=[{title:(0,o.__)("Post Types","post-expirator"),id:"postTypesDefaults"},{title:(0,o.__)("General","post-expirator"),id:"general"},{title:(0,o.__)("Notifications","post-expirator"),id:"notifications"},{title:(0,o.__)("Display","post-expirator"),id:"display"},{title:(0,o.__)("Advanced","post-expirator"),id:"advanced"}],N=(0,c.useDispatch)("core/notices"),F=N.createSuccessNotice,P=N.createErrorNotice;(0,a.useEffect)((function(){x({path:(0,f.addQueryArgs)("publishpress-future/v1/backup/workflows")}).then((function(t){k(t.workflows),j(t.workflows.map((function(t){return t.id})))}))}),[]);var M=function(t){var e=JSON.stringify(t,null,2),n=new Blob([e],{type:"application/json"}),r=URL.createObjectURL(n),o=(new Date).toISOString().replace(":","-").split(".")[0],a=document.createElement("a");a.href=r,a.download="publishpress-future-backup-".concat(o,".json"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r)},B=function(){var t,n=(t=y().mark((function t(){var n,r;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:_(!0),(n=O.current)&&n.abort(),O.current=new AbortController,r=O.current.signal,x({path:(0,f.addQueryArgs)("publishpress-future/v1/backup/export"),method:"POST",data:{exportActionWorkflows:e,exportActionSettings:s,workflows:A,includeScreenshots:d,settings:D},signal:r}).then((function(t){_(!1),M(t.data),F((0,o.__)("Settings exported successfully.","post-expirator"),{type:"snackbar",isDismissible:!0,actions:[{label:(0,o.__)("Download","post-expirator"),onClick:function(){M(t.data)}}],icon:React.createElement(i.Dashicon,{icon:"yes"}),autoDismiss:!0,explicitDismiss:!0})})).catch((function(t){"AbortError"!==t.name&&(P(t.message||(0,o.__)("Failed to export settings.","post-expirator"),{type:"snackbar",isDismissible:!0,actions:[],icon:React.createElement(i.Dashicon,{icon:"no"}),autoDismiss:!0,explicitDismiss:!0}),_(!1))}));case 6:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){v(a,r,o,i,c,"next",t)}function c(t){v(a,r,o,i,c,"throw",t)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();return React.createElement(l,{title:(0,o.__)("Export Settings","post-expirator"),description:(0,o.__)("Export the plugin settings and workflows to a .json file. This file can be imported later to restore the data or migrate to another site.","post-expirator")},React.createElement("ul",{id:"export-actions"},React.createElement("li",{key:"export-action-workflows"},React.createElement(i.CheckboxControl,{label:(0,o.__)("Action Workflows","post-expirator"),checked:e&&S.length>0,onChange:function(t){return n(t)},disabled:0===S.length}),e&&S.length>0&&React.createElement("div",{className:"pe-settings-tab__backup-container"},T&&React.createElement("div",null,React.createElement(i.ToggleControl,{label:(0,o.__)("Include screenshots","post-expirator"),checked:d,onChange:function(t){return h(t)}})),React.createElement(m,{items:S,selectedItems:A,onSelect:j}))),React.createElement("li",{key:"export-action-settings"},React.createElement(i.CheckboxControl,{label:(0,o.__)("Action Settings","post-expirator"),checked:s,onChange:function(t){return u(t)}}),s&&React.createElement("div",{className:"pe-settings-tab__backup-container"},React.createElement(m,{items:I,selectedItems:D,onSelect:C})))),(e||s)&&React.createElement(i.Button,{isPrimary:!0,onClick:B,isBusy:w,disabled:w},w?(0,o.__)("Exporting...","post-expirator"):(0,o.__)("Export","post-expirator")),w&&React.createElement(i.Button,{isLink:!0,onClick:function(){var t=O.current;t&&t.abort()},className:"pe-settings-tab__export-cancel-button"},(0,o.__)("Cancel","post-expirator")))};function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}const S=function(t){var e,n,r=t.defaultTab,o=void 0===r?"":r,l=t.tabs,s=void 0===l?[{label:"Tab 1",value:"tab1"},{label:"Tab 2",value:"tab2"}]:l,u=t.onChange,p=void 0===u?function(){}:u,f=t.children,d=t.noticeAutoDismissTimeout,m=void 0===d?5e3:d,h=function(){var t=window.location.hash.replace("#",""),e=s.find((function(e){return e.value===t}))||o;return"object"===E(e)?e.value:e},y=(e=(0,a.useState)(h()),n=2,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,s=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);l=!0);}catch(t){s=!0,o=t}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(e,n)||function(t,e){if(t){if("string"==typeof t)return _(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),v=y[0],b=y[1],g=(0,c.useSelect)((function(t){return t("core/notices").getNotices()})),x=(0,c.useDispatch)("core/notices").removeNotice;return(0,a.useEffect)((function(){var t=function(){var t=h();b(t)};return window.addEventListener("hashchange",t),function(){return window.removeEventListener("hashchange",t)}}),[]),(0,a.useEffect)((function(){g.forEach((function(t){setTimeout((function(){x(t.id)}),m)}))}),[g]),(0,a.useEffect)((function(){window.history.replaceState(null,"","#".concat(v)),p(v)}),[v]),React.createElement(React.Fragment,null,React.createElement("div",{id:"pe-settings-tabs"},React.createElement("nav",{className:"nav-tab-wrapper postexpirator-nav-tab-wrapper",id:"postexpirator-nav"},s.map((function(t){return React.createElement("a",{key:t.value,href:"#",className:"pe-tab nav-tab ".concat(v===t.value?"nav-tab-active":""),"data-tab":t.value,onClick:function(e){e.preventDefault(),b(t.value)}},t.label)}))),f),React.createElement(i.SnackbarList,{notices:g,className:"pe-settings-tab__snackbar-list",onRemove:function(t){x(t)}}))};function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}const R=function(){var t,e,n=(t=(0,a.useState)(),e=2,function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,s=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);l=!0);}catch(t){s=!0,o=t}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return k(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=n[0],i=n[1],c=[{label:(0,o.__)("Export","post-expirator"),value:"export"},{label:(0,o.__)("Import","post-expirator"),value:"import"}];return React.createElement(React.Fragment,null,React.createElement(S,{tabs:c,defaultTab:c[0].value,onChange:i},"import"===r&&React.createElement(p,null),"export"===r&&React.createElement(w,null)))};var A=n(5072),j=n.n(A),L=n(7825),D=n.n(L),C=n(7659),O=n.n(C),T=n(5056),I=n.n(T),N=n(540),F=n.n(N),P=n(1113),M=n.n(P),B=n(4337),U={};U.styleTagTransform=M(),U.setAttributes=I(),U.insert=O().bind(null,"head"),U.domAPI=D(),U.insertStyleElement=F(),j()(B.A,U),B.A&&B.A.locals&&B.A.locals;var G=document.getElementById("backup-panel");if(G){var z=React.createElement(R,null);(0,r.H)(G).render(z)}})();