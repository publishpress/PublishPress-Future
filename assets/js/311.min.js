/*! For license information please see 311.min.js.LICENSE.txt */
"use strict";(self.webpackChunkpost_expirator=self.webpackChunkpost_expirator||[]).push([[311],{5311:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Rd});var r={};n.r(r),n.d(r,{getBaseSlugCounts:()=>Ke,getDataTypeByName:()=>He,getDataTypes:()=>Be,getDraggingFromHandle:()=>Ye,getEdgeById:()=>we,getEdges:()=>ge,getEditedWorkflowAttribute:()=>Ae,getEditedWorkflowAttributes:()=>Oe,getGlobalVariable:()=>qe,getGlobalVariables:()=>Ge,getInitialViewport:()=>je,getNodeById:()=>he,getNodeErrors:()=>Qe,getNodes:()=>ye,getPostType:()=>ve,getRayDebugShowEmails:()=>Ze,getRayDebugShowQueries:()=>Xe,getRayDebugShowWordPressErrors:()=>et,getSelectedEdges:()=>Ee,getSelectedEdgesCount:()=>ze,getSelectedElementsCount:()=>Me,getSelectedNodes:()=>_e,getSelectedNodesCount:()=>Ue,getTaxonomyTerms:()=>$e,getWorkflow:()=>ke,getWorkflowStatus:()=>Re,hasSelectedEdges:()=>xe,hasSelectedNodes:()=>Se,isAutosavingWorkflow:()=>Fe,isConnectingNodes:()=>Je,isCreatingWorkflow:()=>Te,isCurrentWorkflowPublished:()=>Ve,isDeletingWorkflow:()=>Le,isEditedWorkflowDirty:()=>Pe,isEditedWorkflowSaveable:()=>We,isLoadingWorkflow:()=>Ce,isNewWorkflow:()=>Ne,isPublishedWorkflow:()=>Ie,isSavingWorkflow:()=>De});var o={};n.r(o),n.d(o,{addDataType:()=>Ft,addNode:()=>$t,addNodeError:()=>zt,deleteWorkflow:()=>Dt,fetchTaxonomyTerms:()=>Vt,incrementBaseSlugCounts:()=>Mt,publishWorkflow:()=>St,removeEdge:()=>qt,removeNode:()=>Gt,removeNodeError:()=>Bt,removePlaceholderNodes:()=>Kt,resetNodeErrors:()=>Ht,saveAsCurrentStatus:()=>Et,saveAsDraft:()=>_t,setDataTypes:()=>Lt,setDraggingFromHandle:()=>Qt,setEdges:()=>At,setEditedWorkflowAttribute:()=>jt,setFlow:()=>Rt,setGlobalVariable:()=>Wt,setInitialViewport:()=>Ct,setIsConnectingNodes:()=>Yt,setNodes:()=>Ot,setPostType:()=>kt,setSelectedEdges:()=>Nt,setSelectedNodes:()=>Tt,setupEditor:()=>ht,switchToDraft:()=>xt,unselectAll:()=>Pt,updateBaseSlugCounts:()=>Ut,updateNode:()=>It});var a=n(1386),i=n(1965),l=n(6942),c=n.n(l),s=n(7562),u="publishpress-future/workflow",d=n(1967),p=n(7199),f=n(8566);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function b(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return(t=function(e){var t=function(e){if("object"!=m(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==m(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=futureWorkflowEditor.isPro||!1,_={activeFeatures:[],currentInserterTab:p.Dh,triggerCategories:[],triggerNodes:[],actionCategories:[],actionNodes:[],advancedCategories:[],advancedNodes:[],activeSidebarName:null,hoveredItem:null,panelBodyStates:{},isPro:w,currentConditionalQuery:null},E=(0,s.createReduxStore)("publishpress-future/workflow-editor",{reducer:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"SET_ACTIVE_FEATURES":return n.payload.forEach((function(e){x.includes(e)&&A(e,!0)})),null===(e=n.payload.includes(p.is)?null:t.activeSidebarName)&&(0,s.dispatch)("core/interface").disableComplementaryArea(p.eJ),g(g({},t),{},{activeFeatures:n.payload,activeSidebarName:e});case"TOGGLE_FEATURE":var r=n.payload,o=b(t.activeFeatures);return o.includes(r)?o=o.filter((function(e){return e!==r})):o.push(r),x.forEach((function(e){o.includes(e)?A(e,!0):A(e,!1)})),null===(e=o.includes(p.is)?null:t.activeSidebarName)&&(0,s.dispatch)("core/interface").disableComplementaryArea(p.eJ),g(g({},t),{},{activeFeatures:o,activeSidebarName:e});case"ENABLE_FEATURE":var a=n.payload;x.includes(a)&&A(a,!0);var i=[].concat(b(t.activeFeatures),[a]);return null===(e=i.includes(p.is)?null:t.activeSidebarName)&&(0,s.dispatch)("core/interface").disableComplementaryArea(p.eJ),g(g({},t),{},{activeFeatures:i,activeSidebarName:e});case"DISABLE_FEATURE":var l=n.payload;return x.includes(l)&&A(l,!1),g(g({},t),{},{activeFeatures:t.activeFeatures.filter((function(e){return e!==l}))});case"SET_CURRENT_INSERTER_TAB":return g(g({},t),{},{currentInserterTab:n.payload});case"SET_TRIGGER_CATEGORIES":return g(g({},t),{},{triggerCategories:n.payload});case"SET_TRIGGER_NODES":return g(g({},t),{},{triggerNodes:n.payload});case"SET_ACTION_CATEGORIES":return g(g({},t),{},{actionCategories:n.payload});case"SET_ACTION_NODES":return g(g({},t),{},{actionNodes:n.payload});case"SET_ADVANCED_CATEGORIES":return g(g({},t),{},{advancedCategories:n.payload});case"SET_ADVANCED_NODES":return g(g({},t),{},{advancedNodes:n.payload});case"CLOSE_GENERAL_SIDEBAR":return g(g({},t),{},{activeSidebarName:null});case"OPEN_GENERAL_SIDEBAR":return g(g({},t),{},{activeSidebarName:n.payload,activeFeatures:t.activeFeatures.filter((function(e){return e!==p.is}))});case"SET_HOVERED_ITEM":return g(g({},t),{},{hoveredItem:n.payload});case"SET_PANEL_BODY_STATE":var c=g(g({},t),{},{panelBodyStates:g(g({},t.panelBodyStates),{},h({},n.payload.panel,n.payload.state))});return C(n.payload.panel,n.payload.state),c;case"SET_CURRENT_CONDITIONAL_QUERY":return g(g({},t),{},{currentConditionalQuery:n.payload})}return t},actions:{setActiveFeatures:function(e){return{type:"SET_ACTIVE_FEATURES",payload:e}},toggleFeature:function(e){return{type:"TOGGLE_FEATURE",payload:e}},disableFeature:function(e){return{type:"DISABLE_FEATURE",payload:e}},enableFeature:function(e){return{type:"ENABLE_FEATURE",payload:e}},setCurrentInserterTab:function(e){return{type:"SET_CURRENT_INSERTER_TAB",payload:e}},setTriggerCategories:function(e){return{type:"SET_TRIGGER_CATEGORIES",payload:e}},setTriggerNodes:function(e){return{type:"SET_TRIGGER_NODES",payload:e}},setActionCategories:function(e){return{type:"SET_ACTION_CATEGORIES",payload:e}},setActionNodes:function(e){return{type:"SET_ACTION_NODES",payload:e}},setAdvancedCategories:function(e){return{type:"SET_ADVANCED_CATEGORIES",payload:e}},setAdvancedNodes:function(e){return{type:"SET_ADVANCED_NODES",payload:e}},closeGeneralSidebar:function(){return(0,s.dispatch)("core/interface").disableComplementaryArea(p.eJ),{type:"CLOSE_GENERAL_SIDEBAR",payload:null}},openGeneralSidebar:function(e){return(0,s.dispatch)("core/interface").enableComplementaryArea(p.eJ,e),{type:"OPEN_GENERAL_SIDEBAR",payload:e}},openInserter:function(){return{type:"ENABLE_FEATURE",payload:p.is}},closeInserter:function(){return{type:"DISABLE_FEATURE",payload:p.is}},setHoveredItem:function(e){return{type:"SET_HOVERED_ITEM",payload:e}},setPanelBodyState:function(e,t){return{type:"SET_PANEL_BODY_STATE",payload:{panel:e,state:t}}},setCurrentConditionalQuery:function(e){return{type:"SET_CURRENT_CONDITIONAL_QUERY",payload:e}}},selectors:{getActiveFeatures:function(e){return e.activeFeatures},isFeatureActive:function(e,t){return e.activeFeatures.includes(t)},getCurrentInserterTab:function(e){return e.currentInserterTab},getTriggerCategories:function(e){return e.triggerCategories},getTriggerNodes:function(e){return e.triggerNodes},getActionCategories:function(e){return e.actionCategories},getActionNodes:function(e){return e.actionNodes},getAdvancedCategories:function(e){return e.advancedCategories},getAdvancedNodes:function(e){return e.advancedNodes},getHoveredItem:function(e){return e.hoveredItem},getPanelBodyState:function(e,t){return e.panelBodyStates[t]},getAllNodes:function(e){return e.triggerNodes.concat(e.actionNodes,e.advancedNodes)},getNodeTypeByName:function(e,t){return e.triggerNodes.concat(e.actionNodes,e.advancedNodes).find((function(e){return e.name===t}))||{}},isRayDebugInstalled:function(e){return e.advancedNodes.some((function(e){return"advanced/ray.debug"===e.name}))},isPro:function(e){return e.isPro},getCurrentConditionalQuery:function(e){return e.currentConditionalQuery}}});(0,s.register)(E);var S="FUTURE_PRO_WORKFLOW_PREFERENCES_"+futureWorkflowEditor.currentUserId,x=[p.t7,p.m$,p.d6,p.yY,p.s$,p.kD];null===localStorage.getItem(S)&&localStorage.setItem(S,JSON.stringify({persistentFeatures:{},panelBodyStates:{}}));var R=function(){return JSON.parse(localStorage.getItem(S))},k=function(e){localStorage.setItem(S,JSON.stringify(e))},O=function(e){var t;return null===(t=R().persistentFeatures)||void 0===t?void 0:t[e]},A=function(e,t){var n=R();n.persistentFeatures||(n.persistentFeatures={}),n.persistentFeatures[e]=t,k(n)},C=function(e,t){var n=R();n.panelBodyStates||(n.panelBodyStates={}),n.panelBodyStates[e]=t,k(n)};null==O(p.t7)&&A(p.t7,!0),null==O(p.d6)&&A(p.d6,!0),null==O(p.kD)&&A(p.kD,!0),x.forEach((function(e){O(e)?(0,s.dispatch)(E).enableFeature(e):(0,s.dispatch)(E).disableFeature(e)}));var T=R().panelBodyStates||{};function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function N(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e,t,n){return(t=function(e){var t=function(e){if("object"!=P(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==P(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}T&&Object.keys(T).forEach((function(e){(0,s.dispatch)(E).setPanelBodyState(e,T[e])}));var F=10;function W(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:window).navigator.platform;return-1!==e.indexOf("Mac")||["iPad","iPhone"].includes(e)}function V(e){var t=(0,s.select)(tn).getNodes(),n=(0,s.select)(tn).getEdges();return e?(0,d.FB)(e,t,n):[]}function M(e){var t=V(e);if(!t.length)return[];var n=t;return t.forEach((function(e){var t=M(e);n=n.concat(t)})),n}function U(e){var t;return(0,s.select)(E).getNodeTypeByName(null==e||null===(t=e.data)||void 0===t?void 0:t.name)}function z(e){return!!e.type&&e.type.startsWith("__dynamic__:")}function B(e){var t=U(e),n=(null==t?void 0:t.outputSchema)||[],r=[];return n.some(z)&&(n=n.filter((function(t){if(z(t)){var n,o=t.type.replace("__dynamic__:","");return null!=e&&null!==(n=e.data)&&void 0!==n&&null!==(n=n.settings)&&void 0!==n&&n[o]&&e.data.settings[o].forEach((function(e){var n=I({},e);n.label=n.label||n.name.charAt(0).toUpperCase()+n.name.slice(1),n.description=n.description||t.description||__("Dynamic output item","post-expiration"),null!=n&&n.value&&(n.type=null==n?void 0:n.value,delete n.value),r.push(n)})),!1}return!0}))),r.length&&(n=n.concat(r)),n}function H(e){var t=V(e),n=[];t.forEach((function(e){if(e){var t=B(e);if(null!=t&&t.length){var r=U(e);t.forEach((function(t){"input"===t.type?H(e).map((function(t){n.push(I(I({},t),{},{name:"".concat(t.name),type:t.type,nodeLabel:r.label,nodeSlug:e.data.slug,priority:(null==t?void 0:t.priority)||F}))})):n.push(I(I({},t),{},{label:"".concat(t.label),name:"".concat(e.data.slug,".").concat(t.name),type:t.type,nodeLabel:r.label,nodeSlug:e.data.slug,priority:(null==t?void 0:t.priority)||F}))}))}}}));var r=n.filter((function(e,t,n){return t===n.findIndex((function(t){return t.name===e.name}))}));return r.sort((function(e,t){return e.name<t.name?-1:e.name>t.name?1:0})),r.sort((function(e,t){return e.priority-t.priority})),r}function G(e){var t=function(e){var t,n,r=(0,s.select)(E).getNodeTypeByName(null==e||null===(t=e.data)||void 0===t?void 0:t.name);return null!=r&&null!==(n=r.stepScopedVariablesSchema)&&void 0!==n&&n.length?r.stepScopedVariablesSchema.map((function(t){return{name:e.data.slug+"."+t.name,label:t.label,children:[],type:t.type,itemsType:null==t?void 0:t.itemsType,description:null==t?void 0:t.description,nodeSlug:e.data.slug,priority:(null==t?void 0:t.priority)||F,context:null==t?void 0:t.context}})):[]}(e),n=t.map(Q);return n.sort((function(e,t){return e.priority-t.priority})),n}function q(e,t){var n=H(e),r=function(e){var t=[];return Object.keys(e).forEach((function(n){var r=e[n];t.push({name:n,type:r.type,label:r.label,source:"global",description:r.description,priority:(null==r?void 0:r.priority)||F})})),t.forEach((function(e){e.name="global."+e.name,e.priority=(null==e?void 0:e.priority)||F})),t}(t),o=[].concat(N(n),N(r)).map(Q);return o.sort((function(e,t){return e.priority-t.priority})),o}function $(e){return{id:"{{"+e.name+"}}",name:e.name,label:e.label,children:[],type:e.type,itemsType:null==e?void 0:e.itemsType,description:null==e?void 0:e.description,nodeSlug:null==e?void 0:e.nodeSlug,priority:(null==e?void 0:e.priority)||F,context:null==e?void 0:e.context}}function K(e){var t,n=(0,(0,s.select)(tn).getDataTypeByName)(e.type);return null!=n&&null!==(t=n.propertiesSchema)&&void 0!==t&&t.length?n.propertiesSchema.map((function(t){var r=$({name:e.name+"."+t.name,label:t.label,type:null==t?void 0:t.type,itemsType:null==t?void 0:t.itemsType,description:null==t?void 0:t.description,nodeSlug:null==e?void 0:e.nodeSlug,children:[],priority:(null==t?void 0:t.priority)||F,context:null==t?void 0:t.context});return"object"===n.primitiveType&&(r.children=K(r)),r})):[]}function Q(e){var t=(0,(0,s.select)(tn).getDataTypeByName)(e.type);return z(e=$(e))?e:t?("object"===t.primitiveType&&(e.children=K(e)),e):(console.log("No data type found for variable",e),e)}function Y(e,t){var n=!0;return null!=t&&t.length&&((n=t.includes(null==e?void 0:e.name))||(n=t.includes(null==e?void 0:e.primitiveType)),n||"array"!==(null==e?void 0:e.primitiveType)||(n=t.includes(null==e?void 0:e.itemsType))),n}function J(e,t){var n=(0,s.select)(tn).getDataTypeByName,r=[];return e.forEach((function(e){var o=n(e.type),a=null==e?void 0:e.itemsType,i=Y(o,t);if("array"===e.type&&a&&!i){var l=t.map((function(e){return e.startsWith("array:")?e.replace("array:",""):null}));i=Y(n(a),l)}var c=null,s=[];"object"===o.primitiveType?(o.propertiesSchema.forEach((function(r){if(Y(n(r.type),t)){var o={id:e.name+"."+r.name,name:e.name+"."+r.name,label:e.label+" -> "+r.label};s.push($(o))}})),c={id:e.id,name:e.label,children:s,type:e.type},i?r.push(c):s.length&&(r=r.concat(s))):i&&r.push({id:e.id,name:e.label,children:[],type:e.type})})),r}var X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"node",t=((new Date).getTime()-new Date("2024-01-01 00:00:00").getTime()).toString(32);return"".concat(e,"_").concat(t)};function Z(e){var t,n=e.item,r=e.position,o=e.reactFlowInstance,a=function(e){var t=(0,s.select)(E).getNodeTypeByName(e.name),n=(0,s.select)(tn).getBaseSlugCounts(),r=t.baseSlug;r||(r="node"),(0,s.dispatch)(tn).incrementBaseSlugCounts(r);var o=n[r]||0;return"".concat(r).concat(o+1)}(n),i=(0,s.select)(tn).getNodes(),l=null!==(t=n.baseSlug)&&void 0!==t?t:"node",c={id:X(l),type:n.type,position:r,data:{name:n.name,elementaryType:n.elementaryType,version:n.version,slug:a,settings:{}}};return n.settingsSchema&&n.settingsSchema.forEach((function(e){e.fields.forEach((function(e){void 0!==e.default&&(c.data.settings[e.name]=e.default)}))})),i=i.filter((function(e){return e.data.elementaryType!==p._o})),(0,s.dispatch)(tn).setNodes(i.concat(c)),function(e){setTimeout((function(){(0,s.dispatch)(tn).setEditedWorkflowAttribute("flow",e.toObject())}),400)}(o),c}var ee=function(){return{id:X("triggerPlaceholder"),type:"triggerPlaceholder",position:{x:0,y:0},data:{name:"placeholder/trigger",elementaryType:p._o,version:1,slug:"triggerPlaceholder1"}}};function te(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t||(t=(0,s.select)(tn).getNodes()),t.find((function(t){return t.id===e}))}function ne(e,t){var n=e.replace("{{","").replace("}}",""),r=null;return t.forEach((function(t){t.name===n&&(r=t.type),n.startsWith(t.name)&&t.children.length>0&&(r=ne(e,t.children))})),r}function re(e){return re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},re(e)}function oe(e){return function(e){if(Array.isArray(e))return ae(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ae(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ae(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){ce(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ce(e,t,n){return(t=function(e){var t=function(e){if("object"!=re(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=re(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==re(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var se={postType:p.M$,isLoadingWorkflow:!1,isCreatingWorkflow:!1,isSavingWorkflow:!1,isNewWorkflow:!0,isDeletingWorkflow:!1,isAutosavingWorkflow:!1,isEditedWorkflowEmpty:!0,isCurrentWorkflowPublished:!1,workflow:{id:0,title:"",description:"",flow:{nodes:[],edges:[],viewport:{x:0,y:0,zoom:2}},status:"auto-draft",debugRayShowQueries:!1,debugRayShowEmails:!1,debugRayShowWordPressErrors:!1,debugRayShowCurrentRunningStep:!1},editedWorkflowAttributes:{},initialViewport:{x:0,y:0,zoom:2},selectedNodes:[],selectedEdges:[],dataTypes:[],globalVariables:[],isFetchingTaxonomyTerms:!1,taxonomyTerms:{},baseSlugCounts:{},nodeErrors:{},draggingFromHandle:{sourceId:null,handleId:null,handleType:null},isConnectingNodes:!1},ue=function(e){return e.map((function(e){return"genericEdge"!==e.type?e:le(le({},e),{},{markerEnd:{type:d.TG.ArrowClosed}})}))};function de(e){return e=fe(e,{payload:{name:"site",label:"Site",type:"site",runtimeOnly:!0,description:"The current site."}}),e=fe(e,{payload:{name:"workflow",label:"Workflow",type:"workflow",runtimeOnly:!1,description:"The current workflow."}}),e=fe(e,{payload:{name:"user",label:"Activating user",type:"user",runtimeOnly:!0,description:"The current user."}}),e=fe(e,{payload:{name:"trigger",label:"Activating trigger",type:"node",runtimeOnly:!0,description:"The node that activated the workflow."}}),fe(e,{payload:{name:"engine_execution_id",label:"Engine execution ID",type:"string",runtimeOnly:!0,description:"A unique identifier assigned each time the workflow engine runs. Useful for tracking specific workflow executions and debugging.",priority:35}})}var pe=function(e,t){return setTimeout((function(){return jQuery(".react-flow__pane").trigger("click")}),200),le(le({},e),{},{selectedNodes:[],selectedEdges:[]})},fe=function(e,t){var n=t.payload,r=n.name,o=n.label,a=n.type,i=n.value,l=n.runtimeOnly,c=n.description,s=n.priority,u=le({},e.globalVariables);return u[r]={name:r,type:a,value:i,label:o,runtimeOnly:l,description:c,priority:s},le(le({},e),{},{globalVariables:u})},me=function(e){if(!e)return{};var t=e.match(/([a-zA-Z0-9]+)(\d+)$/);return t?{baseSlug:t[1],count:parseInt(t[2])}:{}},be=function(e,t){var n=t.payload,r=me(n),o=function(e,t){var n=me(t),r=e.baseSlugCounts[null==n?void 0:n.baseSlug]||0,o=(null==n?void 0:n.count)||0;return isNaN(o)?r:o>r?o:r}(e,n),a=null==r?void 0:r.baseSlug;return a&&o?le(le({},e),{},{baseSlugCounts:le(le({},e.baseSlugCounts),{},ce({},a,o))}):e};var ve=function(e){return e.postType},ye=function(e){return e.workflow.flow.nodes},ge=function(e){return e.workflow.flow.edges},he=function(e,t){return te(t,e.workflow.flow.nodes)},we=function(e,t){return e.workflow.flow.edges.find((function(e){return e.id===t}))},_e=function(e){return e.selectedNodes},Ee=function(e){return e.selectedEdges},Se=function(e){return e.selectedNodes.length>0},xe=function(e){return e.selectedEdges.length>0},Re=function(e){return e.workflow.status},ke=function(e){return e.workflow},Oe=function(e){return e.editedWorkflowAttributes},Ae=function(e,t){return e.workflow.hasOwnProperty(t),e.workflow[t]},Ce=function(e){return!!e.isLoadingWorkflow},Te=function(e){return!!e.isCreatingWorkflow},Pe=function(e){return Object.keys(e.editedWorkflowAttributes).length>0},Ne=function(e){return!!e.isNewWorkflow},je=function(e){return e.initialViewport},De=function(e){return!!e.isSavingWorkflow},Ie=function(e){return"publish"===e.workflow.status},Le=function(e){return!!e.isDeletingWorkflow},Fe=function(e){return!!e.isAutosavingWorkflow},We=function(e){var t;return t=e.editedWorkflowAttributes.hasOwnProperty("title")?e.editedWorkflowAttributes.title:e.workflow.title,Object.keys(e.editedWorkflowAttributes).length>0&&!e.isSavingWorkflow&&!e.isAutosavingWorkflow&&""!==String(t).trim()},Ve=function(e){return e.isCurrentWorkflowPublished},Me=function(e){return e.selectedNodes.length+e.selectedEdges.length},Ue=function(e){return e.selectedNodes.length},ze=function(e){return e.selectedEdges.length},Be=function(e){return e.dataTypes},He=function(e,t){return e.dataTypes.find((function(e){return e.name===t}))};function Ge(e){return e.globalVariables}function qe(e,t){return e.globalVariables.find((function(e){return e.name===t}))}function $e(e,t){return e.taxonomyTerms[t]||[]}function Ke(e){return e.baseSlugCounts}function Qe(e,t){return e.nodeErrors[t]||[]}function Ye(e){return e.draggingFromHandle}function Je(e){return!!e.isConnectingNodes}function Xe(e){return e.rayDebug.showQueries}function Ze(e){return e.rayDebug.showEmails}function et(e){return e.rayDebug.showWordPressErrors}var tt=n(1826),nt=n(2470);function rt(e){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rt(e)}function ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function at(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ot(Object(n),!0).forEach((function(t){it(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function it(e,t,n){return(t=function(e){var t=function(e){if("object"!=rt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=rt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==rt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lt(){lt=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),l=new T(r||[]);return o(i,"_invoke",{value:k(e,n,l)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",f="suspendedYield",m="executing",b="completed",v={};function y(){}function g(){}function h(){}var w={};s(w,i,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(P([])));E&&E!==n&&r.call(E,i)&&(w=E);var S=h.prototype=y.prototype=Object.create(w);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function R(e,t){function n(o,a,i,l){var c=d(e[o],e,a);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==rt(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function k(t,n,r){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===b){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var l=r.delegate;if(l){var c=O(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=b,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var s=d(t,n,r);if("normal"===s.type){if(o=r.done?b:f,s.arg===v)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=b,r.method="throw",r.arg=s.arg)}}}function O(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,O(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(rt(t)+" is not iterable")}return g.prototype=h,o(S,"constructor",{value:h,configurable:!0}),o(h,"constructor",{value:g,configurable:!0}),g.displayName=s(h,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s(e,c,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},x(R.prototype),s(R.prototype,l,(function(){return this})),t.AsyncIterator=R,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new R(u(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(S),s(S,c,"Generator"),s(S,i,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return l.type="throw",l.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}var ct=lt().mark(ht),st=lt().mark(_t),ut=lt().mark(Et),dt=lt().mark(St),pt=lt().mark(xt),ft=lt().mark(Dt),mt=lt().mark(Vt),bt=window.futureWorkflowEditor,vt=bt.apiUrl,yt=bt.nonce,gt=["title","description","flow","status","debugRayShowQueries","debugRayShowEmails","debugRayShowWordPressErrors","debugRayShowCurrentRunningStep"];function ht(e){var t,n;return lt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,{type:"LOAD_WORKFLOW_START"};case 2:if(0!=(e=parseInt(e,10))){r.next=19;break}return r.next=6,{type:"CREATE_WORKFLOW_START"};case 6:return r.prev=6,r.next=9,(0,tt.nr)({path:"".concat(vt,"/workflows"),method:"POST",headers:{"X-WP-Nonce":yt}});case 9:return t=r.sent,r.next=12,{type:"CREATE_WORKFLOW_SUCCESS",payload:t};case 12:r.next=19;break;case 14:return r.prev=14,r.t0=r.catch(6),(0,s.dispatch)("core/notices").createErrorNotice((0,nt.__)("Unable to create a new workflow. Please try again.","post-expirator")),r.next=19,{type:"CREATE_WORKFLOW_FAILURE"};case 19:if(!(e>0)){r.next=33;break}return r.prev=20,r.next=23,(0,tt.nr)({path:"".concat(vt,"/workflows/").concat(e),headers:{"X-WP-Nonce":yt}});case 23:return n=r.sent,r.next=26,{type:"LOAD_WORKFLOW_SUCCESS",payload:n};case 26:r.next=33;break;case 28:return r.prev=28,r.t1=r.catch(20),(0,s.dispatch)("core/notices").createErrorNotice((0,nt.__)("Unable to load the workflow. Please try again.","post-expirator")),r.next=33,{type:"LOAD_WORKFLOW_FAILURE"};case 33:case"end":return r.stop()}}),ct,null,[[6,14],[20,28]])}function wt(e){window.history.pushState({},"","?page=future_workflow_editor&workflow=".concat(parseInt(e)))}function _t(){var e,t,n,r;return lt().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,{type:"SAVE_AS_DRAFT_START"};case 2:return o.prev=2,o.next=5,(0,s.select)(u).isNewWorkflow();case 5:return e=o.sent,o.next=8,(0,s.select)(u).getWorkflow();case 8:return t=o.sent,n=at(at({},t),{},{status:"draft"}),o.next=12,(0,tt.nr)({path:"".concat(vt,"/workflows/").concat(parseInt(t.id)),method:"PUT",headers:{"X-WP-Nonce":yt},body:JSON.stringify(n)});case 12:return r=o.sent,e&&wt(r.id),o.next=16,{type:"SAVE_AS_DRAFT_SUCCESS",payload:r};case 16:(0,s.dispatch)("core/notices").createSuccessNotice((0,nt.__)("Workflow saved as draft.","post-expirator"),{type:"snackbar",isDismissible:!0}),o.next=24;break;case 19:return o.prev=19,o.t0=o.catch(2),(0,s.dispatch)("core/notices").createErrorNotice((0,nt.__)("Unable to save workflow. Please, try again.","post-expirator")),o.next=24,{type:"SAVE_AS_DRAFT_FAILURE"};case 24:case"end":return o.stop()}}),st,null,[[2,19]])}function Et(){var e,t,n,r;return lt().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,s.select)(u).getWorkflow();case 2:if("auto-draft"!==o.sent.status){o.next=7;break}return o.next=6,_t();case 6:return o.abrupt("return");case 7:return o.next=9,{type:"SAVE_AS_CURRENT_STATUS_START"};case 9:return o.prev=9,o.next=12,(0,s.select)(u).isNewWorkflow();case 12:return e=o.sent,o.next=15,(0,s.select)(u).getWorkflow();case 15:return t=o.sent,n=at({},t),o.next=19,(0,tt.nr)({path:"".concat(vt,"/workflows/").concat(parseInt(t.id)),method:"PUT",headers:{"X-WP-Nonce":yt},body:JSON.stringify(n)});case 19:return r=o.sent,e&&wt(r.id),o.next=23,{type:"SAVE_AS_CURRENT_STATUS_SUCCESS",payload:r};case 23:(0,s.dispatch)("core/notices").createSuccessNotice((0,nt.__)("Workflow saved.","post-expirator"),{type:"snackbar",isDismissible:!0}),o.next=31;break;case 26:return o.prev=26,o.t0=o.catch(9),(0,s.dispatch)("core/notices").createErrorNotice((0,nt.__)("Unable to save workflow. Please, try again.","post-expirator")),o.next=31,{type:"SAVE_AS_CURRENT_STATUS_FAILURE"};case 31:case"end":return o.stop()}}),ut,null,[[9,26]])}function St(){var e,t,n,r;return lt().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,{type:"PUBLISH_WORKFLOW_START"};case 2:return o.prev=2,o.next=5,(0,s.select)(u).isNewWorkflow();case 5:return e=o.sent,o.next=8,(0,s.select)(u).getWorkflow();case 8:return t=o.sent,n=at(at({},t),{},{status:"publish"}),o.next=12,(0,tt.nr)({path:"".concat(vt,"/workflows/").concat(parseInt(t.id)),method:"PUT",headers:{"X-WP-Nonce":yt},body:JSON.stringify(n)});case 12:return r=o.sent,e&&wt(r.id),o.next=16,{type:"PUBLISH_WORKFLOW_SUCCESS",payload:r};case 16:(0,s.dispatch)("core/notices").createSuccessNotice((0,nt.__)("Workflow published.","post-expirator"),{type:"snackbar",isDismissible:!0}),o.next=24;break;case 19:return o.prev=19,o.t0=o.catch(2),(0,s.dispatch)("core/notices").createErrorNotice((0,nt.__)("Unable to publish the workflow. Please, try again.","post-expirator")),o.next=24,{type:"PUBLISH_WORKFLOW_FAILURE"};case 24:case"end":return o.stop()}}),dt,null,[[2,19]])}function xt(){var e,t,n,r;return lt().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,{type:"SWITCH_TO_DRAFT_START"};case 2:return o.prev=2,o.next=5,(0,s.select)(u).isNewWorkflow();case 5:return e=o.sent,o.next=8,(0,s.select)(u).getWorkflow();case 8:return t=o.sent,n=at(at({},t),{},{status:"draft"}),o.next=12,(0,tt.nr)({path:"".concat(vt,"/workflows/").concat(parseInt(t.id)),method:"PUT",headers:{"X-WP-Nonce":yt},body:JSON.stringify(n)});case 12:return r=o.sent,e&&wt(r.id),o.next=16,{type:"SWITCH_TO_DRAFT_SUCCESS",payload:r};case 16:(0,s.dispatch)("core/notices").createSuccessNotice((0,nt.__)("Workflow switched to draft.","post-expirator"),{type:"snackbar",isDismissible:!0}),o.next=24;break;case 19:return o.prev=19,o.t0=o.catch(2),(0,s.dispatch)("core/notices").createErrorNotice((0,nt.__)("Unable to switch workflow to draft. Please, try again.","post-expirator")),o.next=24,{type:"SWITCH_TO_DRAFT_FAILURE"};case 24:case"end":return o.stop()}}),pt,null,[[2,19]])}var Rt=function(e){return{type:"SET_FLOW",payload:e}},kt=function(e){return{type:"SET_POST_TYPE",payload:e}},Ot=function(e){return{type:"SET_NODES",payload:e}},At=function(e){return{type:"SET_EDGES",payload:e}},Ct=function(e){return{type:"SET_INITIAL_VIEWPORT",payload:e}},Tt=function(e){return{type:"SET_SELECTED_NODES",payload:e}},Pt=function(){return{type:"UNSELECT_ALL"}},Nt=function(e){return{type:"SET_SELECTED_EDGES",payload:e}},jt=function(e,t){if(!gt.includes(e))throw new Error('The workflow attribute "'.concat(e,'" is not editable.'));return{type:"SET_EDITED_WORKFLOW_ATTRIBUTE",payload:{key:e,value:t}}};function Dt(){var e,t;return lt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,{type:"DELETE_WORKFLOW_START"};case 2:return n.next=4,(0,s.select)(u).getWorkflow();case 4:return e=n.sent,n.prev=5,n.next=8,(0,tt.nr)({path:"".concat(vt,"/workflows/").concat(parseInt(e.id)),method:"DELETE",headers:{"X-WP-Nonce":yt}});case 8:return t=n.sent,n.next=11,{type:"DELETE_WORKFLOW_SUCCESS",payload:t};case 11:(0,s.dispatch)("core/notices").createSuccessNotice((0,nt.__)("Workflow deleted. Redirecting...","post-expirator"),{type:"snackbar",isDismissible:!0}),window.location.href="edit.php?post_type=ppfuture_workflow",n.next=20;break;case 15:return n.prev=15,n.t0=n.catch(5),(0,s.dispatch)("core/notices").createErrorNotice((0,nt.__)("Unable to delete the workflow. Please, try again.","post-expirator")),n.next=20,{type:"DELETE_WORKFLOW_FAILURE"};case 20:case"end":return n.stop()}}),ft,null,[[5,15]])}function It(e){return{type:"UPDATE_NODE",payload:e}}function Lt(e){return{type:"SET_DATA_TYPES",payload:e}}function Ft(e){return{type:"ADD_DATA_TYPE",payload:e}}function Wt(e){return{type:"SET_GLOBAL_VARIABLE",payload:e}}function Vt(e){var t;return lt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,{type:"FETCH_TAXONOMY_TERMS_START"};case 2:return n.prev=2,n.next=5,(0,tt.nr)({path:"".concat(vt,"/terms/").concat(e),headers:{"X-WP-Nonce":yt}});case 5:return t=n.sent,n.next=8,{type:"FETCH_TAXONOMY_TERMS_SUCCESS",payload:{taxonomy:e,result:t}};case 8:n.next=14;break;case 10:return n.prev=10,n.t0=n.catch(2),n.next=14,{type:"FETCH_TAXONOMY_TERMS_FAILURE"};case 14:case"end":return n.stop()}}),mt,null,[[2,10]])}function Mt(e){return{type:"INCREMENT_BASE_SLUG_COUNTS",payload:e}}function Ut(e){return{type:"UPDATE_BASE_SLUG_COUNTS",payload:e}}function zt(e,t,n){return{type:"ADD_NODE_ERROR",payload:{nodeId:e,error:t,message:n,details:arguments.length>3&&void 0!==arguments[3]?arguments[3]:""}}}function Bt(e,t){return{type:"REMOVE_NODE_ERROR",payload:{nodeId:e,error:t}}}function Ht(e){return{type:"RESET_NODE_ERRORS",payload:e}}function Gt(e){return{type:"REMOVE_NODE",payload:e}}function qt(e){return{type:"REMOVE_EDGE",payload:e}}function $t(e){return{type:"ADD_NODE",payload:e}}function Kt(){return{type:"REMOVE_PLACEHOLDER_NODES"}}function Qt(e){return{type:"SET_DRAGGING_FROM_HANDLE",payload:{sourceId:e.sourceId,handleId:e.handleId,handleType:e.handleType}}}function Yt(e){return{type:"SET_IS_CONNECTING_NODES",payload:e}}function Jt(e){return Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jt(e)}function Xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zt(e,t,n){return(t=function(e){var t=function(e){if("object"!=Jt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Jt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Jt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const en=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xt(Object(n),!0).forEach((function(t){Zt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},tt.ne);var tn=(0,s.createReduxStore)(u,{reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_WORKFLOW_START":return function(e){return le(le({},e),{},{isCreatingWorkflow:!0,isLoadingWorkflow:!0})}(e);case"CREATE_WORKFLOW_SUCCESS":return function(e,t){var n=t.payload,r=[ee()];return le(le({},e=de(e)),{},{isCreatingWorkflow:!1,isLoadingWorkflow:!1,workflow:le(le({},n),{},{flow:le(le({},n.flow),{},{nodes:r})}),editedWorkflowAttributes:{},isNewWorkflow:"auto-draft"===n.status,isEditedWorkflowEmpty:0===e.workflow.flow.edges.length&&0===e.workflow.flow.nodes.length,isCurrentWorkflowPublished:"publish"===n.status})}(e,t);case"CREATE_WORKFLOW_FAILURE":return function(e){return le(le({},e),{},{isCreatingWorkflow:!1,isLoadingWorkflow:!1})}(e);case"LOAD_WORKFLOW_START":return function(e){return le(le({},e),{},{isLoadingWorkflow:!0})}(e);case"LOAD_WORKFLOW_SUCCESS":return function(e,t){var n,r,o,a=t.payload,i=(null===(n=a.flow)||void 0===n?void 0:n.nodes)||[],l=(null===(r=a.flow)||void 0===r?void 0:r.edges)||[],c=(null===(o=a.flow)||void 0===o?void 0:o.viewport)||se.viewport;return i.map((function(t){var n,r=null==t||null===(n=t.data)||void 0===n?void 0:n.slug;r&&(e=be(e,{payload:r}))})),i.length||(i=[ee()]),l=function(e,t){return t.filter((function(t){var n=te(t.source,e),r=te(t.target,e);return!(!n||!r)}))}(i,l=ue(l)),e=de(e),pe(e),le(le({},e),{},{isLoadingWorkflow:!1,workflow:le(le({},a),{},{flow:le(le({},a.flow),{},{nodes:i,edges:l})}),editedWorkflowAttributes:{},isNewWorkflow:"auto-draft"===a.status,initialViewport:c,isEditedWorkflowEmpty:0===l.length&&0===i.length,isCurrentWorkflowPublished:"publish"===a.status})}(e,t);case"LOAD_WORKFLOW_FAILURE":return function(e){return le(le({},e),{},{isLoadingWorkflow:!1})}(e);case"SAVE_AS_DRAFT_START":case"SWITCH_TO_DRAFT_START":case"SAVE_AS_CURRENT_STATUS_START":case"PUBLISH_WORKFLOW_START":return function(e){return le(le({},e),{},{isSavingWorkflow:!0})}(e);case"SAVE_AS_DRAFT_SUCCESS":return function(e,t){var n=t.payload;return le(le({},e),{},{isSavingWorkflow:!1,workflow:n,editedWorkflowAttributes:{},isNewWorkflow:"auto-draft"===n.status,isEditedWorkflowEmpty:0===e.workflow.flow.edges.length&&0===e.workflow.flow.nodes.length,isCurrentWorkflowPublished:"publish"===n.status})}(e,t);case"SAVE_AS_DRAFT_FAILURE":case"SWITCH_TO_DRAFT_FAILURE":case"SAVE_AS_CURRENT_STATUS_FAILURE":case"PUBLISH_WORKFLOW_FAILURE":return function(e){return le(le({},e),{},{isSavingWorkflow:!1})}(e);case"SWITCH_TO_DRAFT_SUCCESS":return function(e,t){var n=t.payload,r=le(le({},e.workflow),{},{status:n.status});return le(le({},e),{},{isSavingWorkflow:!1,workflow:r,isNewWorkflow:!1,isEditedWorkflowEmpty:0===e.workflow.flow.edges.length&&0===e.workflow.flow.nodes.length,isCurrentWorkflowPublished:"publish"===r.status,editedWorkflowAttributes:{}})}(e,t);case"SAVE_AS_CURRENT_STATUS_SUCCESS":return function(e,t){var n=t.payload,r=le(le({},e.workflow),n);return le(le({},e),{},{isSavingWorkflow:!1,workflow:r,isNewWorkflow:!1,isEditedWorkflowEmpty:0===e.workflow.flow.edges.length&&0===e.workflow.flow.nodes.length,isCurrentWorkflowPublished:"publish"===e.workflow.status,editedWorkflowAttributes:{}})}(e,t);case"PUBLISH_WORKFLOW_SUCCESS":return function(e,t){var n=t.payload,r=le(le({},e.workflow),{},{status:n.status});return le(le({},e),{},{isSavingWorkflow:!1,workflow:r,isNewWorkflow:!1,isEditedWorkflowEmpty:0===e.workflow.flow.edges.length&&0===e.workflow.flow.nodes.length,isCurrentWorkflowPublished:"publish"===r.status,editedWorkflowAttributes:{}})}(e,t);case"SET_EDITED_WORKFLOW_ATTRIBUTE":return function(e,t){var n=t.payload,r=n.key,o=n.value;return le(le({},e),{},{workflow:le(le({},e.workflow),{},ce({},r,o)),editedWorkflowAttributes:le(le({},e.editedWorkflowAttributes),{},ce({},r,o)),isEditedWorkflowEmpty:0===Object.keys(e.editedWorkflowAttributes).length})}(e,t);case"SET_POST_TYPE":return function(e,t){var n=t.payload;return le(le({},e),{},{postType:n})}(e,t);case"SET_NODES":return function(e,t){var n=t.payload;return le(le({},e),{},{workflow:le(le({},e.workflow),{},{flow:le(le({},e.workflow.flow),{},{nodes:n})})})}(e,t);case"ADD_NODE":return function(e,t){var n=t.payload,r=[].concat(oe(e.workflow.flow.nodes),[n]);return le(le({},e),{},{workflow:le(le({},e.workflow),{},{flow:le(le({},e.workflow.flow),{},{nodes:r})})})}(e,t);case"SET_EDGES":return function(e,t){var n=t.payload,r=ue(n);return le(le({},e),{},{workflow:le(le({},e.workflow),{},{flow:le(le({},e.workflow.flow),{},{edges:r})})})}(e,t);case"ADD_EDGE":return addEdge(e,t);case"SET_INITIAL_VIEWPORT":return function(e,t){var n=t.payload;return le(le({},e),{},{initialViewport:n})}(e,t);case"SET_SELECTED_NODES":return function(e,t){var n=t.payload;return le(le({},e),{},{selectedNodes:n})}(e,t);case"SET_SELECTED_EDGES":return function(e,t){var n=t.payload;return le(le({},e),{},{selectedEdges:n})}(e,t);case"UNSELECT_ALL":return pe(e,t);case"DELETE_WORKFLOW_START":return function(e){return le(le({},e),{},{isDeletingWorkflow:!0})}(e);case"DELETE_WORKFLOW_SUCCESS":case"DELETE_WORKFLOW_FAILURE":return function(e){return le(le({},e),{},{isDeletingWorkflow:!1})}(e);case"UPDATE_NODE":return function(e,t){var n=t.payload,r=e.workflow.flow.nodes.map((function(e){return e.id===n.id?le(le(le({},e),n),{},{data:le(le(le({},e.data),n.data),{},{settings:le(le({},e.data.settings),n.data.settings)})}):e})),o=le(le({},e.workflow),{},{flow:le(le({},e.workflow.flow),{},{nodes:r})});return le(le({},e),{},{workflow:o,editedWorkflowAttributes:le(le({},e.editedWorkflowAttributes),{},{flow:le(le({},e.editedWorkflowAttributes.flow),{},{nodes:r})})})}(e,t);case"SET_DATA_TYPES":return function(e,t){var n=t.payload;return le(le({},e),{},{dataTypes:n})}(e,t);case"ADD_DATA_TYPE":return function(e,t){var n=t.payload.payload;return le(le({},e),{},{dataTypes:[].concat(oe(e.dataTypes),[n])})}(e,t);case"SET_GLOBAL_VARIABLE":return fe(e,t);case"FETCH_TAXONOMY_TERMS_START":return function(e){return le(le({},e),{},{isFetchingTaxonomyTerms:!0})}(e);case"FETCH_TAXONOMY_TERMS_SUCCESS":return function(e,t){var n,r=t.payload,o=r.taxonomy,a=r.result,i=(null==a||null===(n=a.terms)||void 0===n?void 0:n.map((function(e){return{value:e.id,label:e.name}})))||[],l=le(le({},e.taxonomyTerms),{},ce({},o,i));return le(le({},e),{},{isFetchingTaxonomyTerms:!1,taxonomyTerms:l})}(e,t);case"FETCH_TAXONOMY_TERMS_FAILURE":return function(e){return le(le({},e),{},{isFetchingTaxonomyTerms:!1})}(e);case"INCREMENT_BASE_SLUG_COUNTS":return function(e,t){var n=t.payload,r=le(le({},e.baseSlugCounts),{},ce({},n,(e.baseSlugCounts[n]||0)+1));return le(le({},e),{},{baseSlugCounts:r})}(e,t);case"UPDATE_BASE_SLUG_COUNTS":return be(e,t);case"ADD_NODE_ERROR":return function(e,t){var n=t.payload,r=e.nodeErrors[n.nodeId]||{};r[n.error]={error:n.error,message:n.message,details:null==n?void 0:n.details};var o=le(le({},e.nodeErrors),{},ce({},n.nodeId,r));return le(le({},e),{},{nodeErrors:o})}(e,t);case"REMOVE_NODE_ERROR":return function(e,t){var n=t.payload,r=le({},e.nodeErrors);return r[n.nodeId]?(delete r[n.nodeId][n.error],le(le({},e),{},{nodeErrors:r})):e}(e,t);case"RESET_NODE_ERRORS":return function(e,t){var n=t.payload,r=le({},e.nodeErrors);return delete r[n],le(le({},e),{},{nodeErrors:r})}(e,t);case"REMOVE_NODE":return function(e,t){var n=t.payload,r=e.workflow.flow.edges.filter((function(e){return e.source!==n&&e.target!==n})),o=e.workflow.flow.nodes.filter((function(e){return e.id!==n}));return le(le({},e),{},{workflow:le(le({},e.workflow),{},{flow:le(le({},e.workflow.flow),{},{nodes:o,edges:r})}),selectedNodes:[],selectedEdges:[]})}(e,t);case"REMOVE_EDGE":return function(e,t){var n=t.payload,r=e.workflow.flow.edges.filter((function(e){return e.id!==n}));return le(le({},e),{},{workflow:le(le({},e.workflow),{},{flow:le(le({},e.workflow.flow),{},{edges:r})}),selectedNodes:[],selectedEdges:[]})}(e,t);case"REMOVE_PLACEHOLDER_NODES":return function(e){var t=e.workflow.flow.nodes.filter((function(e){return e.data.elementaryType!==p._o}));return le(le({},e),{},{workflow:le(le({},e.workflow),{},{flow:le(le({},e.workflow.flow),{},{nodes:t})})})}(e);case"SET_DRAGGING_FROM_HANDLE":return function(e,t){var n=t.payload,r=n.sourceId,o=n.handleId,a=n.handleType;return le(le({},e),{},{draggingFromHandle:{sourceId:r,handleId:o,handleType:a}})}(e,t);case"SET_IS_CONNECTING_NODES":return function(e,t){return le(le({},e),{},{isConnectingNodes:t.payload})}(e,t)}return e},actions:o,selectors:r,controls:en});(0,s.register)(tn);var nn=n(403),rn=n(5438),on=n(5447),an=n(2214),ln=n(4458);function cn(e){var t=e.children,n=e.size;return React.createElement("span",{className:"publishpress-icon",style:{width:"".concat(n,"px"),height:"".concat(n,"px"),display:"inline-block"}},t)}function sn(e){var t=e.size,n=void 0===t?24:t;return React.createElement(cn,{size:n},React.createElement("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",role:"img",viewBox:"0 0 24 24",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M2.227 4.857A2.228 2.228 0 000 7.094v7.457c0 1.236 1.001 2.237 2.237 2.237h9.253l4.229 2.355-.962-2.355h7.006c1.236 0 2.237-1 2.237-2.237V7.094c0-1.236-1-2.237-2.237-2.237zm8.08 1.311c.194.002.372.071.535.2a.769.769 0 01.304.56.851.851 0 01-.098.47c-.382.707-.696 1.894-.951 3.542-.246 1.6-.334 2.846-.275 3.739.02.245-.02.46-.118.647a.632.632 0 01-.52.353c-.255.02-.52-.098-.775-.362-.913-.933-1.639-2.326-2.169-4.18a184.085 184.085 0 00-1.413 2.825c-.578 1.11-1.069 1.678-1.481 1.708-.265.02-.49-.206-.687-.677-.5-1.286-1.04-3.768-1.619-7.448-.03-.255.02-.48.157-.657.137-.186.344-.284.618-.304.5-.04.785.196.854.706.304 2.051.638 3.788.991 5.21L5.809 8.41c.196-.373.441-.57.736-.589.431-.03.696.245.804.824.246 1.305.56 2.414.932 3.356.255-2.492.687-4.288 1.295-5.397.148-.274.363-.412.648-.431a.866.866 0 01.084-.004zm3.734 1.063c.167 0 .343.02.53.06.687.146 1.216.52 1.57 1.137.314.53.47 1.168.47 1.933 0 1.011-.254 1.933-.765 2.777-.588.981-1.354 1.472-2.305 1.472-.167 0-.344-.02-.53-.059-.697-.147-1.217-.52-1.57-1.138-.314-.54-.471-1.187-.471-1.943 0-1.01.255-1.933.765-2.767.599-.981 1.364-1.472 2.306-1.472zm6.152 0c.167 0 .343.02.53.06.696.146 1.216.52 1.57 1.137.314.53.47 1.168.47 1.933 0 1.011-.254 1.933-.765 2.777-.588.981-1.354 1.472-2.305 1.472-.167 0-.344-.02-.53-.059-.697-.147-1.217-.52-1.57-1.138-.314-.54-.471-1.187-.471-1.943 0-1.01.255-1.933.765-2.767.599-.981 1.364-1.472 2.306-1.472zm-6.107 1.645c-.307-.002-.606.201-.889.622a3.173 3.173 0 00-.52 1.168c-.05.225-.069.47-.069.716 0 .284.06.589.177.893.147.382.343.589.579.638.245.049.51-.06.795-.315.363-.323.608-.804.745-1.452.05-.225.069-.47.069-.726a2.49 2.49 0 00-.176-.893c-.148-.382-.344-.588-.58-.637a.714.714 0 00-.131-.014zm6.152 0c-.307-.002-.606.201-.889.622a3.173 3.173 0 00-.52 1.168c-.049.225-.069.47-.069.716 0 .284.06.589.177.893.147.382.344.589.579.638.245.049.51-.06.795-.315.363-.323.608-.804.745-1.452.04-.225.07-.47.07-.726a2.49 2.49 0 00-.177-.893c-.148-.382-.344-.588-.58-.637a.714.714 0 00-.131-.014Z"})))}function un(e){var t=e.size,n=void 0===t?24:t;return React.createElement(cn,{size:n},React.createElement("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 448 512",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"})))}function dn(e){var t=e.size,n=void 0===t?24:t;return React.createElement(cn,{size:n},React.createElement("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 512 512",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M256 0c53 0 96 43 96 96v3.6c0 15.7-12.7 28.4-28.4 28.4H188.4c-15.7 0-28.4-12.7-28.4-28.4V96c0-53 43-96 96-96zM41.4 105.4c12.5-12.5 32.8-12.5 45.3 0l64 64c.7 .7 1.3 1.4 1.9 2.1c14.2-7.3 30.4-11.4 47.5-11.4H312c17.1 0 33.2 4.1 47.5 11.4c.6-.7 1.2-1.4 1.9-2.1l64-64c12.5-12.5 32.8-12.5 45.3 0s12.5 32.8 0 45.3l-64 64c-.7 .7-1.4 1.3-2.1 1.9c6.2 12 10.1 25.3 11.1 39.5H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H416c0 24.6-5.5 47.8-15.4 68.6c2.2 1.3 4.2 2.9 6 4.8l64 64c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0l-63.1-63.1c-24.5 21.8-55.8 36.2-90.3 39.6V240c0-8.8-7.2-16-16-16s-16 7.2-16 16V479.2c-34.5-3.4-65.8-17.8-90.3-39.6L86.6 502.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l64-64c1.9-1.9 3.9-3.4 6-4.8C101.5 367.8 96 344.6 96 320H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H96.3c1.1-14.1 5-27.5 11.1-39.5c-.7-.6-1.4-1.2-2.1-1.9l-64-64c-12.5-12.5-12.5-32.8 0-45.3z"})))}function pn(e){var t=e.size,n=void 0===t?24:t;return React.createElement(cn,{size:n},React.createElement("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",version:"1.1",viewBox:"0 0 16 16",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M8 0c-4.418 0-8 1.119-8 2.5v2c0 1.381 3.582 2.5 8 2.5s8-1.119 8-2.5v-2c0-1.381-3.582-2.5-8-2.5z"}),React.createElement("path",{d:"M8 8.5c-4.418 0-8-1.119-8-2.5v3c0 1.381 3.582 2.5 8 2.5s8-1.119 8-2.5v-3c0 1.381-3.582 2.5-8 2.5z"}),React.createElement("path",{d:"M8 13c-4.418 0-8-1.119-8-2.5v3c0 1.381 3.582 2.5 8 2.5s8-1.119 8-2.5v-3c0 1.381-3.582 2.5-8 2.5z"})))}function fn(e){var t=e.size,n=void 0===t?24:t;return React.createElement(cn,{size:n},React.createElement("svg",{stroke:"currentColor",fill:"none",strokeWidth:"2",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M16 3h5v5"}),React.createElement("path",{d:"M8 3h-5v5"}),React.createElement("path",{d:"M21 3l-7.536 7.536a5 5 0 0 0 -1.464 3.534v6.93"}),React.createElement("path",{d:"M6 6.01v-.01"}),React.createElement("path",{d:"M8 8.02v-.01"}),React.createElement("path",{d:"M10 10v.01"})))}function mn(e){var t=e.size,n=void 0===t?24:t;return React.createElement(cn,{size:n},React.createElement("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 512 512",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M437.332 80H74.668C51.199 80 32 99.198 32 122.667v266.666C32 412.802 51.199 432 74.668 432h362.664C460.801 432 480 412.802 480 389.333V122.667C480 99.198 460.801 80 437.332 80zM432 170.667L256 288 80 170.667V128l176 117.333L432 128v42.667z"})))}function bn(e){var t=e.size,n=void 0===t?24:t;return React.createElement(cn,{size:n},React.createElement("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 24 24",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M20 2H4c-1.103 0-2 .894-2 1.992v12.016C2 17.106 2.897 18 4 18h3v4l6.351-4H20c1.103 0 2-.894 2-1.992V3.992A1.998 1.998 0 0 0 20 2zm-6 11H7v-2h7v2zm3-4H7V7h10v2z"})))}function vn(e){var t=e.size,n=void 0===t?24:t;return React.createElement(cn,{size:n},React.createElement("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 512 512",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M32 464h448L256 48 32 464zm248-64h-48v-48h48v48zm0-80h-48v-96h48v96z"})))}function yn(e){var t=e.size,n=void 0===t?24:t;return React.createElement(cn,{size:n},React.createElement("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 24 24",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),React.createElement("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),React.createElement("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})))}function gn(e){var t=e.size,n=void 0===t?24:t;return React.createElement(cn,{size:n},React.createElement("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 20 20","aria-hidden":"true",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{fillRule:"evenodd",d:"M4.5 2A1.5 1.5 0 0 0 3 3.5v13A1.5 1.5 0 0 0 4.5 18h11a1.5 1.5 0 0 0 1.5-1.5V7.621a1.5 1.5 0 0 0-.44-1.06l-4.12-4.122A1.5 1.5 0 0 0 11.378 2H4.5Zm2.25 8.5a.75.75 0 0 0 0 1.5h6.5a.75.75 0 0 0 0-1.5h-6.5Zm0 3a.75.75 0 0 0 0 1.5h6.5a.75.75 0 0 0 0-1.5h-6.5Z",clipRule:"evenodd"})))}function hn(e){var t=e.size,n=void 0===t?24:t;return React.createElement(cn,{size:n},React.createElement("svg",{stroke:"currentColor",fill:"none",strokeWidth:"0",viewBox:"0 0 24 24",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 7C13.4477 7 13 7.44772 13 8V16C13 16.5523 13.4477 17 14 17H18C18.5523 17 19 16.5523 19 16V8C19 7.44772 18.5523 7 18 7H14ZM17 9H15V15H17V9Z",fill:"currentColor"}),React.createElement("path",{d:"M6 7C5.44772 7 5 7.44772 5 8C5 8.55228 5.44772 9 6 9H10C10.5523 9 11 8.55228 11 8C11 7.44772 10.5523 7 10 7H6Z",fill:"currentColor"}),React.createElement("path",{d:"M6 11C5.44772 11 5 11.4477 5 12C5 12.5523 5.44772 13 6 13H10C10.5523 13 11 12.5523 11 12C11 11.4477 10.5523 11 10 11H6Z",fill:"currentColor"}),React.createElement("path",{d:"M5 16C5 15.4477 5.44772 15 6 15H10C10.5523 15 11 15.4477 11 16C11 16.5523 10.5523 17 10 17H6C5.44772 17 5 16.5523 5 16Z",fill:"currentColor"}),React.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 3C2.34315 3 1 4.34315 1 6V18C1 19.6569 2.34315 21 4 21H20C21.6569 21 23 19.6569 23 18V6C23 4.34315 21.6569 3 20 3H4ZM20 5H4C3.44772 5 3 5.44772 3 6V18C3 18.5523 3.44772 19 4 19H20C20.5523 19 21 18.5523 21 18V6C21 5.44772 20.5523 5 20 5Z",fill:"currentColor"})))}function wn(e){var t=e.size,n=void 0===t?24:t;return React.createElement(cn,{size:n},React.createElement("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 192 512",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M176 432c0 44.112-35.888 80-80 80s-80-35.888-80-80 35.888-80 80-80 80 35.888 80 80zM25.26 25.199l13.6 272C39.499 309.972 50.041 320 62.83 320h66.34c12.789 0 23.331-10.028 23.97-22.801l13.6-272C167.425 11.49 156.496 0 142.77 0H49.23C35.504 0 24.575 11.49 25.26 25.199z"})))}function _n(e){var t=e.size,n=void 0===t?24:t;return React.createElement(cn,{size:n},React.createElement("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 448 512",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"})))}function En(e){var t=e.size,n=void 0===t?24:t;return React.createElement(cn,{size:n},React.createElement("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 576 512",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"})))}function Sn(e){var t=e.size,n=void 0===t?16:t;return React.createElement(cn,{size:n},React.createElement("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 16 16",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M2.114 8.063V7.9c1.005-.102 1.497-.615 1.497-1.6V4.503c0-1.094.39-1.538 1.354-1.538h.273V2h-.376C3.25 2 2.49 2.759 2.49 4.352v1.524c0 1.094-.376 1.456-1.49 1.456v1.299c1.114 0 1.49.362 1.49 1.456v1.524c0 1.593.759 2.352 2.372 2.352h.376v-.964h-.273c-.964 0-1.354-.444-1.354-1.538V9.663c0-.984-.492-1.497-1.497-1.6M13.886 7.9v.163c-1.005.103-1.497.616-1.497 1.6v1.798c0 1.094-.39 1.538-1.354 1.538h-.273v.964h.376c1.613 0 2.372-.759 2.372-2.352v-1.524c0-1.094.376-1.456 1.49-1.456V7.332c-1.114 0-1.49-.362-1.49-1.456V4.352C13.51 2.759 12.75 2 11.138 2h-.376v.964h.273c.964 0 1.354.444 1.354 1.538V6.3c0 .984.492 1.497 1.497 1.6"})))}function xn(e){var t=e.size,n=void 0===t?24:t;return React.createElement(cn,{size:n},React.createElement("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 16 16",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.04 10h2.58l.65 1H2.54l-.5-.5v-9l.5-.5h12l.5.5v4.77l-1-1.75V2h-11v8zm5.54 1l-1.41 3.47h2.2L15 8.7 14.27 7h-1.63l.82-1.46L12.63 4H9.76l-.92.59-2.28 5L7.47 11h1.11zm1.18-6h2.87l-1.87 3h3.51l-5.76 5.84L10.2 10H7.47l2.29-5zM6.95 7H4.04V6H7.4l-.45 1zm-.9 2H4.04V8H6.5l-.45 1z"})))}function Rn(e){return Rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rn(e)}function kn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function On(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kn(Object(n),!0).forEach((function(t){An(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function An(e,t,n){return(t=function(e){var t=function(e){if("object"!=Rn(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Rn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Rn(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Cn=function(e){var t,n=e.icon,r=e.showColors,o=void 0!==r&&r,a=e.className,i=e.iconSize,l=void 0===i?20:i,s=e.onClick,u=void 0===s?function(){}:s,d=e.style,p=void 0===d?{}:d;switch((null===(t=n)||void 0===t?void 0:t.src)||n){case"block-default":n={src:ln.A};break;case"document":case"media-document":n={src:gn};break;case"users":n={src:un};break;case"woo":n={src:sn};break;case"debug":n={src:dn};break;case"db-query":n={src:pn};break;case"route":n={src:fn};break;case"email":n={src:mn};break;case"message":n={src:bn};break;case"error":n={src:"warning"};break;case"warning":n={src:vn};break;case"schedule":n={src:yn};break;case"info":n={src:"info"};break;case"arrow-down":n={src:"arrow-down"};break;case"website":n={src:hn};break;case"exclamation":n={src:wn};break;case"lock":n={src:_n};break;case"shop":n={src:En};break;case"braces":n={src:Sn};break;case"action":n={src:xn}}var f=c()(a,"node-icon",{"has-colors":o}),m=React.createElement(an.Icon,{icon:n&&n.src?n.src:n,size:l}),b=o?On(On({},p),{},{backgroundColor:n&&n.background,color:n&&n.foreground}):p;return React.createElement("span",{style:b,className:f,onClick:u},m)};function Tn(e){var t=e.size,n=void 0===t?24:t;return React.createElement(cn,{size:n},React.createElement("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 512 512",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M96 52v408l320-204L96 52z"})))}var Pn="future-workflow-editor/workflow",Nn="future-workflow-editor/node-edge",jn=(0,a.createContext)({isPro:!1}),Dn=function(e){var t=e.children,n=(0,s.useSelect)((function(e){return e(E).isPro()}),[]),r=(0,a.useMemo)((function(){return{isPro:n}}),[n]);return React.createElement(jn.Provider,{value:r},t)},In=function(){return function(){var e=(0,a.useContext)(jn);if(void 0===e)throw new Error("useProContext must be used within a ProFeaturesProvider");return e}().isPro},Ln=n(8678),Fn=n.n(Ln),Wn=(0,a.memo)((function(e){var t,n=e.id,r=e.data,o=e.isConnectable,i=e.selected,l=e.nodeTypeIcon,c=(0,s.useSelect)((function(e){var t=e(tn).getNodeErrors(n),r=e(tn).getSelectedElementsCount();return{nodeErrors:t,nodeHasErrors:Object.keys(t).length>0,isAdvancedSettingsEnabled:!0,isSingularElementSelected:1===r,getNodeTypeByName:e(E).getNodeTypeByName}})),u=(c.nodeErrors,c.nodeHasErrors),f=c.isAdvancedSettingsEnabled,m=c.isSingularElementSelected,b=c.getNodeTypeByName,v=(0,d.PF)(),y=In(),g=(0,s.useDispatch)(tn).removeNode,h=(0,s.useDispatch)(E).openGeneralSidebar,w=(0,a.useRef)(),_=b(r.name);_&&_.handleSchema||(_={id:Math.floor(1e6*Math.random()),type:"generic",elementaryType:"action",name:r.name,label:sprintf((0,nt.__)("Unknown node: %s","post-expirator"),r.name),description:(0,nt.__)("This is a placeholder node for a node that does not exist.","post-expirator"),baseSlug:"deletePost",initiatlAttributes:[],category:"post",disabled:!1,isDisabled:!1,frecency:1,icon:{src:"media-document",background:"#ffffff",foreground:"#1e1e1e"},version:1,settingsSchema:[],outputSchema:[{name:"input",type:"input",label:"Step input",description:"The input data for this step."}],className:"react-flow__node-unknownNode",handleSchema:{target:[{id:"input",left:"50%"}],source:[{id:"output",left:"50%",label:"Next"}]},isProFeature:!1,validationSchema:{connections:{rules:[]},settings:{rules:[]}}});var S,x,R=null==r?void 0:r.label,k=_.label||(0,nt.__)("Node","post-expirator"),O=(null===(t=_)||void 0===t?void 0:t.className)||"react-flow__node-genericNode";_.handleSchema&&_.handleSchema.target&&(x=Mn(_.handleSchema.target,r),(0,a.useEffect)((function(){if(w.current!==x.length){w.current=x.length;var e=new CustomEvent(p.so,{detail:{nodeId:n,handlesCount:x.length,handles:x,originalHandles:_.handleSchema.target,type:"target"}});document.dispatchEvent(e),v(n)}}),[x,v]),S=x.map((function(e,t){var n=Un(t,x.length);return React.createElement(d.h7,{key:e.id+"_target",type:"target",position:d.yX.Top,id:e.id,style:{left:"".concat(n)},isConnectable:o,className:"handle-target-"+e.id})})));var A=null,C=null;_.handleSchema&&_.handleSchema.source&&(x=Mn(_.handleSchema.source,r),(0,a.useEffect)((function(){if(w.current!==x.length){w.current=x.length;var e=new CustomEvent(p.so,{detail:{nodeId:n,handlesCount:x.length,handles:x,originalHandles:_.handleSchema.source,type:"source"}});document.dispatchEvent(e),v(n)}}),[x,v]),A=x.map((function(e,t){var n=Un(t,x.length);return React.createElement(d.h7,{key:e.id+"_source",type:"source",position:d.yX.Bottom,id:e.id,style:{left:"".concat(n)},isConnectable:o,className:"handle-source-"+e.id})})),C=x.map((function(e){return React.createElement("div",{key:e.id+"handleArea",className:"react-flow__node-handle-name handle-area-source-"+e.id},e.label)})));var T=(0,nt.__)("Step","post-expirator");"action"===r.elementaryType?T=(0,nt.__)("Action","post-expirator"):"advanced"===r.elementaryType?T=(0,nt.__)("Advanced","post-expirator"):"trigger"===r.elementaryType&&(T=(0,nt.__)("Trigger","post-expirator"));var P=[];l||(l=React.createElement(Tn,{size:8}));var N=(0,a.useRef)(null);return(0,a.useEffect)((function(){i&&m&&setTimeout((function(){jQuery(N.current.parentNode).focus()}),100)}),[i,m]),React.createElement(React.Fragment,null,i&&m&&React.createElement(React.Fragment,null,React.createElement(an.Popover,{placement:"top-start",offset:14},React.createElement(an.Toolbar,{label:(0,nt.__)("Step actions","post-expirator"),className:"components-accessible-toolbar block-editor-block-contextual-toolbar react-flow__node-toolbar"},React.createElement(an.ToolbarGroup,null,React.createElement(an.ToolbarButton,{icon:"trash",label:(0,nt.__)("Delete","post-expirator"),onClick:function(){g(n)},accessibleWhenDisabled:!0}))))),React.createElement("div",{className:"react-flow__node-body "+O,onDoubleClick:function(){m&&h(Nn)},ref:N},S,React.createElement("div",{className:"react-flow__node-top"},l,T,": ",React.createElement("span",{className:"node-slug"},r.slug)),React.createElement("div",{className:R?"react-flow__node-inner-body with-description":"react-flow__node-inner-body"},(u||_.isProFeature&&!y)&&React.createElement("div",{className:"react-flow__node-marker-wrapper"},_.isProFeature&&!y&&React.createElement("div",{className:"react-flow__node-pro-badge",title:(0,nt.__)("Currently this step is being skipped. Upgrade to Pro to unlock this feature.","post-expirator")},React.createElement(Cn,{icon:"lock",iconSize:8})),u&&React.createElement("div",{className:"react-flow__node-error",title:(0,nt.__)("This node has errors","post-expirator")},React.createElement(Cn,{icon:"exclamation",iconSize:8}))),React.createElement("div",{className:"react-flow__node-header"},React.createElement(Cn,{icon:_.icon.src,iconSize:14}),React.createElement("div",{className:"react-flow__node-label"},k)),R&&React.createElement("div",{className:"react-flow__node-description"},R),f&&P.length>0&&React.createElement("div",{className:"react-flow__node-content"},React.createElement("table",null,React.createElement("tbody",null,P.map((function(e){return React.createElement("tr",{key:"attribute_"+e.id},React.createElement("th",null,e.label),React.createElement("td",null,e.value))})))))),React.createElement("div",{className:"react-flow__node-handle-area"},C),A))}));const Vn=Wn;function Mn(e,t){return e.filter((function(e){return!e.conditions||Fn().apply(e.conditions,t.settings)}))}function Un(e,t){var n=function(e){return 100/e/2}(t);return"".concat(n+100/t*e,"%")}var zn=n(3018);function Bn(e){var t=e.size,n=void 0===t?24:t;return React.createElement(cn,{size:n},React.createElement("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 24 24",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},React.createElement("polygon",{fill:"none",strokeWidth:"2",points:"4 14 10 14 7 23 9 23 20 9 14 9 18 1 7 1"})))}function Hn(){return Hn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hn.apply(null,arguments)}var Gn=(0,a.memo)((function(e){var t=React.createElement(Bn,{size:8});return React.createElement(Vn,Hn({},e,{nodeTypeIcon:t}))}));const qn=Gn;var $n=n(9517),Kn=n.n($n),Qn=n(6084),Yn=n.n(Qn),Jn=n(6321);function Xn(e){return Xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xn(e)}function Zn(e){var t=e.trim();return t.startsWith("{{")&&t.endsWith("}}")}const er=function(e){!function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e);var t=(0,s.useSelect)((function(e){return{nodes:e(tn).getNodes(),edges:e(tn).getEdges(),getNodeTypeByName:e(E).getNodeTypeByName,globalVariables:e(tn).getGlobalVariables()}})),n=t.nodes,r=t.edges,o=t.getNodeTypeByName,i=t.globalVariables,l=(0,s.useDispatch)(tn),c=l.addNodeError,u=l.resetNodeErrors,p=(0,a.useMemo)((function(){return n.map((function(e){return e.data.slug}))}),[n]),f=(0,a.useCallback)((function(e,t,n){var r,o,a={isValid:!0,error:null};if(null!==(r=t)&&void 0!==r&&r.rule&&null!==(o=t)&&void 0!==o&&o.dataType)return a;if("object"!==Xn(t)&&(t=[t]),null!=n&&n.skipIfEmpty){if(""===t)return a;if(Array.isArray(t)&&0===t.length)return a;if("object"===Xn(t)&&0===Object.keys(t).length)return a}var l=q(e,i);null!=n&&n.dataType&&(Array.isArray(n.dataType)||(n.dataType=[n.dataType]),l=J(l,n.dataType));for(var c,s=!0,u="",d=function(){var e=t[p].trim();if(!e.startsWith("{{"))return 0;if(!e.endsWith("}}"))return u=e,s=!1,1;var n=!1;return l.forEach((function(t){t.id===e&&(n=!0)})),n?void 0:(s=!1,u=e,1)},p=0;p<t.length&&(0===(c=d())||1!==c);p++);return s?a:{isValid:!1,error:(0,nt.sprintf)((0,nt.__)('The field "%s" contains an invalid variable.',"post-expirator"),null==n?void 0:n.fieldLabel),details:(0,nt.sprintf)((0,nt.__)('The variable "%s" is not available in the current context. Please, check if it is spelled correctly.',"post-expirator"),u)}}),[i,q,J,o]),m=(0,a.useCallback)((function(e,t){var n=!1,r="",o={isValid:!0,error:null};if(null==e||!e.includes("{{"))return o;if("{{input}}"===e)return o;var a=e.match(/{{[^}]+}}/g);a&&a.forEach((function(e){var a,i=(e=(e=(e=(e=e.replace("{{","").replace("}}","")).trim()).split(" ")).length>1?e[1]:e[0]).split(".")[0];return"global"===i||null!=t&&null!==(a=t.allowedVariables)&&void 0!==a&&a.includes(i)?o:void(p.includes(i)||(n=!0,r=(0,nt.sprintf)((0,nt.__)('"%s" is not a variable or step slug.',"post-expirator"),i)))})),e.includes("{{}}")&&(n=!0,r=(0,nt.__)("Empty placeholder is not allowed.","post-expirator"));var i=function(e){return(e.match(/{{/g)||[]).length},l=function(e){return(e.match(/}}/g)||[]).length};return i(e)>l(e)&&(n=!0,r=(0,nt.__)("Unclosed placeholder are not allowed.","post-expirator")),i(e)<l(e)&&(n=!0,r=(0,nt.__)("Unopened placeholder are not allowed.","post-expirator")),n?{isValid:!1,error:(0,nt.sprintf)((0,nt.__)("Invalid expression on %s","post-expirator"),null==t?void 0:t.fieldLabel),details:r}:o}),[p]),b=(0,a.useCallback)((function(e,t,n){e.forEach((function(e){var t,n,r,a,i=o(null===(t=e.data)||void 0===t?void 0:t.name),l=(null===(n=e.data)||void 0===n?void 0:n.settings)||{},p=null==i?void 0:i.settingsSchema,b=null==i?void 0:i.validationSchema;u(e.id),b&&(null!=b&&null!==(r=b.connections)&&void 0!==r&&r.rules&&b.connections.rules.forEach((function(t){switch(t.rule){case"hasIncomingConnection":(function(e){var t=V(e);return(null==t?void 0:t.length)>0})(e)||c(e.id,"no-incomers",(0,nt.__)("This step requires a connection from a previous step.","post-expirator"));break;case"hasOutgoingConnection":(function(e){var t=function(e){var t=(0,s.select)(tn).getNodes(),n=(0,s.select)(tn).getEdges();return e?(0,d.RM)(e,t,n):[]}(e);return(null==t?void 0:t.length)>0})(e)||c(e.id,"no-outgoers",(0,nt.__)("This step requires a connection to a following step.","post-expirator"));break;case"hasIncomerOfName":var n=M(e),r=!1;if(0===n.length)r=!0;else{var o=!1;n.forEach((function(e){var n;(null===(n=e.data)||void 0===n?void 0:n.name)===t.name&&(o=!0)})),r=!o}r&&c(e.id,"parent-name",t.message)}})),null!=b&&null!==(a=b.settings)&&void 0!==a&&a.rules&&b.settings.rules.forEach((function(t){for(var n,r,o=t.rule,a=(null==t?void 0:t.field)||"",i=(null==a?void 0:a.split("."))||[],s=(null==t?void 0:t.label)||(null===(n=p.find((function(e){return null==e?void 0:e.fields.find((function(e){return e.name===i[0]}))})))||void 0===n?void 0:n.label),u=l,d=0;d<i.length;d++){var b;u=null===(b=u)||void 0===b?void 0:b[i[d]]}switch(o){case"required":if(null!=t&&t.condition){for(var v=t.condition.field,y=t.condition.value,g=l,h=0;h<v.split(".").length;h++){var w;g=null===(w=g)||void 0===w?void 0:w[v.split(".")[h]]}g!=y||u&&""!=u||c(e.id,"".concat(a,"-required-if"),(0,nt.sprintf)((0,nt.__)("The field %s is required.","post-expirator"),s))}else if(""===(r=u)||null==r||Array.isArray(r)&&0===r.length||"object"===Xn(r)&&r.rule){c(e.id,"".concat(a,"-required"),(0,nt.sprintf)((0,nt.__)("The field %s is required.","post-expirator"),s));break}break;case"dataType":var _=t.type;if(null==u||""===u)return;if("email"===_)Kn()(u)||c(e.id,"".concat(a,"-email"),(0,nt.sprintf)((0,nt.__)("The field %s must be a valid email address.","post-expirator"),s));else if("emailList"===_){for(var E,S=u.split(","),x=0;x<S.length;x++)if(E=S[x].trim(),!Kn()(E)&&!Zn(E)){c(e.id,"".concat(a,"-emailList"),(0,nt.sprintf)((0,nt.__)("The field %s must be a valid email address list separated by commas.","post-expirator"),s));break}}else if("integer"===_)Yn()(u)||c(e.id,"".concat(a,"-integer"),(0,nt.sprintf)((0,nt.__)("The field %s must be an integer.","post-expirator"),s));else if("integerList"===_){for(var R,k=0;k<u.length;k++)if(R=u[k].trim(),!Yn()(R)){c(e.id,"".concat(a,"-integerList"),(0,nt.sprintf)((0,nt.__)("The field %s must be an integer list separated by commas.","post-expirator"),s));break}}else if("nameValuePairList"===_){if(!u)return;var O=t.field;if(!u[O])return;Array.isArray(u[O])||c(e.id,"".concat(a,"-nameValuePairList"),(0,nt.sprintf)((0,nt.__)("The field %s must be a list of name-value pairs.","post-expirator"),s)),u[O].forEach((function(t,n){""===(null==t?void 0:t.name)&&c(e.id,"".concat(a,"-nameValuePairList"),(0,nt.sprintf)((0,nt.__)("The field %s must be a list of name-value pairs.","post-expirator"),s),(0,nt.sprintf)((0,nt.__)("The name of the pair is required on item %d.","post-expirator"),n+1)),""===(null==t?void 0:t.value)&&c(e.id,"".concat(a,"-nameValuePairList"),(0,nt.sprintf)((0,nt.__)("The field %s must be a list of name-value pairs.","post-expirator"),s),(0,nt.sprintf)((0,nt.__)("The value of the pair is required on item %d.","post-expirator"),n+1))}))}break;case"validVariable":var A=f(e,u,t);A.isValid||c(e.id,"".concat(a,"-validVariable"),A.error,A.details);break;case"validExpression":var C=m(u,t);C.isValid||c(e.id,"".concat(a,"-validExpression"),C.error,C.details)}})))}))}),[o,c,u,m]),v=(0,Jn.A)((function(e,t,n){b(e,t,n)}),250);(0,a.useEffect)((function(){return v(n,r,p),function(){v.cancel()}}),[n,r,p,v])};function tr(e){return tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tr(e)}function nr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nr(Object(n),!0).forEach((function(t){or(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function or(e,t,n){return(t=function(e){var t=function(e){if("object"!=tr(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=tr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==tr(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ar(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const ir=function(e){var t,n,r=e.id,o=e.sourceX,a=e.sourceY,i=e.targetX,l=e.targetY,c=e.sourcePosition,u=e.targetPosition,p=e.style,f=void 0===p?{}:p,m=e.selected,b=e.markerEnd,v=(0,s.useSelect)((function(e){return{isSingularElementSelected:1===e(tn).getSelectedElementsCount()}})).isSingularElementSelected,y=(0,s.useDispatch)(tn).removeEdge,g=(t=(0,d.Fp)({sourceX:o,sourceY:a,sourcePosition:c,targetX:i,targetY:l,targetPosition:u}),n=3,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return ar(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ar(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),h=g[0],w=g[1],_=g[2],E=rr(rr({},f),{},{strokeWidth:2});return React.createElement(React.Fragment,null,React.createElement(d.tE,{path:h,markerEnd:b,style:E,animated:!1}),m&&v&&React.createElement(d.rV,null,React.createElement("div",{style:{position:"absolute",transform:"translate(-50%, -50%) translate(".concat(w,"px,").concat(_,"px)"),fontSize:12,pointerEvents:"all"},className:"nodrag nopan react-flow__edge-toolbar-anchor"},React.createElement(an.Popover,{position:"top"},React.createElement(an.Toolbar,{className:"components-accessible-toolbar block-editor-block-contextual-toolbar react-flow__edge-toolbar"},React.createElement(an.ToolbarGroup,null,React.createElement(an.ToolbarButton,{icon:"trash",title:(0,nt.__)("Delete","web-stories"),onClick:function(){y(r)}})))))))};var lr=n(5378),cr=n.n(lr),sr=n(9870),ur=n.n(sr),dr=n(2013),pr=n.n(dr),fr=n(2877),mr=n.n(fr),br=n(4944),vr=n(542),yr=n(9223);function gr(){return gr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gr.apply(null,arguments)}function hr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const wr=(0,a.forwardRef)((function(e,t){var n,r,o=(n=(0,a.useState)(!1),r=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(n,r)||function(e,t){if(e){if("string"==typeof e)return hr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hr(e,t):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],l=o[1];return(0,a.useEffect)((function(){i&&(0,yr.L)((0,nt.__)("Use left and right arrow keys to move through steps","post-expirator"))}),[i]),React.createElement("div",gr({ref:t,role:"listbox","aria-orientation":"horizontal",onFocus:function(){l(!0)},onBlur:function(e){!e.currentTarget.contains(e.relatedTarget)&&l(!1)}},e))}));function _r(){return _r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_r.apply(null,arguments)}const Er=(0,a.forwardRef)((function(e,t){return React.createElement(an.Composite.Group,_r({role:"presentation",ref:t},e))}));function Sr(e){return Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sr(e)}var xr=["isFirst","as","children"];function Rr(){return Rr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rr.apply(null,arguments)}function kr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Or(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kr(Object(n),!0).forEach((function(t){Ar(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ar(e,t,n){return(t=function(e){var t=function(e){if("object"!=Sr(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Sr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Sr(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Cr=(0,a.forwardRef)((function(e,t){var n=e.isFirst,r=e.as,o=e.children,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,xr);return React.createElement(an.Composite.Item,Rr({ref:t,role:"option",accessibleWhenDisabled:!0},a,{render:function(e){var t=Or(Or({},e),{},{tabIndex:n?0:e.tabIndex});return r?React.createElement(r,t,o):"function"==typeof o?o(t):React.createElement(an.Button,Rr({__next40pxDefaultSize:!0},t),o)}}))})),Tr=function(e){var t=e.children;return React.createElement(an.Composite,{focusShift:!0,focusWrap:"horizontal",render:React.createElement(React.Fragment,null)},t)};function Pr(e){var t=e.node,n=e.icon;return React.createElement("div",{className:"block-editor-block-draggable-chip-wrapper"},React.createElement("div",{className:"block-editor-block-draggable-chip"},React.createElement(an.Flex,{justify:"center",className:"block-editor-block-draggable-chip__content"},React.createElement(an.FlexItem,null,n?React.createElement(Cn,{icon:n}):(0,nt.sprintf)((0,nt._n)("%d block","%d blocks",count,"post-expirator"),count)),React.createElement(an.FlexItem,null,t.label))))}const Nr=function(e){var t=e.isEnabled,n=e.node,r=e.icon,o=e.children,a={type:"node",node:n};return React.createElement(an.Draggable,{__experimentalTransferDataType:"node",transferData:a,__experimentalDragComponent:React.createElement(Pr,{node:n,icon:r})},(function(e){var n=e.onDraggableStart,r=e.onDraggableEnd;return o({draggable:t,onDragStart:t?n:void 0,onDragEnd:t?r:void 0})}))};var jr=["className","isFirst","item","onSelect","onHover","isDraggable"];function Dr(){return Dr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dr.apply(null,arguments)}const Ir=(0,a.memo)((function(e){var t=e.className,n=e.isFirst,r=e.item,o=e.onSelect,i=e.onHover,l=e.isDraggable,s=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,jr),u=(0,a.useRef)(!1),d=r.icon?{backgroundColor:r.icon.background,color:r.icon.foreground}:{},f=(0,a.useMemo)((function(){return r}),[r.id,r.label,r.icon,r.disabled]),m=In(),b=c()("block-editor-block-types-list__list-item",r.isProFeature&&!m?"is-pro-feature":"");return React.createElement(Nr,{isEnabled:l&&!r.disabled,node:f,icon:r.icon},(function(e){var a=e.draggable,l=e.onDragStart,f=e.onDragEnd;return React.createElement("div",{className:b,draggable:a,onDragStart:function(e){u.current=!0,e.dataTransfer.setData(p.Qc,JSON.stringify(r)),l&&(i(null),l(e))},onDragEnd:function(e){u.current=!1,f&&f(e)}},React.createElement(Cr,Dr({isFirst:n,className:c()("block-editor-block-types-list__item",t),disabled:r.isDisabled,onClick:function(e){e.preventDefault(),o(r,W()?e.metaKey:e.ctrlKey),i(null)},onKeyDown:function(e){e.keyCode===vr.Fm&&(e.preventDefault(),o(r,W()?e.metaKey:e.ctrlKey),i(null))},onFocus:function(){u.current||i(r)},onMouseEnter:function(){u.current||i(r)},onMouseLeave:function(){return i(null)},onBlur:function(){return i(null)}},s),React.createElement("span",{className:"block-editor-block-types-list__item-icon",style:d},React.createElement(Cn,{icon:r.icon,showColors:!0})),r.isProFeature&&!m&&React.createElement("span",{className:"block-editor-block-types-list__item-pro-badge"},"Pro"),React.createElement("span",{className:"block-editor-block-types-list__item-title"},r.label)))}))})),Lr=function(e){var t=e.items,n=void 0===t?[]:t,r=e.onSelect,o=e.onHover,a=void 0===o?function(){}:o,i=e.children,l=e.label,c=e.isDraggable,s=void 0===c||c;return React.createElement(wr,{className:"block-editor-block-types-list","aria-label":l},function(e){for(var t=[],n=0,r=e.length;n<r;n+=3)t.push(e.slice(n,n+3));return t}(n).map((function(e,t){return React.createElement(Er,{key:t},e.map((function(e,n){return React.createElement(Ir,{key:e.id+t+n,item:e,className:(o=e.id,i="editor-block-list-item-"+o.replace(/\//,"-").replace(/^core-/,""),(0,f.applyFilters)("future-pro.getNodeMenuDefaultClassName",i,o)),onSelect:r,onHover:a,isDraggable:s,isFirst:0===t&&0===n});var o,i})))})),i)},Fr=function(e){var t=e.title,n=(e.icon,e.children);return React.createElement(React.Fragment,null,React.createElement("div",{className:"block-editor-inserter__panel-header"},React.createElement("h2",{className:"block-editor-inserter__panel-title"},t)),React.createElement("div",{className:"block-editor-inserter__panel-content"},n))};var Wr=function(e){var t=e.items,n=e.categories,r=e.onSelect,o=e.onHover,i=e.showMostUsedNodes,l=(0,a.useMemo)((function(){return mr()(t,["frecency"],["desc"]).slice(0,6)}),[t]),c=(0,a.useMemo)((function(){return ur()((function(e){return e.filter((function(e){return e.category&&"reusable"!==e.category}))}),(function(e){return pr()(e,"category")}))(t)}),[t]);(0,a.useEffect)((function(){return function(){return o?o(null):null}}),[]);var s=function(e){r&&r(e)},u=(0,br.A)(n);return React.createElement(Tr,null,React.createElement("div",null,i&&l.length>0&&React.createElement(Fr,{title:(0,nt._x)("Most used","nodes","post-expirator")},React.createElement(Lr,{items:l,onSelect:s,onHover:o,label:(0,nt._x)("Most used","nodes","post-expirator")})),cr()(u,(function(e){var t=c[e.name];return t&&t.length?React.createElement(Fr,{key:e.name,title:e.label,icon:e.icon},React.createElement(Lr,{items:t,onSelect:s,onHover:o,label:e.label})):null}))))},Vr=n(2193),Mr=n.n(Vr),Ur=n(828),zr=n.n(Ur),Br=n(4889),Hr=n.n(Br),Gr=n(7309),qr=n.n(Gr),$r=n(6645),Kr=n.n($r);function Qr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||Yr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yr(e,t){if(e){if("string"==typeof e)return Jr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jr(e,t):void 0}}function Jr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Xr=function(e){return e.name||""},Zr=function(e){return e.label},eo=function(e){return e.description||""},to=function(e){return e.keywords||[]},no=function(e){return e.category};function ro(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(e=(e=zr()(e)).replace(/^\//,"")).toLowerCase()}var oo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Kr()(ro(e))};function ao(e,t){var n,r,o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=a.getName,l=void 0===i?Xr:i,c=a.getTitle,s=void 0===c?Zr:c,u=a.getDescription,d=void 0===u?eo:u,p=a.getKeywords,f=void 0===p?to:p,m=a.getCategory,b=void 0===m?no:m,v=l(e),y=s(e),g=d(e),h=f(e),w=b(e),_=ro(t),E=ro(y),S=0;if(_===E)S+=30;else if(E.startsWith(_))S+=20;else{var x=[v,y,g].concat((o=h,function(e){if(Array.isArray(e))return Jr(e)}(o)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(o)||Yr(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[w]).join(" ");0===(n=Kr()(_),r=x,Hr()(n,oo(r),(function(e,t){return t.includes(e)}))).length&&(S+=10)}return 0!==S&&v.startsWith("core/")&&S++,S}var io=n(7677);function lo(){return React.createElement("div",{className:"block-editor-inserter__no-results"},React.createElement(io.A,{className:"block-editor-inserter__no-results-icon",icon:ln.A}),React.createElement("p",null,(0,nt.__)("No results found.","post-expirator")))}function co(e){return function(e){if(Array.isArray(e))return so(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return so(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?so(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function so(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const uo=function(e){var t=e.filterValue,n=e.onSelect,r=e.onHover,o=e.maxNodeTypes,i=e.isDraggable,l=void 0===i||i,c=e.filterTypes,u=(0,Jn.A)(yr.L,500),d=(0,s.useSelect)((function(e){var t,n=e(E).getActionNodes(),r=e(E).getActionCategories(),o=e(E).getTriggerNodes(),a=e(E).getTriggerCategories(),i=e(E).getAdvancedNodes(),l=e(E).getAdvancedCategories();return t=c&&c.length?[].concat(co(n.filter((function(e){return c.includes(e.elementaryType)}))),co(o.filter((function(e){return c.includes(e.elementaryType)}))),co(i.filter((function(e){return c.includes(e.elementaryType)})))):[].concat(co(o),co(n),co(i)),{nodeTypes:t,nodeTypeCategories:[].concat(co(r),co(a),co(l))}})),p=d.nodeTypes,f=d.nodeTypeCategories,m=(0,a.useMemo)((function(){var e,n,r,a=(e=mr()(p,["frecency"],["desc"]),n=f,0===oo(r=t).length?e:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(0===oo(t).length)return e;var r=e.map((function(e){return[e,ao(e,t,n)]})).filter((function(e){return Qr(e,2)[1]>0}));return r.sort((function(e,t){var n=Qr(e,2)[1];return Qr(t,2)[1]-n})),r.map((function(e){return Qr(e,1)[0]}))}(e,r,{getCategory:function(e){var t;return null===(t=qr()(n,{name:e.category}))||void 0===t?void 0:t.label},getName:function(e){return e.name},getTitle:function(e){return e.label},getDescription:function(e){return e.description},getKeywords:function(e){return e.keywords||[]}}));return void 0!==o?a.slice(0,o):a}),[t,p,f,o]);(0,a.useEffect)((function(){if(t){var e=m.length,n=(0,nt.sprintf)((0,nt._n)("%d result found.","%d results found.",e,"post-expirator"),e);u(n)}}),[t,u,m]);var b=!Mr()(m);return React.createElement(Tr,null,!b&&React.createElement(lo,null),!!b&&React.createElement(Fr,{title:React.createElement(an.VisuallyHidden,null,(0,nt.__)("Nodes","post-expirator"))},React.createElement(Lr,{items:m,onSelect:n,onHover:r,label:(0,nt.__)("Nodes","post-expirator"),isDraggable:l})))};function po(e){var t=e.size,n=void 0===t?24:t;return React.createElement(cn,{size:n},React.createElement("svg",{stroke:"currentColor",fill:"none",strokeWidth:"2",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},React.createElement("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),React.createElement("line",{x1:"5",y1:"12",x2:"19",y2:"12"})))}function fo(e){return function(e){if(Array.isArray(e))return vo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||bo(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||bo(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bo(e,t){if(e){if("string"==typeof e)return vo(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vo(e,t):void 0}}function vo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var yo=(0,a.memo)((function(e){var t=e.id,n=e.label,r=e.popoverIsOpen,o=void 0!==r&&r,i=e.searchLabel,l=e.elementaryTypes,c=n||"",u=(0,a.useRef)(null),f=(0,a.useRef)(null),m=(0,d.VH)(),b=mo((0,a.useState)(o),2),v=b[0],y=b[1],g=mo((0,a.useState)(""),2),h=g[0],w=g[1],_=(0,s.useSelect)((function(e){var t=e(E).getTriggerNodes(),n=e(E).getActionNodes(),r=e(E).getAdvancedNodes(),o=[];return l?(l.includes(p.b1)&&(o=o.concat(t)),l.includes(p.Fc)&&(o=o.concat(n)),l.includes(p.Pb)&&(o=o.concat(r))):o=[].concat(fo(t),fo(n),fo(r)),{nodes:e(tn).getNodes(),edges:e(tn).getEdges(),items:o,categories:e(E).getTriggerCategories(),isSidebarInserterOpen:e(E).isFeatureActive(p.is),draggingFromHandle:e(tn).getDraggingFromHandle(),getNodeTypeByName:e(E).getNodeTypeByName}})),S=_.nodes,x=_.edges,R=_.items,k=(_.categories,_.isSidebarInserterOpen,_.draggingFromHandle),O=_.getNodeTypeByName,A=(0,s.useDispatch)(tn),C=A.setEdges,T=A.setDraggingFromHandle,P=A.removePlaceholderNodes,N=(0,s.useDispatch)(E).enableFeature,j=function(e){var t=te(u.current,S),n=Z({item:e,position:{x:t.position.x,y:t.position.y},reactFlowInstance:m});if(null!=k&&k.sourceId){var r,o,a=O(n.data.name);k.handleType===p.mG?(r=a.handleSchema.target[0].id,o={source:k.sourceId,sourceHandle:k.handleId,target:n.id,targetHandle:r,type:"genericEdge",id:"".concat(k.sourceId,"-").concat(k.handleId,"-").concat(n.id,"-").concat(r),markerEnd:{type:d.TG.ArrowClosed}}):(r=a.handleSchema.source[0].id,o={source:n.id,sourceHandle:r,target:k.sourceId,targetHandle:k.handleId,type:"genericEdge",id:"".concat(n.id,"-").concat(r,"-").concat(k.sourceId,"-").concat(k.handleId),markerEnd:{type:d.TG.ArrowClosed}}),C((0,d.rN)(o,x)),T({sourceId:null,sourceHandle:null,handleType:null})}};return(0,a.useEffect)((function(){u.current||(u.current=t),window.addEventListener("keydown",(function(e){"Escape"!==e.key&&27!==e.keyCode||(y(!1),P())}))}),[]),i||(i=(0,nt.__)("Search for steps","post-expirator")),(0,a.useEffect)((function(){var e;v?null===(e=f.current)||void 0===e||e.focus():o&&P()}),[v]),React.createElement(React.Fragment,null,v&&React.createElement(an.Popover,{placement:"bottom-start",offset:14,className:"react-flow__node-inserter-popover"},React.createElement("div",{className:"react-flow__node-inserter-popover-content"},React.createElement(an.SearchControl,{ref:f,className:"block-editor-inserter__search",onChange:function(e){w(e)},value:h,label:(0,nt.__)("Search for triggers and steps","post-expirator"),placeholder:(0,nt.__)("Search")}),!!h&&React.createElement(uo,{filterValue:h,onSelect:j,filterTypes:l}),!h&&React.createElement("div",{className:"block-editor-inserter__block-list"},React.createElement(Wr,{type:p.Dh,onSelect:j,items:R,showMostUsedNodes:!0,categories:[]}))),React.createElement(an.Button,{onClick:function(){N(p.is),P()},className:"react-flow__node-inserter-popover-close"},(0,nt.__)("Browse all"))),React.createElement("div",{className:"react-flow__node-body react-flow__node-triggerPlaceholderNode",onClick:function(e){e.stopPropagation(),y(!0)}},React.createElement("div",{className:"react-flow__node-inner-body"},React.createElement("div",{className:"react-flow__node-header"},React.createElement("div",{className:"icon"},React.createElement(po,{size:12})),React.createElement("div",{className:"react-flow__node-label"},c)))))}));const go=yo;function ho(){return ho=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ho.apply(null,arguments)}var wo=(0,a.memo)((function(e){return React.createElement(go,ho({},e,{label:(0,nt.__)("Click to add a trigger","post-expirator"),popoverIsOpen:!1,searchLabel:(0,nt.__)("Search for triggers and steps","post-expirator"),elementaryTypes:[p.b1]}))}));function _o(){return _o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_o.apply(null,arguments)}const Eo=(0,a.memo)((function(e){var t=(0,s.useSelect)((function(e){return{draggingFromHandle:e(tn).getDraggingFromHandle()}})).draggingFromHandle.handleType===p.mG?[p.Fc,p.Pb]:[p.b1,p.Fc,p.Pb];return React.createElement(yo,_o({},e,{label:(0,nt.__)("Add a step","post-expirator"),popoverIsOpen:!0,searchLabel:(0,nt.__)("Search for actions","post-expirator"),elementaryTypes:t}))})),So=function(e){var t=e.onLayout;return(0,a.useEffect)((function(){var e=function(e){var n,r=(null===(n=e.detail)||void 0===n?void 0:n.direction)||zn.rx;t({direction:r})};return document.addEventListener(zn.Ml,e),function(){document.removeEventListener(zn.Ml,e)}}),[t]),null};function xo(e){return xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xo(e)}function Ro(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ko(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ro(Object(n),!0).forEach((function(t){Oo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ro(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Oo(e,t,n){return(t=function(e){var t=function(e){if("object"!=xo(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=xo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==xo(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ao=function(e){var t=(0,s.useSelect)((function(e){var t=e("core/interface").getActiveComplementaryArea(p.eJ);return{nodes:e(tn).getNodes(),edges:e(tn).getEdges(),selectedNodes:e(tn).getSelectedNodes(),selectedEdges:e(tn).getSelectedEdges(),activeComplementaryArea:t,hasActiveSideBar:null!==t&&"null/undefined"!==t,initialViewport:e(tn).getInitialViewport(),isMiniMapFeatureActive:e(E).isFeatureActive(p.s$),isControlsFeatureActive:e(E).isFeatureActive(p.kD),isLoadingWorkflow:e(tn).isLoadingWorkflow(),isConnectingNodes:e(tn).isConnectingNodes(),getNodeTypeByName:e(E).getNodeTypeByName,globalVariables:e(tn).getGlobalVariables()}})),r=t.nodes,o=t.edges,i=t.selectedNodes,l=t.selectedEdges,c=t.hasActiveSideBar,u=t.activeComplementaryArea,f=t.initialViewport,m=t.isMiniMapFeatureActive,b=t.isControlsFeatureActive,v=t.isLoadingWorkflow,y=t.isConnectingNodes,g=t.getNodeTypeByName,h=t.globalVariables,w=(0,s.useDispatch)(tn),_=w.setNodes,S=w.setEdges,x=w.addNode,R=w.setSelectedNodes,k=w.setSelectedEdges,O=w.removeEdge,A=w.setEditedWorkflowAttribute,C=w.removePlaceholderNodes,T=w.setDraggingFromHandle,P=w.setIsConnectingNodes,N=w.unselectAll,j=(0,s.useDispatch)(E).openGeneralSidebar,D=(0,s.useDispatch)("core/notices").createSuccessNotice,I=(0,a.useRef)(null),L=(0,d.VH)(),F=(0,d.VH)().setViewport,W=(0,a.useRef)(null),V=(0,a.useMemo)((function(){return{generic:Vn,trigger:qn,triggerPlaceholder:wo,nodePlaceholder:Eo}}),[]),M=(0,a.useMemo)((function(){return{genericEdge:ir}}),[]),U=(0,a.useCallback)((function(e){var t=e.detail,n=t.nodeId,r=t.handles.map((function(e){return e.id}));(0,s.select)(tn).getEdges().filter((function(e){return e.source===n&&!r.includes(e.sourceHandle)})).forEach((function(e){O(e.id),R([n])}))}),[]);(0,a.useEffect)((function(){return document.addEventListener(p.so,U),function(){document.removeEventListener(p.so,U)}}),[]);var z=(0,a.useCallback)((function(){setTimeout((function(){A("flow",L.toObject())}),400)}),[L]);(0,d.bk)({onEnd:function(){z()}}),(0,a.useEffect)((function(){f&&F(f)}),[f]);var B=(0,a.useCallback)((function(e){_((0,d._0)(e,r)),e.forEach((function(e){var t=te(e.id,r);t&&re(t)})),z()}),[r]),H=(0,a.useCallback)((function(e){S((0,d.zW)(e,o)),z()}),[o]),G=(0,a.useCallback)((function(e,t){S((0,d.Hp)(e,t,o)),z()}),[o]),$=(0,a.useCallback)((function(e){e.source!==e.target&&(e=ko(ko({},e),{},{type:"genericEdge",id:"".concat(e.source,"-").concat(e.sourceHandle,"-").concat(e.target,"-").concat(e.targetHandle),markerEnd:{type:d.TG.ArrowClosed}}),S((0,d.rN)(e,o)),re(e.target),z())}),[o,r,re,z,S,d.rN]),K=(0,a.useCallback)((function(e,t){var n=t.nodeId,r=t.handleId,o=t.handleType;W.current=n,T({sourceId:n,handleId:r,handleType:o})}),[]),Q=(0,a.useCallback)((function(e){if(e.stopPropagation(),W.current){if(e.target.classList.contains("react-flow__pane")&&!y){var t=e.target.offsetWidth,n=L.screenToFlowPosition({x:t/2,y:0}),r=L.screenToFlowPosition({x:e.clientX-n.x,y:e.clientY}),o={id:X(),type:"nodePlaceholder",data:{name:"core/node-placeholder",elementaryType:p._o},position:r};x(o),re(o)}P(!1)}}),[L.screenToFlowPosition,y,x]),Y=(0,a.useCallback)((function(e){return P(!0),!0}),[]),ee=(0,a.useCallback)((function(e){e.preventDefault(),e.dataTransfer.dropEffect="move"}),[]),ne=(0,a.useCallback)((function(e){e.preventDefault();var t=L.screenToFlowPosition({x:e.clientX,y:e.clientY}),n=e.dataTransfer.getData(p.Qc),r=JSON.parse(n);Z({item:r,position:t,reactFlowInstance:L}),re(r),C()}),[L,r]),re=(0,a.useCallback)((function(e){if(("string"!=typeof e||(e=te(e,r)))&&e.data){var t=g(e.data.name);if(t){var n=t.settingsSchema;if(n){var o=q(e,h);n.forEach((function(t){null==t||t.fields.forEach((function(t){t.default&&"object"===xo(t.default)&&Object.keys(t.default).forEach((function(n){var r=t.default[n];if(r.rule&&"first"===r.rule){Array.isArray(r.dataType)||(r.dataType=[r.dataType]);var a=J(o,r.dataType);if(0===a.length)return;e.data.settings[t.name][n]=a[0].id}}))}))}))}}}}),[r,g,h]),oe=(0,a.useCallback)((function(){N(),z()})),ae=(0,a.useCallback)((function(){N(),z()})),ie=(0,a.useCallback)((function(){L.fitView()}),[L]);(0,d.p4)({onChange:function(e){var t=e.nodes,n=e.edges;if(t.length>0&&"triggerPlaceholder"===t[0].type)return R([]),void k([]);R(t.map((function(e){return e.id}))),k(n.map((function(e){return e.id}))),c&&(0===t.length&&0===n.length&&j(Pn),(t.length>0||n.length>0)&&j(Nn))}});var le=(0,a.useCallback)((function(){D((0,nt.__)("Applying auto layout.","post-expirator"),{isDismissible:!0,type:"snackbar"}),Promise.all([n.e(845),n.e(251)]).then(n.bind(n,7632)).then((function(e){(0,e.useLayoutedElements)({nodes:r,edges:o,onLayout:function(e,t){_(e),S(t)},onAnimationFrame:function(){ie(),z()}})({direction:zn.rx}),D((0,nt.__)("Auto layout applied.","post-expirator"),{isDismissible:!0,type:"snackbar"})}))}),[r,o,ie,z]);return(0,a.useEffect)((function(){a.Platform.select({web:!0,native:!1})&&j(Pn)}),[]),(0,a.useEffect)((function(){if("null/undefined"===u){var e=i.length>0||l.length>0?Nn:Pn;j(e)}}),[u,l,i]),React.createElement("div",{className:"reactflow-wrapper",ref:I},React.createElement(So,{onLayout:le}),!v&&React.createElement(d.Gc,{nodes:r,edges:o,onNodesChange:B,onEdgesChange:H,onEdgeUpdate:G,onConnectStart:K,onConnectEnd:Q,onConnect:$,isValidConnection:Y,onDrop:ne,onDragOver:ee,nodesDraggable:!0,proOptions:{hideAttribution:!1},fitView:ie,style:{backgroundColor:"#ffffff"},snapToGrid:!0,snapGrid:[10,10],nodeTypes:V,edgeTypes:M,onNodesDelete:oe,onEdgesDelete:ae,connectionLineStyle:{stroke:"#c2c2c2",strokeWidth:2,strokeDasharray:"3,4"}},m&&React.createElement(nn.o,{pannable:!0,zoomable:!0,nodeColor:function(e){if("generic"===e.type)return"#FFCC00"}}),b&&React.createElement(rn.H,null),React.createElement(on.V,{variant:"dots",color:"#ccc",gap:10})),React.createElement(er,null))},Co=n(7612),To=n.n(Co);function Po(){var e=(0,s.useDispatch)("core/notices").removeNotice,t=(0,s.useSelect)((function(e){return e("core/notices").getNotices()}),[]),n=To()(t,{isDismissible:!0,type:"default"}),r=To()(t,{isDismissible:!1,type:"default"}),o=To()(t,{type:"snackbar"});return React.createElement(React.Fragment,null,React.createElement(an.NoticeList,{notices:r,className:"workflow-editor-notices__notice-list"}),React.createElement(an.NoticeList,{notices:n,className:"workflow-editor-notices__notice-list",onRemove:e}),React.createElement(an.SnackbarList,{notices:o,className:"workflow-editor-notices__snackbar-list",onRemove:e}))}var No=function(e){return React.createElement(React.Fragment,null,React.createElement(Po,null),React.createElement(Ao,null))},jo=function(e){return React.createElement("div",null,"PublishPress Future Workflow Editor")},Do=n(9482),Io=n(5095),Lo=n(7209),Fo=n(4011),Wo=n(6644);function Vo(e){var t=e.showTooltip,n=(0,s.useSelect)((function(e){var t=e(tn).getPostType;return{isActive:(0,e(E).isFeatureActive)("fullscreenMode"),postType:t()}}),[]),r=n.isActive,o=n.postType;if(!r||!o)return null;var a=React.createElement(an.Icon,{size:"36px",icon:Wo.A});return React.createElement(an.__unstableMotion.div,{whileHover:"expand",className:"editor-header__back-button"},React.createElement(an.Button,{className:"edit-post-fullscreen-mode-close",href:(0,Fo.addQueryArgs)("edit.php",{post_type:p.M$}),label:(0,nt.__)("Back","post-expirator"),showTooltip:t},a))}var Mo=n(8169);function Uo(e){return Uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uo(e)}function zo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zo(Object(n),!0).forEach((function(t){Ho(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ho(e,t,n){return(t=function(e){var t=function(e){if("object"!=Uo(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Uo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Uo(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Go=function(e){var t=e.as,n=void 0===t?an.DropdownMenu:t,r=e.className,o=e.label,a=void 0===o?(0,nt.__)("Options","post-expirator"):o,i=e.popoverProps,l=e.toggleProps,s=e.children;return React.createElement(n,{className:c()("interface-more-menu-dropdown",r),icon:Mo.A,label:a,popoverProps:Bo(Bo({position:"bottom left"},i),{},{className:c()("interface-more-menu-dropdown__content",null==i?void 0:i.className)}),toggleProps:Bo({tooltipPosition:"bottom"},l)},(function(e){return s(e)}))},qo=n(8351),$o=function(e){e.scope;var t=e.label,n=e.info,r=e.messageActivated,o=e.messageDeactivated,a=e.shortcut,i=e.feature,l=(0,s.useSelect)((function(e){return e(E).isFeatureActive(i)}),[i]),c=(0,s.useDispatch)(E).toggleFeature;return React.createElement(an.MenuItem,{icon:l&&qo.A,isSelected:l,onClick:function(){c(i),l?(0,yr.L)(o||(0,nt.__)("Feature deactivated","post-expirator")):(0,yr.L)(r||(0,nt.__)("Feature activated","post-expirator"))},role:"menuitemcheckbox",info:n,shortcut:a},t)},Ko=function(){return(0,Do.A)("medium")?React.createElement(React.Fragment,null,React.createElement(an.MenuGroup,{label:(0,nt._x)("View","noun","post-expirator")},React.createElement($o,{scope:"core/edit-post",feature:p.t7,label:(0,nt.__)("Fullscreen mode","post-expirator"),info:(0,nt.__)("Work without distraction","post-expirator"),messageActivated:(0,nt.__)("Fullscreen mode activated","post-expirator"),messageDeactivated:(0,nt.__)("Fullscreen mode deactivated","post-expirator"),shortcut:vr.dz.secondary("f")}),React.createElement($o,{scope:"core/edit-post",feature:p.yY,label:(0,nt.__)("Advanced Settings","post-expirator"),info:(0,nt.__)("Display advanced settings for the workflow, triggers and steps","post-expirator"),messageActivated:(0,nt.__)("Advanced settings mode activated","post-expirator"),messageDeactivated:(0,nt.__)("Advanced settings mode deactivated","post-expirator"),shortcut:vr.dz.secondary("a")}),React.createElement($o,{scope:"core/edit-post",feature:p.s$,label:(0,nt.__)("Display a mini map","post-expirator"),info:(0,nt.__)("Display a mini map in the bottom of the editor, triggers and steps","post-expirator"),messageActivated:(0,nt.__)("Mini map activated","post-expirator"),messageDeactivated:(0,nt.__)("Mini map deactivated","post-expirator")}),React.createElement($o,{scope:"core/edit-post",feature:p.kD,label:(0,nt.__)("Display the controls panel","post-expirator"),info:(0,nt.__)("Display the controls panel with buttons to zoon in, zoom out, fit the view and lock the viewport","post-expirator"),messageActivated:(0,nt.__)("Mini map activated","post-expirator"),messageDeactivated:(0,nt.__)("Mini map deactivated","post-expirator")})),React.createElement(an.MenuGroup,{label:(0,nt.__)("Tools","post-expirator")},React.createElement($o,{scope:"core/edit-post",feature:p.m$,label:(0,nt.__)("Developer mode","post-expirator"),info:(0,nt.__)("Work in developer mode","post-expirator"),messageActivated:(0,nt.__)("Developer mode activated","post-expirator"),messageDeactivated:(0,nt.__)("Developer mode deactivated","post-expirator"),shortcut:vr.dz.secondary("d")}),React.createElement($o,{scope:"core/edit-post",feature:p.d6,label:(0,nt.__)("Welcome guide","post-expirator"),info:(0,nt.__)("Display the welcome guide","post-expirator"),messageActivated:(0,nt.__)("Welcome guide activated","post-expirator"),messageDeactivated:(0,nt.__)("Welcome guide deactivated","post-expirator")}),React.createElement(an.MenuItem,{icon:"external",onClick:function(){window.open("https://publishpress.com/docs-category/future/","_blank")}},(0,nt.__)("Help","post-expirator")))):null};function Qo(e){return Qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qo(e)}function Yo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yo(Object(n),!0).forEach((function(t){Xo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xo(e,t,n){return(t=function(e){var t=function(e){if("object"!=Qo(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Qo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Qo(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Zo={className:"edit-post-more-menu__content"},ea=function(e){var t=e.showIconLabels;return(0,Do.A)("large"),React.createElement(Go,{className:"edit-post-more-menu",popoverProps:Zo,toggleProps:Jo({showTooltip:!t},t&&{variant:"tertiary"})},(function(e){return e.onClose,React.createElement(React.Fragment,null,React.createElement(Ko,null))}))},ta=n(6184),na=["children","focusOnMount","__experimentalInitialIndex","__experimentalOnIndexChange"];function ra(){return ra=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ra.apply(null,arguments)}function oa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return aa(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?aa(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ia(e){return Array.from(e.querySelectorAll("[data-toolbar-item]"))}function la(e){var t=e.children,n=e.focusOnMount,r=e.__experimentalInitialIndex,o=e.__experimentalOnIndexChange,i=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,na),l=(0,a.useRef)();return function(e,t,n,r){var o=oa((0,a.useState)(t),1)[0],i=oa((0,a.useState)(n),1)[0],l=(0,a.useCallback)((function(){var t,n;t=e.current,(n=oa(ta.XC.tabbable.find(t),1)[0])&&n.focus()}),[]);(0,a.useEffect)((function(){o&&l()}),[o,l]),(0,a.useEffect)((function(){var t=0;return i&&!o&&(t=window.requestAnimationFrame((function(){var t,n=ia(e.current),r=i||0;n[r]&&(t=e.current).contains(t.ownerDocument.activeElement)&&n[r].focus()}))),function(){if(window.cancelAnimationFrame(t),r&&e.current){var n=ia(e.current).findIndex((function(e){return 0===e.tabIndex}));r(n)}}}),[i,o])}(l,n,r,o),React.createElement(an.NavigableMenu,ra({orientation:"horizontal",role:"toolbar",ref:l},i),t)}var ca=n(353),sa=n(9095);function ua(){return ua=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ua.apply(null,arguments)}function da(){return da=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},da.apply(null,arguments)}(0,a.forwardRef)((function(e,t){var n=(0,s.useSelect)((function(e){return!1}),[]),r=(0,s.useDispatch)(tn).undo;return React.createElement(an.Button,ua({},e,{ref:t,icon:(0,nt.isRTL)()?sa.A:ca.A,label:(0,nt.__)("Undo","post-expirator"),shortcut:vr.dz.primary("z"),"aria-disabled":!n,onClick:n?r:void 0,className:"editor-history__undo"}))})),(0,a.forwardRef)((function(e,t){var n=(0,s.useSelect)((function(e){return!1}),[]),r=(0,s.useDispatch)(tn).redo;return React.createElement(an.Button,da({},e,{ref:t,icon:(0,nt.isRTL)()?ca.A:sa.A,label:(0,nt.__)("Redo","post-expirator"),shortcut:vr.dz.primaryShift("z"),"aria-disabled":!n,onClick:n?r:void 0,className:"editor-history__redo"}))}));var pa=n(2747),fa=n(2086),ma=n(3034);function ba(e){return ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ba(e)}function va(e,t,n){return(t=function(e){var t=function(e){if("object"!=ba(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ba(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ba(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ya(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ga(e){var t,n,r=e.forceIsDirty,o=e.forceIsSaving,i=e.showIconLabels,l=void 0!==i&&i,u=(t=(0,a.useState)(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return ya(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ya(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=u[0],p=u[1],f=(0,Do.A)("small"),m=(0,s.useSelect)((function(e){var t=e(tn),n=t.isNewWorkflow,a=t.isCurrentWorkflowPublished,i=t.isEditedWorkflowDirty,l=t.isSavingWorkflow,c=t.isEditedWorkflowSaveable;return{isAutosaving:(0,t.isAutosavingWorkflow)(),isDirty:r||i(),isNew:n(),isPublished:a(),isSaving:o||l(),isSaveable:c()}}),[r,o]),b=m.isAutosaving,v=m.isDirty,y=m.isNew,g=m.isPublished,h=m.isSaveable,w=m.isSaving,_=(0,s.useDispatch)(tn).saveAsDraft,E=(0,pa.A)(w);if((0,a.useEffect)((function(){var e;return E&&!w&&(p(!0),e=setTimeout((function(){p(!1)}),1e3)),function(){return clearTimeout(e)}}),[w]),!g){var S,x=(0,nt.__)("Save draft","post-expirator"),R=(0,nt.__)("Save","post-expirator"),k=d||!y&&!v,O=w||k,A=w||k||!h;return w?S=b?(0,nt.__)("Autosaving","post-expirator"):(0,nt.__)("Saving","post-expirator"):k?S=(0,nt.__)("Saved","post-expirator"):f?S=x:l&&(S=R),React.createElement(an.Button,{className:h||w?c()(va({"editor-post-save-draft":!O,"editor-post-saved-state":O,"is-saving":w,"is-autosaving":b,"is-saved":k},(0,an.__unstableGetAnimateClassName)({type:"loading"}),w)):void 0,onClick:A?void 0:function(){_()},shortcut:vr.dz.primary("s"),variant:f?"tertiary":void 0,icon:f?void 0:fa.A,label:x,"aria-disabled":A},O&&React.createElement(io.A,{icon:k?qo.A:ma.A}),S)}}function ha(e){return ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ha(e)}function wa(e,t,n){return(t=function(e){var t=function(e){if("object"!=ha(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ha(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ha(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const Ea=function(e){var t,n,r=e.showIconLabels,o=void 0!==r&&r,i=(t=(0,a.useState)(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return _a(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_a(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=i[0],u=i[1],d=(0,Do.A)("small"),p=(0,s.useSelect)((function(e){var t=e(tn),n=t.isNewWorkflow,r=t.isCurrentWorkflowPublished,o=t.isEditedWorkflowDirty,a=t.isSavingWorkflow,i=t.isEditedWorkflowSaveable;return{isAutosaving:(0,t.isAutosavingWorkflow)(),isDirty:o(),isNew:n(),isPublished:r(),isSaving:a(),isSaveable:i()}}),[]),f=p.isAutosaving,m=p.isDirty,b=p.isNew,v=p.isPublished,y=p.isSaveable,g=p.isSaving,h=(0,s.useDispatch)(tn),w=h.saveAsCurrentStatus,_=h.publishWorkflow,E=(0,pa.A)(g);(0,a.useEffect)((function(){var e;return E&&!g&&(u(!0),e=setTimeout((function(){u(!1)}),1e3)),function(){return clearTimeout(e)}}),[g]);var S,x=v?(0,nt.__)("Update","post-expirator"):(0,nt.__)("Publish","post-expirator"),R=x,k=l||!b&&!m,O=g||k,A=g||k||!y;return g?S=f?(0,nt.__)("Autosaving...","post-expirator"):(0,nt.__)("Updating...","post-expirator"):k?S=(0,nt.__)("Updated","post-expirator"):d?S=x:o&&(S=R),React.createElement(an.Button,{className:y||g?c()(wa({"editor-post-save-draft":!O,"editor-post-saved-state":O,"is-saving":g,"is-autosaving":f,"is-saved":k},(0,an.__unstableGetAnimateClassName)({type:"loading"}),g)):void 0,onClick:function(){A||(v?w():_())},variant:"primary",label:x,"aria-disabled":A},S)};var Sa=function(e){var t=e.direction,n=new CustomEvent(zn.Ml,{detail:{direction:t}});document.dispatchEvent(n)},xa=window.futureWorkflowEditor.isWP65OrLater,Ra=function(e){e.preventDefault()},ka=function(){var e=(0,s.useSelect)((function(e){return{isFullscreenActive:e(E).isFeatureActive(p.t7),hasReducedUI:e(E).isFeatureActive(p.hN),isInserterOpened:e(E).isFeatureActive(p.is),showIconLabels:e(E).isFeatureActive(p.Pf),isLoadingWorkflow:e(tn).isLoadingWorkflow()}})),t=e.isFullscreenActive,n=e.isInserterOpened,r=e.hasReducedUI,o=e.showIconLabels,l=e.isLoadingWorkflow,c=(0,s.useDispatch)(E),u=c.enableFeature,d=c.disableFeature,f="edit-post-header editor-header "+(r?"has-reduced-ui":""),m=((0,Do.A)("wide"),(0,a.useRef)()),b=(0,a.useCallback)((function(){if(n)return m.current.focus(),void d(p.is);u(p.is)}),[n,u,d]),v=(0,nt.__)("Document tools"),y=Sa,g=(0,a.useCallback)((function(e){e.preventDefault(),y({direction:zn.wD})})),h=(0,a.useCallback)((function(e){e.preventDefault(),window.open("https://publishpress.com/links/future-workflow-toolbar","_blank")})),w=xa?"editor-document-tools__left":"edit-post-header-toolbar__left",_=In();return React.createElement("div",{className:f},t&&React.createElement(Vo,null),React.createElement("div",{className:"edit-post-header__toolbar editor-header__toolbar"},React.createElement(la,{className:"edit-post-header-toolbar editor-document-tools","aria-label":v},React.createElement("div",{className:w},React.createElement(an.ToolbarItem,{ref:m,as:an.Button,className:"edit-post-header-toolbar__inserter-toggle",variant:"primary",isPressed:n,onMouseDown:Ra,onClick:b,shortcut:vr.dz.secondary("i"),icon:Io.A,label:(0,nt._x)("Toggle block inserter","Generic label for block inserter button"),showTooltip:!o},o&&(n?(0,nt.__)("Close","post-expirator"):(0,nt.__)("Add","post-expirator"))),React.createElement(an.ToolbarItem,{as:an.Button,className:"edit-post-header-toolbar__autolayout-down",onMouseDown:Ra,onClick:g,icon:Lo.A,shortcut:vr.dz.secondary("l"),label:(0,nt.__)("Auto Layout","post-expirator"),showTooltip:!o,disabled:l},o&&(0,nt.__)("Auto Layout","post-expirator")),!_&&React.createElement(an.ToolbarItem,{as:an.Button,className:"edit-post-header-toolbar__buy-pro",onMouseDown:Ra,onClick:h,icon:En,label:(0,nt.__)("Upgrade to Pro and unlock more features","post-expirator"),showTooltip:!o},(0,nt.__)("Upgrade to Pro","post-expirator"))))),React.createElement("div",{className:"edit-post-header__settings editor-header__settings"},React.createElement(ga,null),React.createElement(Ea,null),React.createElement(i.dq.Slot,{scope:p.eJ}),React.createElement(ea,null)))};function Oa(e){var t=e.className,n=e.secondarySidebar,r=(0,Do.A)("medium","<"),o=(0,s.useSelect)((function(e){var t=e("core/interface").getActiveComplementaryArea(p.eJ);return{sidebarIsOpened:null!==t&&"null/undefined"!==t,hasFixedToolbar:!1,hasActiveMetaboxes:!1,showIconLabels:e(E).isFeatureActive(p.Pf),hasSelectedNodes:e(tn).hasSelectedNodes()}})),a=o.sidebarIsOpened,l=o.hasFixedToolbar,u=o.hasActiveMetaboxes,d=o.showIconLabels,f=(o.hasSelectedNodes,(0,s.useDispatch)(E)),m=(f.openGeneralSidebar,f.closeInserter,c()(t,{"is-sidebar-opened":a,"has-fixed-toolbar":l,"has-metaboxes":u,"show-icon-labels":d}));return React.createElement(i.Du,{className:m,header:React.createElement(ka,null),secondarySidebar:n(),content:React.createElement(No,null),footer:React.createElement(jo,null),actions:null,sidebar:(!r||a)&&React.createElement(i.WK.Slot,{scope:p.eJ})})}var Aa=n(9986),Ca=n(5578),Ta="publishpress-future/workflow-editor/toggle-fullscreen",Pa="publishpress-future/workflow-editor/fit-view",Na="publishpress-future/workflow-editor/toggle-inserter",ja="publishpress-future/workflow-editor/auto-layout",Da="publishpress-future/workflow-editor/toggle-sidebar",Ia="publishpress-future/workflow-editor/toggle-developer-mode",La="publishpress-future/workflow-editor/toggle-advanced-settings",Fa="publishpress-future/workflow-editor/save-as-current-status",Wa=[{name:Ta,category:"global",description:"Toggle fullscreen mode",keyCombination:{modifier:"secondary",character:"f"}},{name:Ia,category:"global",description:"Toggle developer mode",keyCombination:{modifier:"secondary",character:"d"}},{name:La,category:"global",description:"Toggle advanced settings",keyCombination:{modifier:"secondary",character:"a"}},{name:Pa,category:"global",description:"Fit view",keyCombination:{modifier:"secondary",character:"v"}},{name:Na,category:"global",description:"Toggle inserter",keyCombination:{modifier:"secondary",character:"i"}},{name:ja,category:"global",description:"Auto layout",keyCombination:{modifier:"secondary",character:"l"}},{name:Da,category:"global",description:"Toggle sidebar",keyCombination:{modifier:"secondary",character:"s"}},{name:Fa,category:"global",description:"Save as current status",keyCombination:{modifier:"primary",character:"s"}}];function Va(e){return Va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Va(e)}function Ma(){Ma=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),l=new T(r||[]);return o(i,"_invoke",{value:k(e,n,l)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",f="suspendedYield",m="executing",b="completed",v={};function y(){}function g(){}function h(){}var w={};s(w,i,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(P([])));E&&E!==n&&r.call(E,i)&&(w=E);var S=h.prototype=y.prototype=Object.create(w);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function R(e,t){function n(o,a,i,l){var c=d(e[o],e,a);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==Va(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function k(t,n,r){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===b){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var l=r.delegate;if(l){var c=O(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=b,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var s=d(t,n,r);if("normal"===s.type){if(o=r.done?b:f,s.arg===v)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=b,r.method="throw",r.arg=s.arg)}}}function O(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,O(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(Va(t)+" is not iterable")}return g.prototype=h,o(S,"constructor",{value:h,configurable:!0}),o(h,"constructor",{value:g,configurable:!0}),g.displayName=s(h,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s(e,c,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},x(R.prototype),s(R.prototype,l,(function(){return this})),t.AsyncIterator=R,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new R(u(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(S),s(S,c,"Generator"),s(S,i,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return l.type="throw",l.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Ua(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}var za=function(){var e=(0,s.useDispatch)(Ca.M_).registerShortcut,t=(0,s.useDispatch)(E).toggleFeature,n=(0,s.useDispatch)(tn).saveAsCurrentStatus,r=(0,d.VH)(),o=(0,s.useSelect)((function(e){return{isEditedWorkflowSaveable:e(tn).isEditedWorkflowSaveable}}),[]).isEditedWorkflowSaveable;(0,a.useEffect)((function(){Wa.forEach((function(t){e(t)}))}),[]);var i=function(){var e,t=(e=Ma().mark((function e(t){return Ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),o){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,n();case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.error("Failed to save workflow:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[3,8]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Ua(a,r,o,i,l,"next",e)}function l(e){Ua(a,r,o,i,l,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return(0,Ca.wk)(Ta,(function(){return t(p.t7)})),(0,Ca.wk)(Ia,(function(){return t(p.m$)})),(0,Ca.wk)(Pa,(function(){return r.fitView()})),(0,Ca.wk)(Na,(function(){return t(p.is)})),(0,Ca.wk)(ja,(function(){document.dispatchEvent(new CustomEvent(zn.Ml,{detail:{direction:zn.wD}}))})),(0,Ca.wk)(La,(function(){return t(p.yY)})),(0,Ca.wk)(Fa,i),null},Ba=n(4707),Ha=n(8098),Ga=n(3950),qa=n.n(Ga);function $a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ka=[(0,a.createInterpolateElement)((0,nt.__)("Select multiple steps by pressing <kbd>cmd</kbd> and clicking on each step in the workflow.","post-expirator"),{kbd:React.createElement("kbd",null)}),(0,nt.__)("Drag steps from the inserter and drop them directly into your workflow for easy customization.","post-expirator"),(0,nt.__)("Simply double-click any step to bring up the settings sidebar for quick adjustments.","post-expirator"),(0,nt.__)("Double-click the workflow pane to increase the zoom level for a closer look.","post-expirator"),(0,a.createInterpolateElement)((0,nt.__)("Hold down the <kbd>shift</kbd> key and double-click the workflow pane to decrease the zoom level.","post-expirator"),{kbd:React.createElement("kbd",null)}),(0,nt.__)("Easily add new steps by clicking on a step's handle and dragging it. Drop it in the workflow pane to see a floating inserter where you can type and search for the step you need.","post-expirator")];function Qa(){var e,t,n=(e=(0,a.useState)(Math.floor(Math.random()*Ka.length)),t=1,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return $a(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$a(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];return React.createElement(an.Tip,null,Ka[n])}var Ya=n(9181),Ja=n.n(Ya),Xa=n(8064);function Za(e){return Za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Za(e)}var ei=["tabId","onClick","children","selected"];function ti(e,t,n){return(t=function(e){var t=function(e){if("object"!=Za(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Za(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Za(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ni(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ri(){return ri=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ri.apply(null,arguments)}var oi=function(e){var t=e.tabId,n=e.onClick,r=e.children,o=e.selected,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,ei);return React.createElement(an.Button,ri({role:"tab",tabIndex:o?null:-1,"aria-selected":o,id:t,onClick:n},a),r)};function ai(e){var t,n,r,o=e.className,i=e.children,l=e.tabs,s=e.initialTabName,u=e.orientation,d=void 0===u?"horizontal":u,p=e.activeClass,f=void 0===p?"is-active":p,m=e.onSelect,b=void 0===m?qa():m,v=(0,Xa.A)(ai,"tab-panel"),y=(n=(0,a.useState)(null),r=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(n,r)||function(e,t){if(e){if("string"==typeof e)return ni(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ni(e,t):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),g=y[0],h=y[1],w=function(e){h(e),b(e)},_=qr()(l,{name:g}),E="".concat(v,"-").concat(null!==(t=null==_?void 0:_.name)&&void 0!==t?t:"none");return(0,a.useEffect)((function(){qr()(l,{name:g})||h(s||(l.length>0?l[0].name:null))}),[l]),(0,a.useEffect)((function(){h(s||l[0].name)}),[s]),React.createElement("div",{className:o},React.createElement(an.NavigableMenu,{role:"tablist",orientation:d,onNavigate:function(e,t){t.click()},className:"components-tab-panel__tabs block-editor-inserter__tablist-and-close-button"},l.map((function(e){return React.createElement(oi,{className:c()("components-tab-panel__tabs-item",e.className,ti({},f,e.name===g)),tabId:"".concat(v,"-").concat(e.name),"aria-controls":"".concat(v,"-").concat(e.name,"-view"),selected:e.name===g,key:e.name,onClick:Ja()(w,e.name)},e.title)}))),_&&React.createElement("div",{key:E,"aria-labelledby":E,role:"tabpanel",id:"".concat(E,"-view"),className:"components-tab-panel__tab-content block-editor-inserter__tabpanel"},i(_)))}var ii={name:p.Dh,title:(0,nt.__)("Triggers","post-expirator")},li={name:p.DM,title:(0,nt.__)("Actions","post-expirator")},ci={name:p.sM,title:(0,nt.__)("Advanced","post-expirator")};const si=function(e){var t=e.children,n=e.onSelect,r=e.initialTabName,o=void 0===r?p.Dh:r,i=(0,a.useMemo)((function(){return[ii,li,ci]}),[ii,li,ci]);return React.createElement(ai,{className:"block-editor-inserter__tabs",tabs:i,onSelect:n,initialTabName:o},t)};function ui(e){var t=e.node,n=In();return React.createElement("div",{className:"block-editor-block-card"},React.createElement(Cn,{icon:t.icon,showColors:!0,className:"block-editor-block-icon"}),React.createElement("div",{className:"block-editor-block-card__content"},React.createElement("h2",{className:"block-editor-block-card__title"},t.label,t.isProFeature&&!n&&React.createElement("span",{className:"block-editor-block-card__pro-badge"},(0,nt.__)("Pro","post-expirator"))),t.description&&React.createElement("span",{className:"block-editor-block-card__description"},t.description),t.isProFeature&&!n&&React.createElement("div",{className:"block-editor-block-card__pro-instructions"},(0,nt.__)("Currently this step is being skipped. Upgrade to Pro to unlock this feature.","post-expirator")," ",(0,nt.__)("Drag this node to preview its options in your workflow.","post-expirator"))))}const di=function(e){var t=e.item;return React.createElement("div",{className:"block-editor-inserter__preview-container"},React.createElement(ui,{node:t}))};function pi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function fi(e){var t,n,r=e.onSelect,o=e.showInserterHelpPanel,i=e.showMostUsedNodes,l=e.__experimentalFilterValue,c=void 0===l?"":l,u=(e.shouldFocusNode,t=(0,a.useState)(c),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return pi(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pi(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=u[0],f=u[1],m=(0,s.useSelect)((function(e){return{currentInserterTab:e(E).getCurrentInserterTab(),hoveredItem:e(E).getHoveredItem()}})),b=m.currentInserterTab,v=m.hoveredItem,y=(0,s.useDispatch)(E),g=y.setCurrentInserterTab,h=y.setHoveredItem,w=(0,a.useCallback)((function(e,t,n){r()}),[r]),_=(0,a.useCallback)((function(e){h(e)}),[h]),S=(0,a.useMemo)((function(){var e=(0,s.select)(E).getTriggerNodes(),t=(0,s.select)(E).getTriggerCategories();return React.createElement(React.Fragment,null,React.createElement("div",{className:"block-editor-inserter__block-list"},React.createElement(Wr,{type:p.Dh,onInsert:w,onHover:_,showMostUsedNodes:i,items:e,categories:t})),o&&React.createElement("div",{className:"block-editor-inserter__tips"},React.createElement(an.VisuallyHidden,{as:"h2"},(0,nt.__)("A tip for using the workflow editor","post-expirator")),React.createElement(Qa,null)))}),[w,_,d,i,o]),x=(0,a.useMemo)((function(){var e=(0,s.select)(E).getActionNodes(),t=(0,s.select)(E).getActionCategories();return React.createElement(React.Fragment,null,React.createElement("div",{className:"block-editor-inserter__block-list"},React.createElement(Wr,{type:p.DM,onInsert:w,onHover:_,showMostUsedNodes:i,items:e,categories:t})),o&&React.createElement("div",{className:"block-editor-inserter__tips"},React.createElement(an.VisuallyHidden,{as:"h2"},(0,nt.__)("A tip for using the workflow editor","post-expirator")),React.createElement(Qa,null)))}),[w,_,d,i,o]),R=(0,a.useMemo)((function(){var e=(0,s.select)(E).getAdvancedNodes(),t=(0,s.select)(E).getAdvancedCategories();return React.createElement(React.Fragment,null,React.createElement("div",{className:"block-editor-inserter__block-list"},React.createElement(Wr,{type:p.sM,onInsert:w,onHover:_,showMostUsedNodes:i,items:e,categories:t})),o&&React.createElement("div",{className:"block-editor-inserter__tips"},React.createElement(an.VisuallyHidden,{as:"h2"},(0,nt.__)("A tip for using the workflow editor")),React.createElement(Qa,null)))}),[w,_,d,i,o]),k=(0,a.useCallback)((function(e){return e.name===p.Dh?S:e.name===p.DM?x:e.name===p.sM?R:void 0}),[S,x]),O=(0,a.useCallback)((function(e){g(e)}),[g]);return React.createElement("div",{className:"block-editor-inserter__menu"},React.createElement("div",{className:"block-editor-inserter__main-area show-as-tabs"},React.createElement("div",{className:"block-editor-tabbed-sidebar"},React.createElement(an.SearchControl,{className:"block-editor-inserter__search",onChange:function(e){v&&h(null),f(e)},value:d,label:(0,nt.__)("Search for triggers and steps","post-expirator"),placeholder:(0,nt.__)("Search")}),React.createElement("div",{className:"block-editor-tabbed-sidebar__tabpanel"},!!d&&React.createElement(uo,{filterValue:d,onSelect:r,onHover:_}),!d&&React.createElement(si,{onSelect:O,initialTabName:b},k)))),o&&v&&React.createElement(an.Popover,{className:"block-editor-inserter__preview-container__popover",placement:"right-start",offset:16,focusOnMount:!1,animate:!1},React.createElement(di,{item:v})))}function mi(e){var t=e.isAppender,n=e.showInserterHelpPanel,r=e.showMostUsedNodes,o=void 0===r||r,a=e.onSelect,i=void 0===a?qa():a,l=e.shouldFocusNode,c=void 0!==l&&l;return React.createElement(fi,{onSelect:i,isAppender:t,showInserterHelpPanel:n,showMostUsedNodes:o,shouldFocusNode:c})}function bi(){return bi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bi.apply(null,arguments)}function vi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function yi(){var e,t,n=(0,s.useSelect)((function(e){return{showMostUsedNodes:e(E).isFeatureActive(p.dw)}}),[]).showMostUsedNodes,r=(0,s.useDispatch)(E).disableFeature,o=function(){r(p.is)},a=(0,Do.A)("medium","<"),i=(e=(0,Ha.A)({onClose:function(){return o()}}),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return vi(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vi(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=i[0],c=i[1];return React.createElement("div",bi({ref:l},c,{className:"editor-inserter-sidebar"}),React.createElement("div",{className:"editor-inserter-sidebar__header"},React.createElement(an.Button,{icon:Ba.A,onClick:function(){return o()},className:"block-editor-tabbed-sidebar__close-button is-small"})),React.createElement("div",{className:"editor-inserter-sidebar__content"},React.createElement(mi,{showMostUsedNodes:n,showInserterHelpPanel:!0,shouldFocusNode:a})))}var gi=n(684),hi=["className"];function wi(){return wi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wi.apply(null,arguments)}function _i(e){var t=e.className,n=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,hi),r=(0,s.useSelect)((function(e){return{workflowTitle:e(tn).getEditedWorkflowAttribute("title"),shortcut:e(Ca.M_).getShortcutRepresentation(Da),showIconLabels:e(E).isFeatureActive(p.Pf)}}),[]),o=r.workflowTitle,a=r.shortcut,l=r.showIconLabels;return React.createElement(i.WK,wi({panelClassName:t,className:"edit-post-sidebar",smallScreenTitle:o||(0,nt.__)("(no name)","post-expirator"),scope:p.eJ,toggleShortcut:a,showIconLabels:l},n))}var Ei=function(e){var t=e.sidebarName,n=(0,s.useDispatch)(E).openGeneralSidebar,r=(0,s.useSelect)((function(e){return{documentLabel:(0,nt._x)("Workflow","noun","post-expirator")}}),[]).documentLabel;return React.createElement(ai,{tabs:[{name:Pn,title:r},{name:Nn,title:(0,nt.__)("Element","post-expirator")}],onSelect:function(e){n(e)},initialTabName:t},(function(){return null}))};function Si(){var e=(0,s.useSelect)((function(e){return{isSavingWorkflow:e(tn).isSavingWorkflow(),isPublishedWorkflow:e(tn).isPublishedWorkflow()}})),t=e.isSavingWorkflow,n=e.isPublishedWorkflow,r=(0,s.useDispatch)(tn).switchToDraft,o=(0,Do.A)("small","<");return n?React.createElement(an.Button,{className:"editor-post-switch-to-draft is-next-40px-default-size",onClick:function(){var e;n&&(e=(0,nt.__)("Are you sure you want to unpublish this workflow?","post-expirator")),e&&window.confirm(e)&&r()},disabled:t,variant:"secondary"},o?(0,nt.__)("Draft","post-expirator"):(0,nt.__)("Switch to draft","post-expirator")):null}function xi(){var e=(0,s.useSelect)((function(e){return{isDeletingWorkflow:e(tn).isDeletingWorkflow()}})).isDeletingWorkflow,t=(0,s.useDispatch)(tn).deleteWorkflow,n=(0,Do.A)("small","<");return React.createElement(an.Button,{className:"editor-post-delete-workflow is-next-40px-default-size",onClick:function(){var e=(0,nt.__)("Are you sure you want to delete this workflow?","post-expirator");window.confirm(e)&&t()},disabled:e,variant:"secondary",isDestructive:!0},n?(0,nt.__)("Delete","post-expirator"):(0,nt.__)("Move to trash","post-expirator"))}function Ri(e){return Ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ri(e)}function ki(){return ki=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ki.apply(null,arguments)}function Oi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ai(e,t,n){return(t=function(e){var t=function(e){if("object"!=Ri(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ri(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ri(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ci=function(e){var t,n,r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oi(Object(n),!0).forEach((function(t){Ai(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);r.id=null!==(t=r.id)&&void 0!==t?t:r.title.toLowerCase().replace(/ /g,"");var o=(0,s.useSelect)((function(e){var t;return{panelBodyState:null===(t=e(E).getPanelBodyState(r.id))||void 0===t||t}})).panelBodyState,a=(0,s.useDispatch)(E).setPanelBodyState,i=r.onToggle;delete r.onToggle;var l=null!==(n=r.opened)&&void 0!==n?n:o;return delete r.opened,React.createElement(an.PanelBody,ki({},e,{opened:l,onToggle:function(e){a(r.id,e),i&&i(e)}}),r.children)};var Ti=n(1594),Pi=window.jQuery;const Ni=function(e,t){(0,Ti.useEffect)((function(){e.current&&Pi(e.current).closest(t).scrollTop(0)}),[e,t])};var ji=function(){var e=(0,s.useSelect)((function(e){return{workflow:e(tn).getWorkflow(),isLoadingWorkflow:e(tn).isLoadingWorkflow()}})),t=e.workflow,n=e.isLoadingWorkflow,r=(0,s.useDispatch)(tn).setEditedWorkflowAttribute,o=(0,a.useCallback)((function(e){r("title",e)})),i=(0,a.useCallback)((function(e){r("description",e)})),l=(0,a.useRef)(null);return Ni(l,".interface-interface-skeleton__sidebar"),React.createElement("div",{ref:l},React.createElement(Ci,{className:"edit-post-post-status",title:(0,nt.__)("Summary","post-expirator"),initialOpen:!0,disabled:n},React.createElement(an.PanelRow,{className:"editor-post-title__panel"},React.createElement(an.TextControl,{label:(0,nt.__)("Title","post-expirator"),value:t.title,onChange:o,disabled:n})),React.createElement(an.PanelRow,{className:"editor-post-description__panel"},React.createElement(an.TextareaControl,{label:(0,nt.__)("Description","post-expirator"),value:t.description,onChange:i,disabled:n})),React.createElement(an.PanelRow,{className:"editor-post-status__panel"},React.createElement(Si,null),React.createElement(xi,null))))},Di=["onClose","title","children","className","offset","placement"];function Ii(){return Ii=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ii.apply(null,arguments)}const Li=function(e){var t=e.onClose,n=e.title,r=e.children,o=e.className,a=e.offset,i=void 0===a?40:a,l=e.placement,c=void 0===l?"left-start":l,s=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Di);return React.createElement(an.Popover,Ii({onClose:t,placement:c,offset:i,className:"workflow-editor-setting-popover ".concat(o)},s),React.createElement(an.__experimentalVStack,null,React.createElement(an.__experimentalHStack,null,React.createElement("h2",{className:"components-truncate components-text components-heading block-editor-inspector-popover-header__heading"},n),React.createElement(an.Button,{icon:"no-alt",isSmall:!0,className:"block-editor-inspector-popover-header__action",onClick:t}))),r)};function Fi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Wi(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wi(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Vi=function(e){var t,n,r,o=e.node,i=Fi((0,a.useState)(!1),2),l=i[0],c=i[1],u=Fi((0,a.useState)(null===(t=o.data)||void 0===t?void 0:t.label),2),d=u[0],p=u[1],f=(0,s.useDispatch)(tn).updateNode;(0,a.useEffect)((function(){var e;c(!1),p(null===(e=o.data)||void 0===e?void 0:e.label)}),[o]);var m=function(){c(!1);var e={id:o.id,data:{label:d}};f(e)};return React.createElement(React.Fragment,null,!(null!==(n=o.data)&&void 0!==n&&n.label)&&React.createElement(an.Button,{variant:"link",onClick:function(){c(!0)}},(0,nt.__)("Add a description to this step...","post-expirator")),(null===(r=o.data)||void 0===r?void 0:r.label)&&React.createElement(React.Fragment,null,React.createElement(an.__experimentalVStack,null,React.createElement("div",{className:"workflow-editor-inspector-card__description"},o.data.label),React.createElement(an.Button,{variant:"link",onClick:function(){c(!0)}},(0,nt.__)("Edit description","post-expirator")))),l&&React.createElement(Li,{onClose:m,className:"workflow-editor-inspector-card__description-popover",title:(0,nt.__)("Edit description","post-expirator")},React.createElement(an.__experimentalVStack,null,React.createElement(an.TextareaControl,{value:d,onChange:function(e){p(e)},onKeyDown:function(e){"Escape"===e.key&&m()}}))))};const Mi=function(e){var t=e.title,n=e.description,r=e.icon,o=(e.id,e.slug,e.isProFeature),a=e.node,i=In(),l=[];return React.createElement("div",{className:"workflow-editor-inspector-card"},React.createElement("div",{className:"workflow-editor-inspector-card__content"},React.createElement(an.__experimentalVStack,null,React.createElement(an.__experimentalHStack,{className:"workflow-editor-inspector-card__header"},React.createElement("span",{className:"workflow-editor-inspector-icon has-colors"},r),React.createElement("h2",{className:"workflow-editor-inspector-card__title"},t,o&&!i&&React.createElement("span",{className:"workflow-editor-inspector-card__pro-badge"},(0,nt.__)("Pro","post-expirator"))))),React.createElement(an.__experimentalVStack,null,React.createElement("div",{className:"workflow-editor-inspector-card__description"},n)),o&&!i&&React.createElement(an.__experimentalVStack,null,React.createElement("div",{className:"workflow-editor-inspector-card__pro-instructions"},React.createElement(an.ExternalLink,{href:"https://publishpress.com/links/future-workflow-inspector",target:"_blank"},(0,nt.__)("Currently this step is being skipped. Upgrade to Pro to unlock this feature.","post-expirator")))),a&&(null==a?void 0:a.data)&&React.createElement(an.__experimentalVStack,null,React.createElement(Vi,{node:a})),l.length>0&&React.createElement(an.__experimentalVStack,null,React.createElement("table",null,React.createElement("tbody",null,l.map((function(e){return React.createElement("tr",{key:"attribute_"+e.id},React.createElement("th",null,e.label),React.createElement("td",null,e.value))})))))))},Ui=function(e){var t,n,r,o=e.node,a=(0,(0,s.useSelect)((function(e){return{getNodeTypeByName:e(E).getNodeTypeByName}})).getNodeTypeByName)(null==o||null===(t=o.data)||void 0===t?void 0:t.name),i=a.label||(null==o?void 0:o.data.label)||(0,nt.__)("Node","post-expirator"),l=a.description||(null==o?void 0:o.data.description)||(0,nt.__)("No description","post-expirator"),c=(null===(n=a.icon)||void 0===n?void 0:n.src)||"media-document",u=null==o?void 0:o.id,d=null==o||null===(r=o.data)||void 0===r?void 0:r.slug,p=React.createElement(Cn,{icon:c});return React.createElement(Mi,{title:i,description:l,id:u,icon:p,slug:d,isProFeature:a.isProFeature,node:o})},zi=function(e){var t=e.children;return React.createElement("span",{className:"workflow-editor-element-inspector__warning"},t)};function Bi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Hi(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hi(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Gi=function(e,t){return e?e.map((function(e){var n=t.find((function(t){return t.value===e}));return n?n.label:e})):[]},qi=function(e){var t=e.label,n=e.expandOnFocus,r=e.autoSelectFirstMatch,o=e.onChange,i=e.suggestions,l=e.value,c=e.className,s=(0,a.useMemo)((function(){return Gi(l,i)})),u=Bi((0,a.useState)(s),2),d=u[0],p=u[1],f=Bi((0,a.useState)(l),2),m=(f[0],f[1]),b=i.map((function(e){return e.label}));return(0,a.useEffect)((function(){p(Gi(l,i)),m(l)}),[l]),React.createElement(an.FormTokenField,{label:t,value:d,suggestions:b,__experimentalExpandOnFocus:n,__experimentalAutoSelectFirstMatch:r,onChange:function(e){p(e);var t=function(e,t){return e?e.map((function(e){var n=t.find((function(t){return t.label===e}));return n?n.value:e})):[]}(e,i);m(t),void 0!==o&&o(t,e)},className:c})};const $i=qi;function Ki(e){return Ki="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ki(e)}function Qi(e){return function(e){if(Array.isArray(e))return Yi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Yi(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yi(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Ji(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xi(e,t,n){return(t=function(e){var t=function(e){if("object"!=Ki(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ki(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ki(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Zi=function(e){var t,n,r,o,i,l,c,s=e.name,u=(e.label,e.defaultValue),d=e.onChange,p=e.settings,f=e.variables,m=futureWorkflowEditor.postTypes,b=futureWorkflowEditor.postStatuses,v=futureWorkflowEditor.postTerms,y=function(e){var t=e.settingName,n=e.value,r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ji(Object(n),!0).forEach((function(t){Xi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ji(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},u);r[t]=n,d&&d(s,r)},g=p&&!0===(null==p?void 0:p.acceptsInput),h=p&&!0===(null==p?void 0:p.isPostTypeRequired),w=g?"input":"custom",_="custom"===(null===(t=u)||void 0===t?void 0:t.postSource)||!g,E=p&&!0===(null==p?void 0:p.hidePostStatus);(0,a.useEffect)((function(){u||(u={postSource:w,postType:[],postId:[],postStatus:[],postAuthor:[],postTerms:[]},y({settingName:"postSource",value:w}))}),[]);var S=h?(0,nt.__)("Post Type","post-expirator")+" *":(0,nt.__)("Post Type","post-expirator"),x={postType:(null==p?void 0:p.postTypeDescription)||null,postId:(null==p?void 0:p.postIdDescription)||null,postStatus:(null==p?void 0:p.postStatusDescription)||null,postAuthor:(null==p?void 0:p.postAuthorDescription)||null,postTerms:(null==p?void 0:p.postTermsDescription)||null},R=(0,a.useCallback)((function(){var e=f.filter((function(e){return"user"===e.type}));return e=e.map((function(e){return{label:e.label,value:"{{".concat(e.name,".id}}")}})),[].concat(Qi(e),Qi(futureWorkflowEditor.postAuthors))}),[f]),k=(0,a.useMemo)((function(){return R()}),[R]);return React.createElement(React.Fragment,null,React.createElement(an.__experimentalVStack,null,g&&React.createElement(an.RadioControl,{label:(0,nt.__)("Post selection","post-expirator"),selected:(null===(n=u)||void 0===n?void 0:n.postSource)||w,options:[{label:(0,nt.__)("Post received as input","post-expirator"),value:"input"},{label:(0,nt.__)("Custom query","post-expirator"),value:"custom"}],onChange:function(e){return y({settingName:"postSource",value:e})}}),_&&React.createElement(React.Fragment,null,React.createElement(qi,{label:S,value:(null===(r=u)||void 0===r?void 0:r.postType)||[],suggestions:m,expandOnFocus:!0,autoSelectFirstMatch:!0,onChange:function(e){return y({settingName:"postType",value:e})}}),(null==x?void 0:x.postType)&&React.createElement("p",{className:"description"},x.postType),React.createElement(an.FormTokenField,{label:(0,nt.__)("Post ID","post-expirator"),value:(null===(o=u)||void 0===o?void 0:o.postId)||[],onChange:function(e){return y({settingName:"postId",value:e})}}),(null==x?void 0:x.postId)&&React.createElement("p",{className:"description"},x.postId),!E&&React.createElement(React.Fragment,null,React.createElement(qi,{label:(0,nt.__)("Post Status","post-expirator"),value:(null===(i=u)||void 0===i?void 0:i.postStatus)||[],suggestions:b,expandOnFocus:!0,autoSelectFirstMatch:!0,onChange:function(e){return y({settingName:"postStatus",value:e})}}),(null==x?void 0:x.postStatus)&&React.createElement("p",{className:"description"},x.postStatus)),React.createElement(qi,{label:(0,nt.__)("Post Author","post-expirator"),value:(null===(l=u)||void 0===l?void 0:l.postAuthor)||[],suggestions:k,expandOnFocus:!0,autoSelectFirstMatch:!0,onChange:function(e){return y({settingName:"postAuthor",value:e})}}),(null==x?void 0:x.postAuthor)&&React.createElement("p",{className:"description"},x.postAuthor),React.createElement(qi,{label:(0,nt.__)("Post Terms","post-expirator"),value:(null===(c=u)||void 0===c?void 0:c.postTerms)||[],suggestions:v,expandOnFocus:!0,autoSelectFirstMatch:!0,onChange:function(e){return y({settingName:"postTerms",value:e})}}),(null==x?void 0:x.postTerms)&&React.createElement("p",{className:"description"},x.postTerms),React.createElement(an.PanelRow,null,React.createElement("p",{className:"description"},(0,nt.__)("Separate multiple values with commas or Enter key.","post-expirator"))),h&&React.createElement(an.PanelRow,null,React.createElement("p",{className:"description"},(0,nt.__)("* Required field","post-expirator"))))))};function el(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var tl=window.futureWorkflowEditor;function nl(e){var t,n=e.label,r=e.disabled,o=tl.cronSchedules.map((function(e){return{name:e.label,id:"cron_".concat(e.value)}})),a=[{name:(0,nt.__)("Non-repeating","post-expirator"),id:"single"},{name:(0,nt.__)("Custom interval in seconds","post-expirator"),id:"custom"}].concat(function(e){if(Array.isArray(e))return el(e)}(t=o)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return el(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?el(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return React.createElement(an.TreeSelect,{label:n,tree:a,disabled:r})}function rl(e){var t=e.link;return React.createElement("div",{onClick:function(){window.open(t,"_blank")},style:{cursor:"pointer",marginLeft:"8px",color:"#000",backgroundColor:"#ffb200",borderRadius:"50%",minWidth:"26px",minHeight:"26px",display:"inline-block",textAlign:"center",boxSizing:"border-box",paddingTop:"5px"},title:(0,nt.__)("Upgrade to Pro to unlock this feature.","post-expirator")},React.createElement(Cn,{icon:"lock",iconSize:14}))}function ol(e){var t=e.children,n=e.link;return React.createElement("div",{style:{display:"flex",alignItems:"center"}},t,React.createElement(rl,{link:n}))}function al(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var il=function(e){var t,n,r,o=e.item,i=e.onClick,l=(n=(0,a.useState)(""),r=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(n,r)||function(e,t){if(e){if("string"==typeof e)return al(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?al(e,t):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=l[0],s=l[1],u=(0,nt.sprintf)((0,nt.__)("Type the %s key and click on the button to insert it.","post-expirator"),(null===(t=o.context)||void 0===t?void 0:t.table)||"meta"),d={id:"{{".concat(o.name,".").concat(c,"}}"),name:o.name+"."+c,label:(0,nt.__)("Metadata key","post-expirator"),description:u,context:o.context};return React.createElement("div",{className:"column-item-form"},React.createElement(an.TextControl,{label:o.label,value:c,onChange:function(e){return s(e)},help:o.description}),React.createElement(an.Button,{variant:"secondary",onClick:function(){i(d)}},(0,nt.__)("Insert","post-expirator")))},ll=function(e){var t=e.item,n=e.currentItemPath,r=e.onClick,o=e.setCurrentDescription,a=e.setCurrentVariableId,i=e.onDoubleClick,l=e.path,c=void 0===l?[]:l,s=e.index,u=e.columnIndex,d=t.children&&t.children.length>0,p=c.length-1,f=n[p],m=t.name.split(".")[0],b=m?"(".concat(m,")"):"",v=0===u&&"global"!==m;return React.createElement("div",{className:"column-item ".concat(f===s?"selected":""," ").concat(d?"has-children":""),onClick:function(){return r(c,p,s)},onMouseEnter:function(){o("".concat(t.description)),a(t.id)},onDoubleClick:function(){return i(t)}},t.label," ",v?React.createElement("span",{className:"column-item-step-slug"},b):"")},cl=function(e){var t=e.item,n=e.currentItemPath,r=e.onClick,o=e.setCurrentDescription,a=e.setCurrentVariableId,i=e.onDoubleClick,l=e.path,c=void 0===l?[]:l,s=e.index,u=e.columnIndex;return"meta-key-input"===(null==t?void 0:t.type)?React.createElement(il,{item:t,onClick:i}):React.createElement(ll,{item:t,currentItemPath:n,onClick:r,setCurrentDescription:o,setCurrentVariableId:a,onDoubleClick:i,path:c,index:s,columnIndex:u})};function sl(e){return sl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sl(e)}function ul(e){return function(e){if(Array.isArray(e))return pl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||dl(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dl(e,t){if(e){if("string"==typeof e)return pl(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pl(e,t):void 0}}function pl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function fl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ml(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fl(Object(n),!0).forEach((function(t){bl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bl(e,t,n){return(t=function(e){var t=function(e){if("object"!=sl(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=sl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==sl(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vl=function e(t){var n,r,o=t.currentItemPath,i=t.currentItems,l=t.onClick,c=t.setCurrentDescription,s=t.onDoubleClick,u=t.path,d=void 0===u?[]:u,p=t.setCurrentVariableId;if(t.columnIndex,!i)return null;var f=d.length,m=o[f],b=i[m],v=(0,a.useCallback)((function(e){var t,n=(0,nt.sprintf)((0,nt.__)("Type the %s key and click on the button to insert it.","post-expirator"),(null===(t=e.context)||void 0===t?void 0:t.table)||"meta");return ml(ml({},e),{},{children:[{name:e.name,label:(0,nt.__)("Metadata key","post-expirator"),description:n,type:"meta-key-input",context:e.context}]})}),[]);return"meta"===(null===(n=b)||void 0===n?void 0:n.type)&&(b=v(b)),React.createElement(React.Fragment,null,React.createElement("div",{className:"column",key:"column-".concat(d.join("-"))},i.map((function(e,t){return"meta"===e.type&&(e=v(e)),React.createElement(cl,{key:"column-item-".concat(d.join("-"),"-").concat(t),item:e,currentItemPath:o,onClick:l,setCurrentDescription:c,setCurrentVariableId:p,onDoubleClick:s,path:[].concat(ul(d),[t]),index:t,columnIndex:f})}))),void 0!==m&&(null===(r=b)||void 0===r?void 0:r.children)&&React.createElement(e,{currentItemPath:o,currentItems:b.children,path:[].concat(ul(d),[m]),onClick:l,setCurrentDescription:c,setCurrentVariableId:p,onDoubleClick:s}))};const yl=function(e){var t,n,r=e.items,o=e.setCurrentDescription,i=e.onDoubleClick,l=e.setCurrentVariableId,c=(t=(0,a.useState)([]),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(t,n)||dl(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=c[0],u=c[1],d=(0,a.useCallback)((function(e,t,n){var r=e.slice(0,t+1);r.push(n),u(r);var o=document.querySelector(".columns-container");o&&setTimeout((function(){o.scrollLeft=o.scrollWidth}),0)}),[u]);return React.createElement("div",{className:"columns-container"},React.createElement(vl,{currentItems:r,currentItemPath:s,onClick:d,onDoubleClick:i,setCurrentDescription:o,setCurrentVariableId:l}))};var gl=function(e){var t=e.url,n=e.label;return n||(n=(0,nt.__)("Learn more","post-expirator")),React.createElement("a",{href:t,target:"_blank",rel:"noopener noreferrer"},n)},hl=function(e){var t=e.text,n=e.helpUrl,r=e.className,o=void 0===r?"description margin-top":r;return React.createElement("p",{className:o},t," ",n&&React.createElement(React.Fragment,null,React.createElement(gl,{url:n})))},wl=(n(952),n(470)),_l=(n(2797),n(9073),n(47),function(e){var t=e.onClose,n=e.children;return React.createElement("div",{className:"workflow-editor-modal-footer"},n||React.createElement(an.Button,{variant:"primary",onClick:t},(0,nt.__)("OK","post-expirator")))}),El=n(5072),Sl=n.n(El),xl=n(7825),Rl=n.n(xl),kl=n(7659),Ol=n.n(kl),Al=n(5056),Cl=n.n(Al),Tl=n(540),Pl=n.n(Tl),Nl=n(1113),jl=n.n(Nl),Dl=n(5557),Il={};function Ll(e){return Ll="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ll(e)}function Fl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wl(e,t,n){return(t=function(e){var t=function(e){if("object"!=Ll(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ll(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ll(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ml(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ml(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ml(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Il.styleTagTransform=jl(),Il.setAttributes=Cl(),Il.insert=Ol().bind(null,"head"),Il.domAPI=Rl(),Il.insertStyleElement=Pl(),Sl()(Dl.A,Il),Dl.A&&Dl.A.locals&&Dl.A.locals;var Ul=function(e){var t=e.name,n=e.label,r=void 0===n?"":n,o=e.defaultValue,i=e.onChange,l=e.variables,c=void 0===l?[]:l,s=e.propertyName,u=void 0===s?"expression":s,d=e.settings,p=void 0===d?{}:d,f=e.description,m=void 0===f?"":f,b=e.isInline,v=void 0!==b&&b,y=e.readOnlyPreview,g=void 0!==y&&y,h=e.singleVariableOnly,w=void 0!==h&&h,_=e.wrapOnPreview,E=void 0!==_&&_,S=e.wrapOnEditor,x=void 0!==S&&S,R=e.oneLinePreview,k=void 0!==R&&R,O=e.helpUrl,A=void 0===O?"":O,C=e.autoComplete,T=void 0===C||C,P=e.completers,N=void 0===P?[]:P,j=(0,a.useRef)(null),D=(0,a.useRef)(null),I=Vl((0,a.useState)(),2),L=I[0],F=I[1],W=Vl((0,a.useState)(),2),V=W[0],M=W[1],U=Vl((0,a.useState)(!1),2),z=U[0],B=U[1];o||(o={});var H=(0,a.useCallback)((function(e){var n=e.settingName,r=e.value,a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fl(Object(n),!0).forEach((function(t){Wl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o);a[n]=r,i&&i(t,a),r.includes("error")&&[].push({row:0,column:10,text:"Example error: 'error' found in code",type:"error"}),j.current}),[o]),G=(0,a.useCallback)((function(){B(!1)}),[B]),q=(0,a.useCallback)((function(e){if(j.current){var t=j.current.editor;if(w)t.session.setValue(e.id);else{var n=t.getCursorPosition();t.session.insert(n,e.id)}t.focus(),w&&B(!1)}}),[j,w]),$={$blockScrolling:!0};(0,a.useEffect)((function(){E&&D.current&&D.current.editor.setOption("indentedSoftWrap",!1)}),[E,D]);var K=(o[u]||"").toString(),Q=((null==p?void 0:p.placeholder)||"").toString();return(0,a.useEffect)((function(){0!==N.length&&(j.current&&(j.current.editor.completers=N),D.current&&(D.current.editor.completers=N))}),[N,j,D]),React.createElement("div",{className:"expression-builder ".concat(z?"expression-builder-open":""," ").concat(v?"expression-builder-inline":"")},React.createElement(an.Button,{variant:"secondary",onClick:function(){return B(!0)},className:"expression-builder-button",icon:React.createElement(Cn,{icon:"braces",iconSize:16}),title:(0,nt.__)("Edit","post-expirator")}),!v&&r&&React.createElement(an.__experimentalHeading,{level:3,className:"expression-builder-small-heading"},r),React.createElement(wl.Ay,{ref:D,mode:"handlebars",theme:"textmate",name:"expression-builder-small",value:K,readOnly:g,className:g?"read-only-editor":"",editorProps:$,wrapEnabled:E,onChange:function(e){return H({settingName:u,value:e})},setOptions:{enableBasicAutocompletion:T,enableLiveAutocompletion:T,showGutter:!1,showPrintMargin:!1,showLineNumbers:!1,highlightActiveLine:!1},height:k?"30px":"92px",width:"100%",placeholder:Q}),m&&React.createElement(hl,{text:m,helpUrl:A}),z&&React.createElement(an.Modal,{title:r,onRequestClose:G,className:"workflow-editor-modal expression-builder-modal"},React.createElement("div",{style:{minWidth:"600px",maxWidth:"600px"}},w&&React.createElement("p",null,(0,nt.__)("Select a variable from the list below.","post-expirator")),!w&&React.createElement("p",null,(0,nt.__)("Type your expression here or use the variables below.","post-expirator")),React.createElement(wl.Ay,{ref:j,mode:"handlebars",theme:"textmate",name:"expression-builder-full",className:w?"read-only-editor":"",wrapEnabled:x,onChange:function(e){return H({settingName:u,value:e})},value:K,editorProps:$,readOnly:w,setOptions:{enableBasicAutocompletion:T,enableLiveAutocompletion:T,showLineNumbers:!w,showGutter:!w,highlightActiveLine:!w},height:w?"30px":"200px",width:"100%",placeholder:Q}),React.createElement("div",{className:"expression-builder-modal-variables",style:{maxWidth:"600px",overflowX:"auto"}},React.createElement(an.__experimentalHeading,{level:2,className:"components-truncate components-text components-heading block-editor-inspector-popover-header__heading"},(0,nt.__)("Variables","post-expirator")),w&&React.createElement("p",null,(0,nt.__)("Double-click on a variable to select it.","post-expirator")),!w&&React.createElement("p",null,(0,nt.__)("Double-click on any variable to add it to your expression.","post-expirator")),L&&React.createElement("p",{className:"description margin-top"},React.createElement("code",{className:"expression-builder-variable-name"},V)," ",L),!L&&React.createElement("p",{className:"description margin-top"},(0,nt.__)("Hover over a variable to see its description.","post-expirator")),React.createElement(yl,{items:c,setCurrentDescription:F,setCurrentVariableId:M,onDoubleClick:q}))),React.createElement(_l,{onClose:G})))};const zl=Ul;function Bl(e){var t=e.label,n=e.selectedId,r=e.onChange,o=e.tree;return React.createElement(an.TreeSelect,{label:t,tree:o,selectedId:n,onChange:r})}function Hl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Gl(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gl(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ql=wp.apiFetch;n(9922);var $l=function(e){var t=e.offset,n=e.label,r=e.labelDatePreview,o=e.labelOffsetPreview,i=e.setValidationErrorCallback,l=e.setHasPendingValidationCallback,c=e.setHasValidDataCallback,s=e.compactView,u=void 0!==s&&s,d=Hl((0,a.useState)(""),2),p=d[0],f=d[1],m=Hl((0,a.useState)(),2),b=m[0],v=m[1],y=(0,a.useRef)(new AbortController);(0,a.useEffect)((function(){!function(){if(t){var e=y.current;e&&e.abort(),y.current=new AbortController;var n=y.current.signal;l(!0),ql({path:(0,Fo.addQueryArgs)("publishpress-future/v1/settings/validate-expire-offset"),method:"POST",data:{offset:t},signal:n}).then((function(e){l(!1),c(e.isValid),i(e.message),e.isValid?(f(e.calculatedTime),v(e.currentTime)):f("")})).catch((function(e){"AbortError"!==e.name&&(l(!1),c(!1),i(e.message),f(""))}))}}()}),[t]);var g=u?" compact":"";return React.createElement(a.Fragment,null,t&&React.createElement("div",{className:"publishpress-future-date-preview"+g},React.createElement("h4",null,n),React.createElement("div",{className:"publishpress-future-date-preview-body"},React.createElement("div",null,React.createElement("span",{className:"publishpress-future-date-preview-label"},r,": "),React.createElement("span",{className:"publishpress-future-date-preview-value"},b)),React.createElement("div",null,React.createElement("span",{className:"publishpress-future-date-preview-label"},o,": "),React.createElement("span",{className:"publishpress-future-date-preview-value"},p)))))};function Kl(e){return e.replace(/<[^>]*>?/gm,"")}function Ql(e){return Ql="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ql(e)}function Yl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jl(e,t,n){return(t=function(e){var t=function(e){if("object"!=Ql(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ql(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ql(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||Zl(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zl(e,t){if(e){if("string"==typeof e)return ec(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ec(e,t):void 0}}function ec(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var tc=function(e){var t=e.name,n=e.label,r=e.defaultValue,o=e.onChange,i=e.variables,l=void 0===i?[]:i,c=e.settings,s=(0,a.useMemo)((function(){return l}),[l]),u=Xl((0,a.useState)(!1),2),d=u[0],p=u[1],f=Xl((0,a.useState)(!0),2),m=f[0],b=f[1],v=Xl((0,a.useState)(""),2),y=v[0],g=v[1],h=(0,a.useCallback)((function(e){var n=e.settingName,a=e.value,i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yl(Object(n),!0).forEach((function(t){Jl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r);i[n]=a,o&&o(t,i)}),[r,t,o]),w=(0,a.useMemo)((function(){var e=[{name:(0,nt.__)("Selected in the calendar","post-expirator"),id:"calendar"},{name:(0,nt.__)("When the trigger is activated","post-expirator"),id:"event"},{name:(0,nt.__)("When the step is activated","post-expirator"),id:"step"},{name:(0,nt.__)("Custom date source","post-expirator"),id:"custom"}];return c&&null!=c&&c.hideDateSources&&(e=e.filter((function(e){return!c.hideDateSources.includes(e.id)}))),e}),[c]),_=(0,a.useMemo)((function(){var e,t=[{name:(0,nt.__)("As soon as possible","post-expirator"),id:"now"},{name:(0,nt.__)("On a specific date","post-expirator"),id:"date"},{name:(0,nt.__)("Relative to a specific date","post-expirator"),id:"offset"}];return c&&null!=c&&c.showEmptyDateOption&&(t=[{name:(null==c?void 0:c.emptyDateOptionLabel)||(0,nt.__)("Unchanged","post-expirator"),id:""}].concat(function(e){if(Array.isArray(e))return ec(e)}(e=t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Zl(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),c&&null!=c&&c.hideDateStrategy&&(t=t.filter((function(e){return!c.hideDateStrategy.includes(e.id)}))),t}),[c]);return React.createElement(React.Fragment,null,React.createElement(an.__experimentalVStack,null,React.createElement(an.PanelRow,null,React.createElement(an.TreeSelect,{label:n,tree:_,selectedId:r.dateStrategy,onChange:function(e){return h({settingName:"dateStrategy",value:e})}})),("date"===r.dateStrategy||"offset"===r.dateStrategy)&&React.createElement(React.Fragment,null,React.createElement(an.PanelRow,null,React.createElement(Bl,{label:(0,nt.__)("Date source","post-expirator"),tree:w,selectedId:r.dateSource,onChange:function(e){return h({settingName:"dateSource",value:e})}})),"calendar"===r.dateSource&&React.createElement(an.PanelRow,null,React.createElement(an.DateTimePicker,{currentDate:r.specificDate,onChange:function(e){return h({settingName:"specificDate",value:e})}})),"custom"===r.dateSource&&React.createElement(an.PanelRow,null,React.createElement(Ul,{name:"customDateSource",label:(0,nt.__)("Custom date source","post-expirator"),defaultValue:r.customDateSource,onChange:function(e,t){h({settingName:"customDateSource",value:t})},variables:s,singleVariableOnly:!1,readOnlyPreview:!0,description:(0,nt.__)("Click the button to choose a custom date source from variables that can provide a date.","post-expirator"),wrapOnPreview:!1,wrapOnEditor:!1,oneLinePreview:!0})),"offset"===r.dateStrategy&&React.createElement(React.Fragment,null,React.createElement(an.PanelRow,null,React.createElement(an.TextControl,{label:(0,nt.__)("Offset","post-expirator"),value:r.dateOffset,onChange:function(e){return h({settingName:"dateOffset",value:e})}})),React.createElement(an.PanelRow,null,React.createElement($l,{offset:r.dateOffset,label:(0,nt.__)("Date Preview","post-expirator"),labelDatePreview:(0,nt.__)("Current Date","post-expirator"),labelOffsetPreview:(0,nt.__)("Computed Date","post-expirator"),setValidationErrorCallback:function(e){e?(g(e),b(!1)):(g(""),b(!0))},setHasPendingValidationCallback:function(){},setHasValidDataCallback:function(e){b(e),e&&g("")},compactView:!0})),!m&&React.createElement(an.PanelRow,null,React.createElement("div",{className:"publishpress-future-notice publishpress-future-notice-error"},(0,nt.__)("Error: ","post-expirator")," ",y)),React.createElement(an.PanelRow,null,React.createElement(an.Button,{variant:"link",onClick:function(){return p((function(e){return!e}))}},(0,nt.__)("Click for more information","post-expirator"),d&&React.createElement(an.Popover,null,React.createElement("div",{className:"settings-field-help-popover"},React.createElement(an.Button,{variant:"tertiary",icon:"no-alt"}),React.createElement("div",{dangerouslySetInnerHTML:{__html:(0,nt.sprintf)(Kl((0,nt.__)("For more information on formatting, see the %sPHP strtotime function%s. For example, you could enter %s+1 month%s or %s+1 week 2 days 4 hours 2 seconds%s or %snext Thursday%s. Please use only phrases in English.","post-expirator")),"<a href='https://www.php.net/manual/en/function.strtotime.php' target='_blank'>","</a>","<code>","</code>","<code>","</code>","<code>","</code>")}})))))))))};const nc=tc;function rc(e){return rc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rc(e)}function oc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ac(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oc(Object(n),!0).forEach((function(t){ic(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ic(e,t,n){return(t=function(e){var t=function(e){if("object"!=rc(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=rc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==rc(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const lc=function(e){var t,n=e.name,r=e.label,o=e.defaultValue,i=e.onChange,l=e.variables,c=void 0===l?[]:l,u=e.settings,d=(0,a.useMemo)((function(){return c}),[c]),f=new Date;f.setDate(f.getDate()+3);var m=new Date;m.setDate(m.getDate()+7),o=ac({whenToRun:"now",dateSource:"calendar",recurrence:"single",repeatUntil:"forever",repeatInterval:"3600",repeatIntervalUnit:"seconds",repeatTimes:"5",repeatUntilDate:m,unique:!0,priority:"10",specificDate:f,dateOffset:"+7 days"},o);var b=(0,s.useSelect)((function(e){return{isAdvancedSettingsEnabled:e(E).isFeatureActive(p.yY)}})).isAdvancedSettingsEnabled;!["calendar","event","step","custom"].includes(o.dateSource)&&(o.customDateSource=o.dateSource,o.dateSource="custom");var v=null==u?void 0:u.hidePreventDuplicateScheduling,y=(0,Ti.useCallback)((function(e){var t=e.settingName,r=e.value,a=ac({},o);a[t]=r,i&&i(n,a)}),[o,n,i]),g=(0,Ti.useCallback)((function(e,t){t.whenToRun=t.dateStrategy,delete t.dateStrategy,i&&i(n,ac(ac({},o),t))}),[o,n,i]),h=In();return React.createElement(React.Fragment,null,React.createElement(an.__experimentalVStack,null,React.createElement(tc,{name:n,label:r,defaultValue:ac(ac({},o),{},{dateStrategy:o.whenToRun}),onChange:g,variables:c,settings:{hideDateSources:null==u?void 0:u.hideDateSources}}),!h&&React.createElement(React.Fragment,null,React.createElement(an.PanelRow,{className:"margin-bottom-0"},React.createElement(ol,{link:"https://publishpress.com/links/future-workflow-inspector"},React.createElement(nl,{label:(0,nt.__)("Repeating Action","post-expirator"),disabled:!0}))),React.createElement(an.PanelRow,{className:"margin-top-0"},React.createElement(hl,{text:(0,nt.__)("Choose how often this task should repeat. Select 'Non-repeating' for a one-time action or set an interval for automatic recurrence.","post-expirator")}))),React.createElement(an.Slot,{name:"DateOffsetAfterDateSourceField",fillProps:{onChangeSetting:y,defaultValue:o}}),b&&React.createElement(React.Fragment,null,!v&&React.createElement(React.Fragment,null,React.createElement(an.PanelRow,null,React.createElement(zl,{name:"uniqueIdExpression",label:(0,nt.__)("Unique Task Identifier","post-expirator"),defaultValue:null!==(t=o.uniqueIdExpression)&&void 0!==t?t:"",onChange:function(e,t){y({settingName:"uniqueIdExpression",value:t})},variables:d,description:(0,nt.__)("Define a unique ID to detect and prevent duplicate tasks.","post-expirator"),oneLinePreview:!0,wrapOnPreview:!1,wrapOnEditor:!1,helpUrl:"https://publishpress.com/docs/schedule-delay/#preventing-duplicate-scheduled-tasks-task-identification-guide"}))))))};function cc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const sc=function(e){var t,n,r,o,i,l=e.name,c=e.label,s=e.defaultValue,u=e.onChange,d=e.variables,p=void 0===d?[]:d,f=(o=(0,a.useState)(),i=2,function(e){if(Array.isArray(e))return e}(o)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(o,i)||function(e,t){if(e){if("string"==typeof e)return cc(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cc(e,t):void 0}}(o,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=f[0],b=f[1],v=function(e,t){u&&u(e,t)};null!==(t=s)&&void 0!==t&&t.dataToOutput&&"{{all-input}}"===(s={expression:"{{".concat(s.dataToOutput,"}}")}).expression&&(s.expression="{{input}}"),null!==(n=s)&&void 0!==n&&n.expression&&"{{custom-data}}"===(null===(r=s)||void 0===r?void 0:r.expression)&&(s={expression:s.customData}),(0,a.useEffect)((function(){var e;"{{input}}"===(null===(e=s)||void 0===e?void 0:e.expression)?b("input"):b("custom-data")}),[]);var y=[{label:(0,nt.__)("All received input","post-expirator"),value:"input"},{label:(0,nt.__)("Custom data","post-expirator"),value:"custom-data"}],g=(0,a.useCallback)((function(e){b(e),"input"===e?v(l,{expression:"{{input}}"}):(s.expression="",v(l,{expression:s.expression}))}),[v,l,s]);return React.createElement(React.Fragment,null,React.createElement(an.__experimentalVStack,null,React.createElement(an.RadioControl,{options:y,label:(0,nt.__)("Select the data to output","post-expirator"),selected:m,onChange:g}),"custom-data"===m&&React.createElement(Ul,{name:l,label:c,defaultValue:s||{expression:"{{input}}"},onChange:v,variables:p})))},uc=function(e){var t=e.name,n=e.label,r=e.defaultValue,o=e.onChange,a=(e.variables,[{label:(0,nt.__)("No color","post-expirator"),value:"default"},{label:(0,nt.__)("Green","post-expirator"),value:"green"},{label:(0,nt.__)("Orange","post-expirator"),value:"orange"},{label:(0,nt.__)("Red","post-expirator"),value:"red"},{label:(0,nt.__)("Blue","post-expirator"),value:"blue"},{label:(0,nt.__)("Purple","post-expirator"),value:"purple"},{label:(0,nt.__)("Gray","post-expirator"),value:"gray"}]);return React.createElement(React.Fragment,null,React.createElement(an.__experimentalVStack,null,React.createElement(an.SelectControl,{label:n,options:a,value:r||"default",onChange:function(e){return function(e){var n=e.value;o&&o(t,n)}({value:e})}})))},dc=function(e){var t=e.name,n=e.label,r=e.defaultValue,o=e.onChange,a=e.settings,i=(e.variables,e.helpUrl),l=e.description;r||(r="");var c=(null==a?void 0:a.placeholder)||"";return React.createElement(React.Fragment,null,React.createElement(an.__experimentalVStack,null,React.createElement(an.TextControl,{label:n,value:r||"",onChange:function(e){return function(e){var n=e.value;o&&o(t,n)}({value:e})},placeholder:c}),l&&React.createElement(hl,{text:l,helpUrl:i})))};function pc(e){return pc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pc(e)}function fc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mc(e,t,n){return(t=function(e){var t=function(e){if("object"!=pc(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=pc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==pc(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const bc=function(e){var t,n,r,o,i,l,c,u=e.name,d=(e.label,e.defaultValue),p=e.onChange,f=e.settings,m=futureWorkflowEditor.taxonomies,b=(null===(t=d)||void 0===t?void 0:t.taxonomy)||(null===(n=m[0])||void 0===n?void 0:n.value),v=(0,s.useSelect)((function(e){return{taxonmoyTerms:e(tn).getTaxonomyTerms(b)}})).taxonmoyTerms,y=(0,s.useDispatch)(tn).fetchTaxonomyTerms,g=f&&!0===(null==f?void 0:f.optionToSelectAll),h=f&&(null==f?void 0:f.labelOptionToSelectAll),w=function(e){var t=e.settingName,n=e.value,r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fc(Object(n),!0).forEach((function(t){mc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},d);r[t]=n,p&&p(u,r)};return(0,a.useEffect)((function(){d||(d={taxonomy:b,terms:[]},w({settingName:"taxonomy",value:b}))}),[]),(0,a.useEffect)((function(){y(b)}),[b]),React.createElement(React.Fragment,null,React.createElement(an.__experimentalVStack,null,React.createElement(an.SelectControl,{label:(0,nt.__)("Taxonomy","post-expirator"),value:null===(r=d)||void 0===r?void 0:r.taxonomy,options:m,onChange:function(e){return w({settingName:"taxonomy",value:e})}}),g&&React.createElement(React.Fragment,null,React.createElement(an.RadioControl,{label:(0,nt.__)("Select the terms","post-expirator"),selected:(null===(o=d)||void 0===o?void 0:o.selectAll)||"0",options:[{label:h,value:"1"},{label:(0,nt.__)("Specific terms","post-expirator"),value:"0"}],onChange:function(e){return w({settingName:"selectAll",value:e})}}),"1"!==(null===(i=d)||void 0===i?void 0:i.selectAll)&&v.length&&React.createElement($i,{label:(0,nt.__)("Terms","post-expirator"),value:(null===(l=d)||void 0===l?void 0:l.terms)||[],suggestions:v,expandOnFocus:!0,autoSelectFirstMatch:!0,onChange:function(e){return w({settingName:"terms",value:e})}})),!g&&v.length&&React.createElement($i,{label:(0,nt.__)("Terms","post-expirator"),value:(null===(c=d)||void 0===c?void 0:c.terms)||[],suggestions:v,expandOnFocus:!0,autoSelectFirstMatch:!0,onChange:function(e){return w({settingName:"terms",value:e})},className:"future-taxonomy-terms"})))};function vc(e){return vc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vc(e)}function yc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gc(e,t,n){return(t=function(e){var t=function(e){if("object"!=vc(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=vc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==vc(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const hc=function(e){var t,n,r=e.name,o=(e.label,e.defaultValue),i=e.onChange,l=(e.settings,futureWorkflowEditor.postStatuses),c=function(e){var t=e.settingName,n=e.value,a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yc(Object(n),!0).forEach((function(t){gc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o);a[t]=n,i&&i(r,a)},s=null===(t=l[0])||void 0===t?void 0:t.value;return(0,a.useEffect)((function(){o||(o={newStatus:s},c({settingName:"status",value:s}))}),[]),React.createElement(React.Fragment,null,React.createElement(an.__experimentalVStack,null,React.createElement(an.SelectControl,{label:(0,nt.__)("New Status","post-expirator"),value:null===(n=o)||void 0===n?void 0:n.status,options:l,onChange:function(e){return c({settingName:"status",value:e})}})))},wc=function(e){var t=e.name,n=e.label,r=e.defaultValue,o=e.settings,a=e.onChange,i=(e.variables,function(e){var n=e.value;a&&a(t,n)});r||(r="");var l=(null==o?void 0:o.placeholder)||"";return React.createElement(React.Fragment,null,React.createElement(an.__experimentalVStack,null,React.createElement(an.TextareaControl,{label:n,value:r||"",onChange:function(e){return i({value:e})},placeholder:l})))};function _c(e){return _c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_c(e)}function Ec(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sc(e,t,n){return(t=function(e){var t=function(e){if("object"!=_c(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=_c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_c(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xc(e){var t=e.name,n=e.label,r=e.defaultValue,o=e.onChange,a=e.tree;return React.createElement(React.Fragment,null,React.createElement(an.__experimentalVStack,null,React.createElement(Bl,{tree:a,label:n,selectedId:null==r?void 0:r.variable,onChange:function(e){return function(e){var n=e.settingName,a=e.value,i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ec(Object(n),!0).forEach((function(t){Sc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ec(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r);i[n]=a,o&&o(t,i)}({settingName:"variable",value:e})}})))}function Rc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const kc=function(e){var t=e.name,n=e.label,r=e.defaultValue,o=e.onChange,a=e.variables;a=J(a,["post","array:integer"]);var i,l=[{id:"",name:"",children:[]}].concat(function(e){if(Array.isArray(e))return Rc(e)}(i=a)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(i)||function(e,t){if(e){if("string"==typeof e)return Rc(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rc(e,t):void 0}}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return React.createElement(xc,{tree:l,name:t,label:n,defaultValue:r,onChange:o})};function Oc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const Ac=function(e){var t=e.name,n=e.label,r=e.defaultValue,o=e.onChange,a=e.variables;a=J(a,["workflow","array:integer"]);var i,l=[{id:"",name:"",children:[]}].concat(function(e){if(Array.isArray(e))return Oc(e)}(i=a)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(i)||function(e,t){if(e){if("string"==typeof e)return Oc(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Oc(e,t):void 0}}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return React.createElement(xc,{tree:l,name:t,label:n,defaultValue:r,onChange:o})};function Cc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const Tc=function(e){var t,n=e.name,r=e.label,o=e.defaultValue,a=e.onChange,i=e.settingsSchema[0].fields[2].options,l=function(e){if(Array.isArray(e))return Cc(e)}(t=i=i.map((function(e){return{id:e.value,name:e.label,children:[]}})))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return Cc(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cc(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();return React.createElement(xc,{tree:l,name:n,label:r,defaultValue:o,onChange:a})};var Pc=n(9852),Nc=n(2288);function jc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Dc=function(e){var t,n,r=e.checked,o=e.handleOnChange,i=(t=(0,a.useState)(r||!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return jc(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jc(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=i[0],c=i[1];(0,a.useEffect)((function(){c(r||!1)}),[r]);var u=(0,s.useSelect)((function(e){return{currentConditionalQuery:e(E).getCurrentConditionalQuery()}})).currentConditionalQuery;return React.createElement(React.Fragment,null,u&&u.rules.length>0&&React.createElement(an.CheckboxControl,{label:(0,nt.__)("Not","post-expirator"),checked:l,onChange:function(){var e=!l;c(e),o(e)},className:l?"is-checked":""}))},Ic=function(e){var t=e.label,n=e.handleOnClick;return React.createElement(an.Button,{onClick:n,variant:"secondary"},t)},Lc=function(e){e.label;var t=e.handleOnClick;return React.createElement(an.Button,{onClick:t,variant:"secondary",className:"conditional-editor-modal-remove-element"},React.createElement(an.Dashicon,{icon:"trash",size:16}))},Fc=function(e){var t=e.label,n=e.value,r=e.options,o=e.handleOnChange;return React.createElement(an.SelectControl,{label:t,value:n,options:r,onChange:o})},Wc=function(e){var t=e.label,n=e.value,r=e.options,o=e.handleOnChange;return React.createElement(an.SelectControl,{label:t,value:n,options:r,onChange:o,className:"conditional-editor-modal-operator-selector"})},Vc=function(e){var t=e.defaultValue,n=e.editorRef,r=e.editorProps,o=e.editorOptions;return null!=t&&t.natural?React.createElement(wl.Ay,{ref:n,mode:"handlebars",theme:"textmate",name:"expression-builder-natural-language",className:"read-only-editor settings-panel",wrapEnabled:!0,value:(null==t?void 0:t.natural)||"",editorProps:r,readOnly:!0,setOptions:o}):null},Mc=n(840),Uc=n(5008);function zc(e){return zc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zc(e)}function Bc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bc(Object(n),!0).forEach((function(t){Gc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gc(e,t,n){return(t=function(e){var t=function(e){if("object"!=zc(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=zc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==zc(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function $c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}n(420);var Kc=n(5695),Qc={};Qc.styleTagTransform=jl(),Qc.setAttributes=Cl(),Qc.insert=Ol().bind(null,"head"),Qc.domAPI=Rl(),Qc.insertStyleElement=Pl(),Sl()(Kc.A,Qc),Kc.A&&Kc.A.locals&&Kc.A.locals;var Yc=n(5503),Jc={};function Xc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Zc(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zc(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Jc.styleTagTransform=jl(),Jc.setAttributes=Cl(),Jc.insert=Ol().bind(null,"head"),Jc.domAPI=Rl(),Jc.insertStyleElement=Pl(),Sl()(Yc.A,Jc),Yc.A&&Yc.A.locals&&Yc.A.locals;var es={$blockScrolling:!0},ts={enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,showGutter:!1,showPrintMargin:!1,showLineNumbers:!1,showInvisibles:!1,highlightActiveLine:!1},ns={addGroup:{label:(0,nt.__)("Add Group","post-expirator")},addRule:{label:(0,nt.__)("Add Rule","post-expirator")}},rs={queryBuilder:"queryBuilder-branches"},os=function(e){var t=e.FieldComponent,n=e.ValueComponent,r=e.modalTitle,o=void 0===r?(0,nt.__)("Condition","post-expirator"):r,i=e.modalDescription,l=void 0===i?(0,nt.__)("Create rules that will continue the workflow only if certain conditions are met.","post-expirator"):i,c=e.buttonText,u=void 0===c?(0,nt.__)("Edit condition","post-expirator"):c,d=e.proFeatureMessage,p=void 0===d?(0,nt.__)("Conditional logic is a Pro feature. Upgrade to create advanced conditions for your workflows.","post-expirator"):d,f=e.onQueryChange,m=void 0===f?null:f,b=e.isProFeature,v=void 0!==b&&b,y=e.defaultField,g=void 0===y?"":y,h=e.queryFields,w=void 0===h?null:h;return function(e){var r=e.name,i=e.label,c=e.defaultValue,d=e.onChange,f=e.variables,b=function(e){var t,n,r=e.defaultValue,o=e.name,i=e.onChange,l=e.variables,c=(t=(0,a.useState)((0,Mc.parseJsonLogic)((null==r?void 0:r.json)||"")),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return qc(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qc(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=c[0],u=c[1],d=(0,a.useCallback)((function(){var e=(0,Uc.OJ)(s,{format:"jsonlogic",parseNumbers:!0}),t=(0,Uc.OJ)(s,{format:"natural_language",parseNumbers:!0,fields:l,getOperators:function(){return Uc.lV}});return Hc(Hc({},r),{},{json:e,natural:t})}),[s,r,i,o,l]);return{query:s,setQuery:u,formatCondition:d}}({defaultValue:c,name:r,onChange:d,variables:null!=w?w:f,onQueryChange:m}),y=b.query,h=b.setQuery,_=b.formatCondition,S=function(e){var t,n,r=e.onChange,o=e.name,i=e.formatCondition,l=e.isModalOpenByDefault,c=void 0!==l&&l,s=(t=(0,a.useState)(c),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return $c(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$c(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=s[0],d=s[1],p=(0,a.useCallback)((function(){r&&r(o,i()),m()}),[m,r,o,i]),f=(0,a.useCallback)((function(){d(!0)}),[d]),m=(0,a.useCallback)((function(){d(!1)}),[d]);return{isModalOpen:u,onCloseModal:p,openModal:f,closeModal:m,setIsModalOpen:d}}({onChange:d,name:r,formatCondition:_}),x=S.isModalOpen,R=S.onCloseModal,k=S.openModal,O=function(){var e=(0,a.useRef)(null);return(0,a.useEffect)((function(){e.current&&e.current.editor.setOption("indentedSoftWrap",!1)}),[e]),[e]}(),A=Xc(O,1)[0],C=Xc([(0,a.useCallback)((function(e){e&&e.rules&&function e(t){Array.isArray(t)&&t.forEach((function(t){var n;t.rules?e(t.rules):t.field&&(t.field=("string"!=typeof(n=t.field)||n.startsWith("{{")&&n.endsWith("}}"),n))}))}(e.rules)}),[])],1)[0],T=(0,s.useDispatch)(E).setCurrentConditionalQuery,P=(0,a.useCallback)((function(e){return g}),[]);(0,a.useEffect)((function(){C(y)}),[]),(0,a.useEffect)((function(){T(y)}),[y]);var N={fieldSelector:t,valueEditor:n,notToggle:Dc,addRuleAction:Ic,addGroupAction:Ic,removeGroupAction:Lc,removeRuleAction:Lc,combinatorSelector:Fc,operatorSelector:Wc},j=(0,a.useMemo)((function(){return{variables:f,name:r,label:i}}),[f,r,i]),D=In();return React.createElement("div",{className:"conditional-editor"},React.createElement(an.Button,{onClick:k,variant:"secondary"},u),React.createElement(Vc,{defaultValue:c,editorRef:A,editorProps:es,editorOptions:ts}),!D&&v&&React.createElement("div",{className:"conditional-editor-pro-feature-message"},React.createElement("p",{className:"description margin-top"},p)),x&&React.createElement(an.Modal,{onClose:R,title:o,onRequestClose:R,className:"workflow-editor-modal conditional-editor-modal"},React.createElement("p",null,l),React.createElement(Nc.qy,null,React.createElement(Pc.oS,{fields:f,onQueryChange:h,query:y,addRuleToNewGroups:!0,parseNumbers:"strict-limited",showCombinatorsBetweenRules:!0,showNotToggle:!0,enableDragAndDrop:!0,controlClassnames:rs,translations:ns,controlElements:N,context:j,getDefaultField:P})),React.createElement(_l,{onClose:R})))}},as=function(e){var t=e.value,n=e.handleOnChange,r=e.context,o=e.readOnlyPreview,a=e.singleVariableOnly,i=e.autoComplete,l=void 0!==i&&i,c=e.completers,s=void 0===c?[]:c;return"global.site"===t&&(t=""),React.createElement("div",null,React.createElement(zl,{name:r.name,label:r.label,defaultValue:{expression:t},onChange:function(e,t){n&&n(t.expression)},variables:r.variables,isInline:!0,readOnlyPreview:o||!1,singleVariableOnly:a||!1,oneLinePreview:!0,wrapOnPreview:!1,wrapOnEditor:!1,autoComplete:l,completers:s}))},is=function(e){var t=e.value,n=e.handleOnChange,r=e.context;return React.createElement(as,{value:t,handleOnChange:n,context:r,readOnlyPreview:!0,singleVariableOnly:!1})};const ls={getCompletions:function(e,t,n,r,o){o(null,futureWorkflowEditor.postTypes.map((function(e){return{caption:e.value,value:e.value,meta:(0,nt.__)("Post Type","post-expirator")}})))}},cs={getCompletions:function(e,t,n,r,o){o(null,futureWorkflowEditor.postStatuses.map((function(e){return{caption:e.value,value:e.value,meta:(0,nt.__)("Post Status","post-expirator")}})))}};function ss(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var us=function(e){var t,n,r=e.value,o=e.handleOnChange,i=e.context,l=e.rule,c=(t=(0,a.useState)([]),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return ss(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ss(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=c[0],u=c[1],d=(0,a.useMemo)((function(){return ne(l.field,i.variables)}),[l,i]);return(0,a.useEffect)((function(){var e=[];switch(d){case"post_type":e.push(ls);break;case"post_status":e.push(cs)}u(e)}),[d]),"null"===l.operator||"notNull"===l.operator?React.createElement("div",null):React.createElement(as,{options:d,value:r,handleOnChange:o,context:i,readOnlyPreview:!1,autoComplete:!0,completers:s})};const ds=os({FieldComponent:is,ValueComponent:us,isProFeature:!0,defaultField:"{{global.user.id}}"}),ps=function(e){var t=e.name,n=(e.label,e.defaultValue),r=e.onChange,o=(e.variables,[{name:(0,nt.__)("Debug","post-expirator"),id:"debug"},{name:(0,nt.__)("Info","post-expirator"),id:"info"},{name:(0,nt.__)("Notice","post-expirator"),id:"notice"},{name:(0,nt.__)("Warning","post-expirator"),id:"warning"},{name:(0,nt.__)("Error","post-expirator"),id:"error"},{name:(0,nt.__)("Critical","post-expirator"),id:"critical"},{name:(0,nt.__)("Alert","post-expirator"),id:"alert"}]);return React.createElement(React.Fragment,null,React.createElement(an.__experimentalVStack,null,React.createElement(an.TreeSelect,{label:(0,nt.__)("Level","post-expirator"),tree:o,selectedId:n||"debug",onChange:function(e){return function(e){var n=e.value;r&&r(t,n)}({settingName:"level",value:e})}})))},fs=function(e){var t=e.name,n=e.label,r=e.defaultValue,o=e.onChange,a=(e.settings,e.description),i=(e.variables,function(e){var n=e.value;o&&o(t,n)});return React.createElement(React.Fragment,null,React.createElement(an.__experimentalVStack,null,React.createElement(an.ToggleControl,{label:n,checked:r||!1,onChange:function(e){return i({value:e})}}),a&&React.createElement("p",{className:"description"},a)))};function ms(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const bs=function(e){var t,n,r=e.name,o=e.label,i=e.popoverLabel,l=e.valuePreview,c=e.onClosePopover,s=e.children,u=e.isLoading,d=e.autoOpen,p=(t=(0,a.useState)(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return ms(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ms(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=p[0],m=p[1];(0,a.useEffect)((function(){d&&m(!0)}),[d]);var b=(0,a.useCallback)((function(){m(!1),c&&c()}),[c]);return i||(i=o),React.createElement(React.Fragment,null,React.createElement(an.__experimentalHStack,{className:"workflow-editor-panel__row"},React.createElement("div",{className:"workflow-editor-panel__row-label"},o),React.createElement("div",{className:"workflow-editor-panel__row-control"},React.createElement(an.Button,{variant:"tertiary",onClick:function(){return m(!0)},className:"is-compact",disabled:u},u?React.createElement(an.Spinner,null):l))),f&&React.createElement(Li,{onClose:b,className:"workflow-editor-inspector-".concat(r,"-popover"),title:i},s))},vs=function(e){var t=e.name,n=e.label,r=e.valuePreview,o=e.onClosePopover,i=e.checkboxLabel,l=e.defaultValue,c=e.onChange,s=e.children,u=e.onUncheckUpdate,d=e.isLoading,p=(0,a.useCallback)((function(e){l.update=e,c(t,l),!e&&u&&u()}),[c,t,l,u]);return React.createElement(React.Fragment,null,React.createElement(bs,{name:t,label:n,valuePreview:r,onClosePopover:o,isLoading:d,children:React.createElement(React.Fragment,null,React.createElement(an.CheckboxControl,{label:i,checked:l.update,onChange:p}),l.update&&React.createElement(React.Fragment,null,s))}))};function ys(e){return ys="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ys(e)}function gs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gs(Object(n),!0).forEach((function(t){ws(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ws(e,t,n){return(t=function(e){var t=function(e){if("object"!=ys(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ys(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ys(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _s=function(e){var t=e.name,n=e.label,r=e.defaultValue,o=e.onChange,i=e.variables,l=void 0===i?[]:i,c=e.checkboxLabel,s=(e.onClosePopover,new Date);s.setDate(s.getDate()+3),r=hs({update:!1,dateStrategy:"date",dateSource:"calendar",specificDate:s,dateOffset:"+7 days"},r);var u=(0,a.useCallback)((function(e){e.settingName;var n=e.value,a=hs(hs({},r),n);o&&o(t,a)}),[r,t,o]);return React.createElement(React.Fragment,null,React.createElement(vs,{name:t,label:n,defaultValue:r,valuePreview:function(){var e,t;if(r.update&&("date"===(null===(e=r)||void 0===e?void 0:e.dateStrategy)||"offset"===(null===(t=r)||void 0===t?void 0:t.dateStrategy))){var n,o,a,i="";if(null!==(n=r)&&void 0!==n&&n.specificDate&&"calendar"===(null===(o=r)||void 0===o?void 0:o.dateSource)&&(i=function(e){if(e){var t=futureWorkflowEditor.dateFormat,n=futureWorkflowEditor.timeFormat;return wp.date.format("".concat(t," ").concat(n),new Date(e))}return""}(r.specificDate)),"event"===r.dateSource&&(i=(0,nt.__)("When the trigger is activated","post-expirator")),"step"===r.dateSource&&(i=(0,nt.__)("When the step is activated","post-expirator")),"custom"===r.dateSource)i=(null===(a=r.customDateSource)||void 0===a?void 0:a.expression)||(0,nt.__)("Custom date source","post-expirator");return"offset"===r.dateStrategy&&(i+=", ".concat(r.dateOffset)),i}return(0,nt.__)("Do not update","post-expirator")}(),checkboxLabel:c,onChange:o,onUncheckUpdate:function(){return o(t,null)}},React.createElement(an.__experimentalVStack,null,React.createElement(nc,{name:t,label:n,defaultValue:r,onChange:function(e,n){return u({settingName:t,value:n})},variables:l,settings:{hideDateStrategy:["now"]}}))))};function Es(e){return Es="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Es(e)}function Ss(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xs(e,t,n){return(t=function(e){var t=function(e){if("object"!=Es(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Es(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Es(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Rs=function(e){var t=e.name,n=e.label,r=e.defaultValue,o=e.onChange,i=e.variables,l=void 0===i?[]:i,c=e.checkboxLabel;r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ss(Object(n),!0).forEach((function(t){xs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ss(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({expression:"",update:!1},r);var s=(0,a.useMemo)((function(){return r.update?""===r.expression?(0,nt.__)("Clear content","post-expirator"):r.expression:(0,nt.__)("Do not update","post-expirator")}),[r]);return React.createElement(React.Fragment,null,React.createElement(vs,{name:t,label:n,valuePreview:s,defaultValue:r,checkboxLabel:c,onChange:o,onUncheckUpdate:function(){return o(t,null)}},React.createElement(an.__experimentalVStack,null,React.createElement(Ul,{name:t,label:n,defaultValue:r,onChange:function(e,n){return o(t,n)},variables:l}))))},ks=n(8306);function Os(e){return Os="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Os(e)}function As(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cs(e,t,n){return(t=function(e){var t=function(e){if("object"!=Os(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Os(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Os(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ts(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ps(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ps(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ps(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ns=window.futureWorkflowEditor,js=Ns.apiUrl,Ds=Ns.nonce,Is=null,Ls=null,Fs=function(e){var t,n=e.name,r=e.label,o=e.defaultValue,i=e.onChange,l=e.checkboxLabel,c=Ts((0,a.useState)([]),2),s=c[0],u=c[1],d=Ts((0,a.useState)(!1),2),p=d[0],f=d[1];(0,a.useEffect)((function(){f(!0),(Ls?Promise.resolve(Ls):(Is||(Is=(0,ks.A)({path:"".concat(js,"/authors"),headers:{"X-WP-Nonce":Ds}}).then((function(e){return Ls=e}))),Is)).then(u).catch((function(e){dispatch("core/notices").createErrorNotice((0,nt.__)("Unable to load the list of authors. Please try again.","post-expirator"))})).finally((function(){f(!1)}))}),[]),o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?As(Object(n),!0).forEach((function(t){Cs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):As(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({authors:[null===(t=s[0])||void 0===t?void 0:t.id],update:!1},o);var m=(0,a.useMemo)((function(){return function(e){return e.map((function(e){return{value:e.id,label:e.name+" ("+e.email+")"}}))}(s)}),[s]),b=(0,a.useMemo)((function(){return o.update&&0!==o.authors.length?o.authors.map((function(e){var t;return null===(t=s.find((function(t){return parseInt(t.id)===parseInt(e)})))||void 0===t?void 0:t.name})).join(", "):(0,nt.__)("Do not update","post-expirator")}),[o,s]);return React.createElement(React.Fragment,null,React.createElement(vs,{name:n,label:r,valuePreview:b,defaultValue:o,checkboxLabel:l,onChange:i,onUncheckUpdate:function(){return i(n,null)},isLoading:p},React.createElement(an.__experimentalVStack,null,React.createElement(an.SelectControl,{label:(0,nt.__)("Author","post-expirator"),value:o.authors[0],options:m,onChange:function(e){i(n,{authors:[e],update:!0})}}))))};function Ws(e){return Ws="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ws(e)}function Vs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ms(e,t,n){return(t=function(e){var t=function(e){if("object"!=Ws(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ws(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ws(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Us=function(e){var t=e.name,n=e.label,r=e.defaultValue,o=e.onChange,i=e.checkboxLabel;r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vs(Object(n),!0).forEach((function(t){Ms(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({update:!1,commentStatus:"closed",pingStatus:"closed"},r);var l=(0,a.useMemo)((function(){var e=r,t=e.commentStatus,n=e.pingStatus;if(!r.update)return(0,nt.__)("Do not update","post-expirator");var o=n||"closed";return{"open:closed":(0,nt.__)("Comments only","post-expirator"),"closed:closed":(0,nt.__)("Closed","post-expirator"),"closed:open":(0,nt.__)("Pings only","post-expirator"),"open:open":(0,nt.__)("Open","post-expirator")}["".concat(t,":").concat(o)]||(0,nt.__)("Changed...","post-expirator")}),[r]),c=[{label:(0,nt.__)("Open","post-expirator"),value:"open",description:(0,nt.__)("Visitors can add new comments and replies.","post-expirator")},{label:(0,nt.__)("Closed","post-expirator"),value:"closed",description:(0,nt.__)("Visitors can not add new comments or replies. Existing comments remain visible.","post-expirator")}],s=(0,a.useCallback)((function(e){o(t,{update:!0,commentStatus:e,pingStatus:r.pingStatus})}),[o,t,r]),u=(0,a.useCallback)((function(e){o(t,{update:!0,pingStatus:e?"open":"closed",commentStatus:r.commentStatus})}),[o,t,r]);return React.createElement(React.Fragment,null,React.createElement(vs,{name:t,label:n,valuePreview:l,defaultValue:r,onChange:o,checkboxLabel:i,onUncheckUpdate:function(){return o(t,null)}},React.createElement(an.__experimentalVStack,null,React.createElement(an.RadioControl,{options:c,selected:r.commentStatus,onChange:s}),React.createElement(an.CheckboxControl,{label:(0,nt.__)("Enable pinbacks & trackbacks","post-expirator"),checked:"open"===r.pingStatus,onChange:u}),React.createElement(an.ExternalLink,{href:"https://wordpress.org/documentation/article/trackbacks-and-pingbacks/"},(0,nt.__)("Learn more about pinbacks & trackbacks","post-expirator")))))};function zs(e){return zs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zs(e)}function Bs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hs(e,t,n){return(t=function(e){var t=function(e){if("object"!=zs(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=zs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==zs(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Gs=function(e){var t=e.name,n=(e.label,e.defaultValue),r=e.onChange,o=e.settings,a=e.variables,i=function(e){var o=e.settingName,a=e.value,i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bs(Object(n),!0).forEach((function(t){Hs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);i[o]=a,r&&r(t,i)},l=function(e){var t;null!==(t=n[e])&&void 0!==t&&t.update||i({settingName:e,value:null})};return React.createElement(an.__experimentalVStack,{className:"workflow-editor-panel"},React.createElement(_s,{name:"date",label:(0,nt.__)("Post Date","post-expirator"),defaultValue:null==n?void 0:n.date,onChange:function(e,t){return i({settingName:"date",value:t})},settings:o,variables:a,onClosePopover:function(){return l("date")},checkboxLabel:(0,nt.__)("Update the post date","post-expirator")}),React.createElement(Rs,{name:"title",label:(0,nt.__)("Post Title","post-expirator"),defaultValue:null==n?void 0:n.title,onChange:function(e,t){return i({settingName:"title",value:t})},settings:o,variables:a,onClosePopover:function(){return l("title")},checkboxLabel:(0,nt.__)("Update the post title","post-expirator")}),React.createElement(Rs,{name:"name",label:(0,nt.__)("Post Slug","post-expirator"),defaultValue:null==n?void 0:n.name,onChange:function(e,t){return i({settingName:"name",value:t})},settings:o,variables:a,onClosePopover:function(){return l("name")},checkboxLabel:(0,nt.__)("Update the post slug","post-expirator")}),React.createElement(Rs,{name:"content",label:(0,nt.__)("Post Content","post-expirator"),defaultValue:null==n?void 0:n.content,onChange:function(e,t){return i({settingName:"content",value:t})},settings:o,variables:a,onClosePopover:function(){return l("content")},checkboxLabel:(0,nt.__)("Update the post content","post-expirator")}),React.createElement(Rs,{name:"excerpt",label:(0,nt.__)("Post Excerpt","post-expirator"),defaultValue:null==n?void 0:n.excerpt,onChange:function(e,t){return i({settingName:"excerpt",value:t})},settings:o,variables:a,onClosePopover:function(){return l("excerpt")},checkboxLabel:(0,nt.__)("Update the post excerpt","post-expirator")}),React.createElement(Us,{name:"discussion",label:(0,nt.__)("Post Discussion","post-expirator"),defaultValue:null==n?void 0:n.discussion,onChange:function(e,t){return i({settingName:"discussion",value:t})},onClosePopover:function(){return l("discussion")},checkboxLabel:(0,nt.__)("Update the post discussion","post-expirator")}),React.createElement(Rs,{name:"password",label:(0,nt.__)("Post Password","post-expirator"),defaultValue:null==n?void 0:n.password,onChange:function(e,t){return i({settingName:"password",value:t})},settings:o,variables:a,onClosePopover:function(){return l("password")},checkboxLabel:(0,nt.__)("Update the post password","post-expirator")}),React.createElement(Fs,{name:"author",label:(0,nt.__)("Post Author","post-expirator"),defaultValue:null==n?void 0:n.author,onChange:function(e,t){return i({settingName:"author",value:t})},settings:o,variables:a,onClosePopover:function(){return l("author")},checkboxLabel:(0,nt.__)("Update the post author","post-expirator")}))};function qs(e){return qs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qs(e)}function $s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ks(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$s(Object(n),!0).forEach((function(t){Qs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qs(e,t,n){return(t=function(e){var t=function(e){if("object"!=qs(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=qs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==qs(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ys=function(e){var t=e.name,n=e.label,r=e.defaultValue,o=e.onChange,a=(e.settings,e.description),i=e.variables,l=void 0===i?[]:i,c=function(e){var n=e.settingName,a=e.value;if(o){var i=Ks(Ks({},r),{},Qs({},n,a));o(t,i)}};return React.createElement(React.Fragment,null,React.createElement(an.__experimentalVStack,null,React.createElement(an.ToggleControl,{label:n,checked:(null==r?void 0:r.enabled)||!1,onChange:function(e){return c({settingName:"enabled",value:e})}}),a&&React.createElement("p",{className:"description"},a),(null==r?void 0:r.enabled)&&React.createElement(zl,{name:"confirmationMessage",label:"Confirmation message",defaultValue:null==r?void 0:r.message,onChange:function(e,t){return c({settingName:"message",value:t})},variables:l})))};function Js(e){return Js="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Js(e)}function Xs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zs(e,t,n){return(t=function(e){var t=function(e){if("object"!=Js(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Js(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Js(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const eu=function(e){var t,n,r,o,i,l=e.name,c=(e.label,e.defaultValue),s=e.onChange,u=e.settings,d=futureWorkflowEditor.userRoles,p=function(e){var t=e.settingName,n=e.value,r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xs(Object(n),!0).forEach((function(t){Zs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},c);r[t]=n,s&&s(l,r)},f=u&&!0===(null==u?void 0:u.acceptsInput),m=u&&!0===(null==u?void 0:u.isUserRoleRequired),b=f?"input":"custom",v="custom"===(null===(t=c)||void 0===t?void 0:t.userSource)||!f;(0,a.useEffect)((function(){c||(c={userSource:b,userRole:[],userId:[]},p({settingName:"userSource",value:b}))}),[]);var y=(null==u||null===(n=u.labels)||void 0===n?void 0:n.userRole)||(0,nt.__)("User Role","post-expirator");y=m?y+" *":y;var g={userRole:(null==u?void 0:u.userRoleDescription)||null,userId:(null==u?void 0:u.userIdDescription)||null};return React.createElement(React.Fragment,null,React.createElement(an.__experimentalVStack,null,f&&React.createElement(an.RadioControl,{label:(0,nt.__)("User selection","post-expirator"),selected:(null===(r=c)||void 0===r?void 0:r.userSource)||b,options:[{label:(0,nt.__)("User received as input","post-expirator"),value:"input"},{label:(0,nt.__)("Custom query","post-expirator"),value:"custom"}],onChange:function(e){return p({settingName:"userSource",value:e})}}),v&&React.createElement(React.Fragment,null,React.createElement(qi,{label:y,value:(null===(o=c)||void 0===o?void 0:o.userRole)||[],suggestions:d,expandOnFocus:!0,autoSelectFirstMatch:!0,onChange:function(e){return p({settingName:"userRole",value:e})}}),(null==g?void 0:g.userRole)&&React.createElement("p",{className:"description"},g.userRole),React.createElement(an.FormTokenField,{label:(0,nt.__)("User ID","post-expirator"),value:(null===(i=c)||void 0===i?void 0:i.userId)||[],onChange:function(e){return p({settingName:"userId",value:e})}}),(null==g?void 0:g.userId)&&React.createElement("p",{className:"description"},g.userId),React.createElement(an.PanelRow,null,React.createElement("p",{className:"description"},(0,nt.__)("Separate multiple values with commas or Enter key.","post-expirator"))),m&&React.createElement(an.PanelRow,null,React.createElement("p",{className:"description"},(0,nt.__)("* Required field","post-expirator"))))))};var tu=["value","handleOnChange","options","context"];function nu(){return nu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nu.apply(null,arguments)}var ru=function(e){var t=e.value,n=e.handleOnChange,r=(e.options,e.context),o=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,tu),a=(0,s.select)(tn).getSelectedNodes(),i=(0,s.select)(tn).getNodeById(a[0]);return r.variables=G(i),React.createElement(is,nu({value:t,handleOnChange:n,context:r,singleVariableOnly:!1},o))},ou=function(e){return React.createElement(us,e)};const au=function(e){if(!e.defaultValue.json){var t=e.stepScopedVariables.find((function(e){return"post"===e.type})),n=function(e,t){var n=e.postType,r=e.postStatus,o=e.postId,a=function(e,n){return e&&0!==e.length?{or:e.map((function(e){return{"==":[{var:"{{".concat(t,".").concat(n,"}}")},e]}}))}:null},i=[],l=a(n,"type");l&&i.push(l);var c=a(r,"status");c&&i.push(c);var s=a(o,"id");return s&&i.push(s),i.length>1?{and:i}:i[0]}(e.defaultValue,t.name),r=(0,Mc.parseJsonLogic)(n);e.defaultValue.json=(0,Uc.OJ)(r,{format:"jsonlogic",parseNumbers:!0}),e.defaultValue.natural=(0,Uc.OJ)(r,{format:"natural_language",parseNumbers:!0,fields:e.variables,getOperators:function(){return Uc.lV}})}return os({FieldComponent:ru,ValueComponent:ou,modalTitle:(0,nt.__)("Post Filter","post-expirator"),modalDescription:(0,nt.__)("Create filters to query specific posts based on conditions.","post-expirator"),buttonText:(0,nt.__)("Edit filters","post-expirator"),defaultField:""})(e)};var iu=[{label:(0,nt.__)("Post ID","post-expirator"),value:"p.ID"},{label:(0,nt.__)("Post Title","post-expirator"),value:"p.post_title"},{label:(0,nt.__)("Post Content","post-expirator"),value:"p.post_content"},{label:(0,nt.__)("Post Excerpt","post-expirator"),value:"p.post_excerpt"},{label:(0,nt.__)("Post Author","post-expirator"),value:"p.post_author"},{label:(0,nt.__)("Post Date","post-expirator"),value:"p.post_date"},{label:(0,nt.__)("Post Status","post-expirator"),value:"p.post_status"},{label:(0,nt.__)("Post Type","post-expirator"),value:"p.post_type"},{label:(0,nt.__)("Post Parent","post-expirator"),value:"p.post_parent"}],lu=["value","handleOnChange","options","context"],cu=function(e){var t=e.value,n=e.handleOnChange;return e.options,e.context,function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}}(e,lu),React.createElement(an.SelectControl,{value:t,options:iu,onChange:n})},su=function(e){return React.createElement(us,e)};const uu=function(e){if(!e.defaultValue.json){var t=function(e){var t=e.postType,n=e.postStatus,r=e.postId,o=function(e,t){return e&&0!==e.length?{or:e.map((function(e){return{"==":[{var:"post.".concat(t)},e]}}))}:null},a=[],i=o(t,"post_type");i&&a.push(i);var l=o(n,"post_status");l&&a.push(l);var c=o(r,"ID");return c&&a.push(c),a.length>1?{and:a}:a[0]}(e.defaultValue),n=(0,Mc.parseJsonLogic)(t);e.defaultValue.json=(0,Uc.OJ)(n,{format:"jsonlogic",parseNumbers:!0,fields:iu}),e.defaultValue.natural=(0,Uc.OJ)(n,{format:"natural_language",parseNumbers:!0,fields:iu,getOperators:function(){return Uc.lV}})}return os({FieldComponent:cu,ValueComponent:su,modalTitle:(0,nt.__)("Post Search Query","post-expirator"),modalDescription:(0,nt.__)("Create a search query to filter posts based on conditions.","post-expirator"),buttonText:(0,nt.__)("Edit query","post-expirator"),defaultField:"",queryFields:iu})(e)};function du(e){return du="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},du(e)}function pu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pu(Object(n),!0).forEach((function(t){mu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mu(e,t,n){return(t=function(e){var t=function(e){if("object"!=du(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=du(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==du(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const bu=function(e){var t=e.name,n=e.label,r=e.defaultValue,o=e.onChange,a=e.settings,i=e.description,l=(e.variables,function(e){var n=e.settingName,a=e.value;if(o){var i=fu(fu({},r),{},mu({},n,a));o(t,i)}});return React.createElement(React.Fragment,null,React.createElement(an.__experimentalVStack,null,React.createElement(an.ToggleControl,{label:n,checked:(null==r?void 0:r.enabled)||!1,onChange:function(e){return l({settingName:"enabled",value:e})}}),i&&React.createElement("p",{className:"description"},i),(null==r?void 0:r.enabled)&&React.createElement(nc,{name:t,label:(0,nt.__)("When to expire","post-expirator"),defaultValue:r,onChange:o,settings:a,description:i})))};function vu(e){return vu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vu(e)}function yu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yu(Object(n),!0).forEach((function(t){hu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hu(e,t,n){return(t=function(e){var t=function(e){if("object"!=vu(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=vu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==vu(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const wu=function(e){var t,n,r,o=e.name,a=e.label,i=e.popoverLabel,l=e.defaultValue,c=e.onChange,s=e.variables,u=void 0===s?[]:s,d=e.onClosePopover,p=e.isLoading,f=e.autoOpen,m=e.withExpression,b=void 0!==m&&m;l=gu({name:"",value:"integer",type:"integer"},l);var v,y,g=[{label:(0,nt.__)("Integer","post-expirator"),value:"integer"},{label:(0,nt.__)("String","post-expirator"),value:"string"},{label:(0,nt.__)("Boolean","post-expirator"),value:"boolean"},{label:(0,nt.__)("Object","post-expirator"),value:"object"},{label:(0,nt.__)("Array","post-expirator"),value:"array"},{label:(0,nt.__)("Post","post-expirator"),value:"post"},{label:(0,nt.__)("User","post-expirator"),value:"user"}],h=function(){var e,t,n,r=(null===(e=l)||void 0===e?void 0:e.type)||(null===(t=l)||void 0===t?void 0:t.value)||"integer";return null===(n=g.find((function(e){return e.value===r})))||void 0===n?void 0:n.label};return React.createElement(bs,{name:o,label:a,popoverLabel:i,valuePreview:null!==(v=l)&&void 0!==v&&null!==(v=v.expression)&&void 0!==v&&v.expression?"".concat(l.name,": ").concat(null!==(y=l)&&void 0!==y&&null!==(y=y.expression)&&void 0!==y&&y.expression?"".concat(l.expression.expression):(0,nt.__)("null","post-expirator")," (").concat(h(),")"):"".concat(l.name,": (").concat(h(),")"),onClosePopover:d,isLoading:p,autoOpen:f},React.createElement(React.Fragment,null,React.createElement(an.TextControl,{label:(0,nt.__)("Argument name","post-expirator"),value:l.name,onChange:function(e){e=e.replace(/[^a-zA-Z0-9_]/g,"").trim(),c(gu(gu({},l),{},{name:e}))},autoFocus:f}),React.createElement(an.SelectControl,{label:(0,nt.__)("Data type","post-expirator"),value:(null===(t=l)||void 0===t?void 0:t.type)||(null===(n=l)||void 0===n?void 0:n.value),options:g,onChange:function(e){c(gu(gu({},l),{},{value:e,type:e}))}}),b&&React.createElement(zl,{name:"expression",label:(0,nt.__)("Value","post-expirator"),defaultValue:null===(r=l)||void 0===r?void 0:r.expression,onChange:function(e,t){c(gu(gu({},l),{},{expression:t}))},variables:u}),React.createElement("p",{className:"description margin-top"},(0,nt.__)("The argument name should only contain letters, numbers and underscores.","post-expirator"))))};var _u=n(8777),Eu={};function Su(e){return function(e){if(Array.isArray(e))return Ru(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||xu(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xu(e,t){if(e){if("string"==typeof e)return Ru(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ru(e,t):void 0}}function Ru(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Eu.styleTagTransform=jl(),Eu.setAttributes=Cl(),Eu.insert=Ol().bind(null,"head"),Eu.domAPI=Rl(),Eu.insertStyleElement=Pl(),Sl()(_u.A,Eu),_u.A&&_u.A.locals&&_u.A.locals;const ku=function(e){var t,n,r=e.name,o=e.label,i=e.defaultValue,l=e.onChange,c=e.settings,s=e.variables,u=void 0===s?[]:s,d=e.helpUrl,p=e.description,f=(t=(0,a.useState)(null),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(t,n)||xu(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=f[0],b=f[1],v=function(e){var t=e.value;l&&l(r,t)};i&&Array.isArray(i)||(i=[]),(0,a.useEffect)((function(){0!==i.length&&i.forEach((function(e){e.value||(e.value=y)}))}),[]);var y="integer";return React.createElement(React.Fragment,null,React.createElement(an.__experimentalVStack,{className:"workflow-editor-panel__row-args-container"},React.createElement("label",{className:"workflow-editor-panel__row-args-label"},o),i.map((function(e,t){return React.createElement("div",{key:"arg-".concat(t),className:"workflow-editor-panel__row-args"},React.createElement(wu,{name:"args[".concat(t,"].name"),label:"#".concat(t+1),popoverLabel:(0,nt.sprintf)((0,nt.__)("Argument #%s","post-expirator"),t+1),defaultValue:e,onChange:function(e){return function(e,t){var n=i.map((function(n,r){return r===e?t:n}));v({value:n,type:n})}(t,e)},autoOpen:m===t,onClosePopover:function(){return b(null)},withExpression:null==c?void 0:c.withExpression,variables:u}),React.createElement(an.Button,{onClick:function(){return function(e){v({value:i.filter((function(t,n){return n!==e}))})}(t)},isSmall:!0,iconSize:16,icon:"trash"}))})),0===i.length&&React.createElement("div",{className:"workflow-editor-panel__row-args-empty"},(0,nt.__)("No arguments added to the action.","post-expirator")),React.createElement(an.Button,{onClick:function(){v({value:[].concat(Su(i),[{name:"",value:y,type:y}])}),b(i.length)},iconSize:16,icon:"plus",variant:"tertiary"},(0,nt.__)("Add a new argument","post-expirator")),p&&React.createElement(hl,{text:p,helpUrl:d})))},Ou=function(e){var t=e.name,n=e.label,r=e.defaultValue,o=e.onChange,a=e.settings,i=(e.variables,e.helpUrl),l=e.description,c=function(e){var n=e.value;n=parseInt(n),o&&o(t,n)};r=parseInt(r),isNaN(r)&&(r=0);var s=(null==a?void 0:a.placeholder)||"";return React.createElement(React.Fragment,null,React.createElement(an.__experimentalVStack,null,React.createElement(an.TextControl,{label:n,value:r||"",onChange:function(e){return c({value:e})},placeholder:s,onKeyDown:function(e){var t=e.shiftKey?10:1;if("ArrowUp"===e.key){e.preventDefault();var n=(parseInt(r)||0)+t;c({value:n})}else if("ArrowDown"===e.key){e.preventDefault();var o=(parseInt(r)||0)-t;c({value:o})}}}),l&&React.createElement(hl,{text:l,helpUrl:i})))},Au=function(e){switch(e.type){case"postQuery":return React.createElement(Zi,e);case"postStatus":return React.createElement(hc,e);case"taxonomyTerms":return React.createElement(bc,e);case"schedule":return React.createElement(lc,e);case"toggle":return React.createElement(fs,e);case"debugData":return React.createElement(sc,e);case"rayColor":return React.createElement(uc,e);case"text":return React.createElement(dc,e);case"textarea":return React.createElement(wc,e);case"postInput":return React.createElement(kc,e);case"manualWorkflowInput":return React.createElement(Ac,e);case"list":return React.createElement(Tc,e);case"conditional":return React.createElement(ds,e);case"debugLevels":return React.createElement(ps,e);case"expression":return React.createElement(zl,e);case"postData":return React.createElement(Gs,e);case"dateOffset":return React.createElement(nc,e);case"askForConfirmation":return React.createElement(Ys,e);case"userQuery":return React.createElement(eu,e);case"postFilter":return React.createElement(au,e);case"postSearchQuery":return React.createElement(uu,e);case"conditionalDateOffset":return React.createElement(bu,e);case"actionArgs":return React.createElement(ku,e);case"integer":return React.createElement(Ou,e)}return React.createElement("div",{className:"description"},React.createElement("i",{className:"dashicons dashicons-warning"}),(0,nt.sprintf)((0,nt.__)("Field type %s is not implemented","publihspress-future-pro"),e.type))};function Cu(e){return Cu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cu(e)}const Tu=function(e){var t,n=e.node,r=(0,s.useSelect)((function(e){var t;return{globalVariables:e(tn).getGlobalVariables(),nodeType:e(E).getNodeTypeByName(null==n||null===(t=n.data)||void 0===t?void 0:t.name)}})),o=r.globalVariables,i=r.nodeType,l=(0,s.useDispatch)(tn).updateNode,c=function(e,t){var r,o,a,i={id:n.id,data:{settings:(r={},o=e,a=t,(o=function(e){var t=function(e){if("object"!=Cu(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Cu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Cu(t)?t:t+""}(o))in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a,r)}};l(i)},u=null===(t=n.data)||void 0===t?void 0:t.settings;u||(u={});var d=(null==i?void 0:i.settingsSchema)||{},p=q(n,o),f=G(n),m=(0,a.useMemo)((function(){return d.map((function(e){return React.createElement(Ci,{title:e.label,key:"settings-panel-".concat(n.id,"-").concat(e.label)},(null==e?void 0:e.description)&&React.createElement(an.PanelRow,null,React.createElement("div",{className:"settings-field-description"},null==e?void 0:e.description)),e.fields.map((function(t){var r;return React.createElement(an.PanelRow,{key:e.label+"-"+n.id+"-"+t.name},React.createElement(Au,{type:t.type,name:t.name,description:null==t?void 0:t.description,helpUrl:null==t?void 0:t.helpUrl,label:t.label,defaultValue:null===(r=u)||void 0===r?void 0:r[t.name],onChange:c,variables:p,settings:null==t?void 0:t.settings,settingsSchema:d,node:n,stepScopedVariables:f}))})))}))}),[d,u]);return React.createElement(React.Fragment,null,m)};var Pu=n(5931),Nu={};function ju(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Nu.styleTagTransform=jl(),Nu.setAttributes=Cl(),Nu.insert=Ol().bind(null,"head"),Nu.domAPI=Rl(),Nu.insertStyleElement=Pl(),Sl()(Pu.A,Nu),Pu.A&&Pu.A.locals&&Pu.A.locals;const Du=function(e){var t,n,r=e.errors,o=void 0===r?{}:r,i=(t=(0,a.useState)(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return ju(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ju(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=i[0],c=i[1],s=Object.values(o),u=s.length>0;return React.createElement(Ci,{title:(0,nt.__)("Validation","post-expirator"),className:"workflow-editor-validation-panel"},u&&React.createElement(React.Fragment,null,s.map((function(e,t){return React.createElement(an.PanelRow,{key:"".concat(e.error,"-").concat(t),className:"workflow-editor-validation-notification workflow-editor-error"},React.createElement(Cn,{icon:"error",size:18}),React.createElement("div",null,React.createElement("div",{className:"workflow-editor-validation-notification-header"},React.createElement("div",{className:"workflow-editor-validation-notification-message"},e.message),e.details&&React.createElement("span",{className:"workflow-editor-validation-notification-details-toggle",onClick:function(){return c(!l)}},React.createElement(Cn,{icon:l?"arrow-down":"arrow-right",size:18}))),e.details&&l&&React.createElement("div",{className:"workflow-editor-validation-notification-details"},e.details)))}))),!u&&React.createElement(an.PanelRow,{className:"workflow-editor-validation-notification workflow-editor-success"},React.createElement(Cn,{icon:"yes-alt",size:18}),(0,nt.__)("All checks have passed for this step.","post-expirator")))};function Iu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const Lu=function(e){var t=e.inputSchema,n=void 0===t?[]:t,r=e.outputSchema,o=void 0===r?[]:r,i=e.stepScopedVariables,l=void 0===i?[]:i,c=(0,s.useSelect)((function(e){return{isLoadingWorkflow:e(tn).isLoadingWorkflow(),getDataTypeByName:e(tn).getDataTypeByName,globalVariables:e(tn).getGlobalVariables()}})),u=c.isLoadingWorkflow,d=c.getDataTypeByName,p=c.globalVariables,f=Object.keys(p);n||(n=[]);var m=function e(t){var n,r,o=t.schemaItem,i=t.prefix,l=(n=(0,a.useState)(!1),r=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(n,r)||function(e,t){if(e){if("string"==typeof e)return Iu(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Iu(e,t):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=l[0],s=l[1],u=d(o.type),p=null;return u&&u.propertiesSchema&&(p=u.propertiesSchema.map((function(t){var n=d(t.type);return n&&n.propertiesSchema?React.createElement("li",{key:"".concat(o.name).concat(t.name,"-li")},React.createElement(e,{schemaItem:t})):React.createElement("li",{key:"".concat(o.name).concat(t.name,"-li")},React.createElement("code",null,t.name))}))),React.createElement(React.Fragment,null,React.createElement("div",{className:"workflow-editor-data-flow-variable"},React.createElement(Cn,{icon:c?"arrow-down":"arrow-right",onClick:function(){s(!c)},style:{cursor:"pointer"}}),React.createElement("code",null,i,o.name),c&&p&&React.createElement(an.Animate,{type:"slide-in",options:{origin:"top"}},(function(e){return e.className,React.createElement("ul",null,p)}))))};return React.createElement(Ci,{title:(0,nt.__)("Step Data Flow","post-expirator"),className:"workflow-editor-dev-panel"},React.createElement(an.PanelRow,{className:"workflow-editor-inspector-card__handles-schema"},React.createElement("h3",null,(0,nt.__)("Inputs","post-expirator")),React.createElement("div",null,n.length>0&&React.createElement(React.Fragment,null,React.createElement("div",null,(0,nt.__)("This step receives the following input from previous step:","post-expirator")),React.createElement("ul",null,n.map((function(e,t){return React.createElement("li",{key:"input-".concat(e.name,"-").concat(t)},React.createElement(m,{schemaItem:e}))})))),0===n.length&&(0,nt.__)("This step does not receive any input from previous step.","post-expirator"))),React.createElement(an.PanelRow,{className:"workflow-editor-inspector-card__handles-schema"},React.createElement("h3",null,(0,nt.__)("Outputs","post-expirator")),React.createElement("div",null,o.length>0&&React.createElement(React.Fragment,null,React.createElement("div",null,(0,nt.__)("This step outputs the following data:","post-expirator")),React.createElement("ul",null,o.map((function(e,t){return React.createElement("li",{key:"output-".concat(e.name,"-").concat(t)},React.createElement(m,{schemaItem:e}))})))),0===o.length&&(0,nt.__)("This step does not output any data.","post-expirator"))),React.createElement(an.PanelRow,{className:"workflow-editor-inspector-card__handles-schema"},React.createElement("h3",null,(0,nt.__)("Step Scoped Variables","post-expirator")),React.createElement("div",null,l.length>0&&React.createElement(React.Fragment,null,React.createElement("div",null,(0,nt.__)("This step receives the following step scoped variables:","post-expirator")),React.createElement("ul",null,l.map((function(e,t){return React.createElement("li",{key:"input-".concat(e.name,"-").concat(t)},React.createElement(m,{schemaItem:e}))})))),0===l.length&&(0,nt.__)("This step does not have any step scoped variables.","post-expirator"))),React.createElement(an.PanelRow,{className:"workflow-editor-inspector-card__handles-schema"},React.createElement("h3",null,(0,nt.__)("Global Variables","post-expirator")),React.createElement("div",null,!u&&0===f.length&&React.createElement("div",null,(0,nt.__)("No global variables are declared","post-expirator")),!u&&f.length>0&&React.createElement("ul",null,f.map((function(e){return React.createElement("li",{key:"global-".concat(e)},React.createElement(m,{schemaItem:p[e],prefix:"global."}))}))))))};function Fu(e){var t=e.size,n=void 0===t?24:t;return React.createElement(cn,{size:n},React.createElement("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 24 24",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{fill:"none",strokeWidth:"2",d:"M1,1 L4,1 L4,4 L1,4 L1,1 Z M20,1 L23,1 L23,4 L20,4 L20,1 Z M4,2 L20,2 M4,22 L20,22 M1,20 L4,20 L4,23 L1,23 L1,20 Z M20,20 L23,20 L23,23 L20,23 L20,20 Z M2,4 L2,20 M22,4 L22,20 M7,7 L14,7 L14,13 L7,13 L7,7 Z M17,10 L17,17 L10,17 L10,15"})))}function Wu(e){var t=e.size,n=void 0===t?24:t;return React.createElement(cn,{size:n},React.createElement("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 384 512",height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M190.4 74.1c5.6-16.8-3.5-34.9-20.2-40.5s-34.9 3.5-40.5 20.2l-128 384c-5.6 16.8 3.5 34.9 20.2 40.5s34.9-3.5 40.5-20.2l128-384zm70.9-41.7c-17.4-2.9-33.9 8.9-36.8 26.3l-64 384c-2.9 17.4 8.9 33.9 26.3 36.8s33.9-8.9 36.8-26.3l64-384c2.9-17.4-8.9-33.9-26.3-36.8zM352 32c-17.7 0-32 14.3-32 32V448c0 17.7 14.3 32 32 32s32-14.3 32-32V64c0-17.7-14.3-32-32-32z"})))}function Vu(){return Vu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vu.apply(null,arguments)}var Mu=(0,a.lazy)((function(){return n.e(360).then(n.t.bind(n,1360,23))}));const Uu=function(e){var t,n=e.node,r=e.nodeType,o={collapsed:1,collapseStringsAfterLength:50,displayDataTypes:!1,displayObjectSize:!1,enableClipboard:!1},i=React.createElement(an.PanelRow,null,React.createElement("div",null,(0,nt.__)("Loading...","post-expirator")));return React.createElement(Ci,{title:(0,nt.__)("Developer Info","post-expirator"),icon:"admin-tools",className:"workflow-editor-dev-info-panel workflow-editor-dev-panel"},n&&React.createElement(React.Fragment,null,React.createElement(an.PanelRow,null,React.createElement("div",null,React.createElement("h3",null,(0,nt.__)("Node","post-expirator")),React.createElement("div",{className:"workflow-editor-dev-info-wrapper"},React.createElement(a.Suspense,{fallback:i},React.createElement(Mu,Vu({src:n},o,{collapsed:!0})))))),React.createElement(an.PanelRow,null,React.createElement("div",null,React.createElement("h3",null,(0,nt.__)("Node Data","post-expirator")),React.createElement("div",{className:"workflow-editor-dev-info-wrapper"},React.createElement(a.Suspense,{fallback:i},React.createElement(Mu,Vu({src:null==n?void 0:n.data},o,{collapsed:!0})))))),React.createElement(an.PanelRow,null,React.createElement("div",null,React.createElement("h3",null,(0,nt.__)("Node Settings","post-expirator")),React.createElement("div",{className:"workflow-editor-dev-info-wrapper"},React.createElement(a.Suspense,{fallback:i},React.createElement(Mu,Vu({src:null==n||null===(t=n.data)||void 0===t?void 0:t.settings},o,{collapsed:!0}))))))),r&&React.createElement(an.PanelRow,null,React.createElement("div",null,React.createElement("h3",null,(0,nt.__)("Node Type","post-expirator")),React.createElement("div",{className:"workflow-editor-dev-info-wrapper"},React.createElement(a.Suspense,{fallback:i},React.createElement(Mu,Vu({src:r},o,{collapsed:!0})))))))};function zu(e){return zu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zu(e)}function Bu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bu(Object(n),!0).forEach((function(t){Gu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gu(e,t,n){return(t=function(e){var t=function(e){if("object"!=zu(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=zu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==zu(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qu=function(){var e,t=(0,s.useSelect)((function(e){var t,n=e(tn).getSelectedNodes(),r=e(tn).getSelectedEdges(),o=e(tn).getNodeById,a=e(tn).getEdgeById,i=1===n.length?o(n[0]):null,l=1===r.length?a(r[0]):null,c=e(tn).getNodeErrors(null==i?void 0:i.id)||{},s=e(tn).getSelectedElementsCount(),u=null;return i&&(u=e(E).getNodeTypeByName(null==i||null===(t=i.data)||void 0===t?void 0:t.name)),{selectedNodes:n,selectedEdges:r,selectedElementsCount:s,selectedNode:i,selectedEdge:l,nodeErrors:c,nodeType:u}})),n=t.selectedNodes,r=t.selectedEdges,o=t.selectedElementsCount,i=t.selectedNode,l=t.selectedEdge,c=t.nodeErrors,u=t.nodeType,d=(0,s.useSelect)((function(e){return{isDeveloperModeEnabled:e(E).isFeatureActive(p.m$)}})).isDeveloperModeEnabled,f=(0,a.useRef)(null),m=n.length>0&&0===r.length,b=0===n.length&&r.length>0,v=(null==u||null===(e=u.settingsSchema)||void 0===e?void 0:e.length)>0,y=G(i),g=H(i),h=B(i),w=[];return h.length>0&&h.forEach((function(e){var t;"input"===e.type?w=w.concat(g):w.push(Hu(Hu({},e),{},{name:"".concat(null==i||null===(t=i.data)||void 0===t?void 0:t.slug,".").concat(e.name)}))})),Ni(f,".interface-interface-skeleton__sidebar"),React.createElement("div",{ref:f},0===o&&React.createElement(zi,null,(0,nt.__)("No element selected.","post-expirator")),o>1&&!m&&!b&&React.createElement(zi,null,(0,nt.__)("Multiple and different elements selected.","post-expirator")),m&&o>1&&React.createElement(Mi,{title:(0,nt.sprintf)((0,nt.__)("%d steps selected","post-expirator"),o),description:(0,nt.__)("Multiple steps selected.","post-expirator"),icon:React.createElement(Fu,{size:24})}),b&&o>1&&React.createElement(Mi,{title:(0,nt.sprintf)((0,nt.__)("%d connections selected","post-expirator"),o),description:(0,nt.__)("Multiple connections selected.","post-expirator"),icon:React.createElement(Wu,{size:24})}),m&&1===o&&React.createElement(React.Fragment,null,React.createElement(Ui,{node:i}),v&&React.createElement(Tu,{node:i}),React.createElement(Du,{errors:c}),d&&React.createElement(React.Fragment,null,React.createElement(Lu,{inputSchema:g,outputSchema:w,stepScopedVariables:y}),React.createElement(Uu,{node:i,nodeType:u})),React.createElement("div",{className:"components-tools-panel"})),b&&1===o&&l&&React.createElement(React.Fragment,null,React.createElement(Mi,{title:(0,nt.__)("Connection","post-expirator"),description:(0,nt.__)("The connection between nodes in the workflow. Signifies the path along which data or control flow one node to another.","post-expirator"),icon:React.createElement(Wu,{size:24}),id:l.id}),React.createElement("div",{className:"components-tools-panel"})))};const $u=function(){var e=(0,s.useSelect)((function(e){return{showQueries:e(tn).getEditedWorkflowAttribute("debugRayShowQueries"),showEmails:e(tn).getEditedWorkflowAttribute("debugRayShowEmails"),showWordPressErrors:e(tn).getEditedWorkflowAttribute("debugRayShowWordPressErrors"),showCurrentRunningStep:e(tn).getEditedWorkflowAttribute("debugRayShowCurrentRunningStep"),isLoadingWorkflow:e(tn).isLoadingWorkflow()}})),t=e.showQueries,n=e.showEmails,r=e.showWordPressErrors,o=e.showCurrentRunningStep,i=e.isLoadingWorkflow,l=(0,s.useDispatch)(tn).setEditedWorkflowAttribute,c=(0,a.useCallback)((function(e){l("debugRayShowQueries",e)})),u=(0,a.useCallback)((function(e){l("debugRayShowEmails",e)})),d=(0,a.useCallback)((function(e){l("debugRayShowWordPressErrors",e)})),p=(0,a.useCallback)((function(e){l("debugRayShowCurrentRunningStep",e)}));return React.createElement("div",null,React.createElement(Ci,{className:"edit-post-post-status workflow-editor-dev-panel",title:(0,nt.__)("Ray Debug","post-expirator"),initialOpen:!0,disabled:i},React.createElement(an.PanelRow,null,React.createElement("p",null,(0,nt.__)("Enable or disable the different types of debug information that is shown in Ray when this workflow is activated.","post-expirator"))),React.createElement(an.PanelRow,null,React.createElement(an.ToggleControl,{label:(0,nt.__)("Show Queries","post-expirator"),checked:t,onChange:c})),React.createElement(an.PanelRow,null,React.createElement(an.ToggleControl,{label:(0,nt.__)("Show Emails","post-expirator"),checked:n,onChange:u})),React.createElement(an.PanelRow,null,React.createElement(an.ToggleControl,{label:(0,nt.__)("Show WordPress Errors","post-expirator"),checked:r,onChange:d})),React.createElement(an.PanelRow,null,React.createElement(an.ToggleControl,{label:(0,nt.__)("Show current running step","post-expirator"),checked:o,onChange:p}))))};var Ku=a.Platform.select({web:!0,native:!1}),Qu=function(){var e=(0,s.useSelect)((function(e){var t=e(Ca.M_).getShortcutRepresentation(Da);return{sidebarName:e("core/interface").getActiveComplementaryArea(p.eJ),keyboardShortcut:t}})),t=e.sidebarName,n=e.keyboardShortcut,r=(0,s.useSelect)((function(e){return{isDeveloperModeEnabled:e(E).isFeatureActive(p.m$),isRayDebugInstalled:e(E).isRayDebugInstalled()}})),o=r.isDeveloperModeEnabled,a=r.isRayDebugInstalled;return React.createElement(_i,{identifier:t,header:React.createElement(Ei,{sidebarName:t}),closeLabel:(0,nt.__)("Close settings","post-expirator"),headerClassName:"edit-post-sidebar__panel-tabs",className:"edit-post-sidebar__panel",title:(0,nt.__)("Settings","post-expirator"),toggleShortcut:n,icon:gi.A,isActiveByDefault:Ku},t===Pn&&React.createElement(React.Fragment,null,React.createElement(ji,null),o&&a&&React.createElement(React.Fragment,null,React.createElement($u,null))),t===Nn&&React.createElement(React.Fragment,null,React.createElement(qu,null)))},Yu=function(e){return futureWorkflowEditor.assetsUrl+"/images/workflow-welcome-guide/"+e+"?v="+futureWorkflowEditor.pluginVersion};const Ju=function(){var e=(0,s.useDispatch)(E).disableFeature,t=futureWorkflowEditor.welcomeGuidePages;return React.createElement(an.Guide,{className:"workflow-editor-welcome-guide",contentLabel:(0,nt.__)("Welcome to the workflow editor","post-expirator"),finishButtonText:(0,nt.__)("Get started","post-expirator"),onFinish:function(){e(p.d6)},pages:t.map((function(e){var t=e.title,n=e.content,r=e.image;return{content:React.createElement(React.Fragment,null,React.createElement("h1",{className:"edit-post-welcome-guide__heading"},t),React.createElement("p",{className:"edit-post-welcome-guide__text"},n)),image:React.createElement("picture",{className:"edit-post-welcome-guide__image"},React.createElement("source",{srcSet:Yu(r+".png"),media:"(prefers-reduced-motion: reduce)"}),React.createElement("img",{src:Yu(r+".gif"),width:"312",height:"240",alt:""}))}}))})},Xu=function(){return React.createElement(an.Modal,{title:(0,nt.__)("Loading...","post-expirator"),isDismissible:!1},React.createElement("div",null,React.createElement("p",null,(0,nt.__)("Wait, we are loading the workflow...","post-expirator"))))};function Zu(){var e=(0,s.useSelect)((function(e){return{isFullscreenActive:e(E).isFeatureActive(p.t7),isInserterOpened:e(E).isFeatureActive(p.is),isWelcomeGuideActive:e(E).isFeatureActive(p.d6),isLoadingWorkflow:e(tn).isLoadingWorkflow(),isCreatingWorkflow:e(tn).isCreatingWorkflow()}})),t=e.isFullscreenActive,n=e.isInserterOpened,r=e.isWelcomeGuideActive,o=e.isLoadingWorkflow,l=e.isCreatingWorkflow,u=c()("edit-post-layout editor-editor-interface",{"is-inserter-opened":n}),f=In();return(0,a.useEffect)((function(){var e=["workflow-editor"];return e.push(f?"is-pro":"is-free"),e.forEach((function(e){return function(e){document.body.classList.contains(e)||document.body.classList.add(e)}(e)})),function(){!function(e){e.forEach((function(e){return function(e){document.body.classList.contains(e)&&document.body.classList.remove(e)}(e)}))}(e)}}),[]),React.createElement(an.SlotFillProvider,null,React.createElement(d.Ln,null,React.createElement(Dn,null,React.createElement(i.fA,{isActive:t}),React.createElement(za,null),React.createElement(Qu,null),(o||l)&&React.createElement(Xu,null),React.createElement(Oa,{className:u,secondarySidebar:function(){return n?React.createElement(yi,null):null}}),r&&React.createElement(Ju,null))),React.createElement(Aa.PluginArea,{scope:"future-workflow-editor"}))}const ed=function(){return{name:"post",label:"Post",primitiveType:"object",propertiesSchema:[{name:"title",type:"string",label:"Title",description:"The title of the post."},{name:"content",type:"string",label:"Content",description:"The content of the post."},{name:"content_text",type:"string",label:"Content (Plain Text)",description:"The content of the post in plain text."},{name:"excerpt",type:"string",label:"Excerpt",description:"The excerpt of the post."},{name:"status",type:"post_status",label:"Post Status",description:"The status of the post."},{name:"type",type:"post_type",label:"Post Type",description:"The type of the post."},{name:"id",type:"integer",label:"ID",description:"The unique identifier for the post."},{name:"date",type:"datetime",label:"Publish Date",description:"The date when the post was published."},{name:"modified",type:"datetime",label:"Modification Date",description:"The date when the post was last modified."},{name:"permalink",type:"url",label:"Permalink",description:"The permalink of the post."},{name:"slug",type:"string",label:"Slug",description:"The slug (or post name)of the post."},{name:"author",type:"user",label:"Author",description:"The author of the post."},{name:"meta",type:"meta",label:"Metadata",description:"The metadata of the post.",context:{table:"_postmeta"}},{name:"future",type:"future_action",label:"Future Action",description:"The future action properties of the post."}]}},td=function(){return{name:"boolean",label:"Boolean",primitiveType:"boolean"}},nd=function(){return{name:"datetime",label:"Datetime",primitiveType:"string"}},rd=function(){return{name:"integer",label:"Integer",primitiveType:"integer"}},od=function(){return{name:"string",label:"String",primitiveType:"string"}},ad=function(){return{name:"email",label:"Email",primitiveType:"string"}},id=function(){return{name:"input",label:"Step input",primitiveType:"array",itemsType:"mixed"}},ld=function(){return{name:"workflow",label:"Future Workflow",primitiveType:"object",propertiesSchema:[{name:"id",type:"integer",label:"ID",description:"The unique identifier for the workflow."},{name:"title",type:"string",label:"Title",description:"The title of the workflow."},{name:"description",type:"string",label:"Description",description:"The description of the workflow."},{name:"modified_at",type:"datetime",label:"Modification Date",description:"The date when the workflow was last modified."},{name:"meta",type:"meta",label:"Metadata",description:"The metadata of the workflow.",context:{table:"_postmeta"}},{name:"execution_id",type:"string",label:"Execution ID",description:"The unique identifier for the workflow execution."},{name:"execution_trace",type:"array",label:"Execution Trace",description:"The trace of the workflow execution.",items:{type:"string"}}]}},cd=function(){return{name:"user",label:"User",primitiveType:"object",propertiesSchema:[{name:"ID",type:"integer",label:"ID",description:"The unique identifier for the user."},{name:"email",type:"email",label:"Email",description:"The email address of the user."},{name:"login",type:"string",label:"Login",description:"The login name of the user."},{name:"display_name",type:"string",label:"Display name",description:"The display name of the user."},{name:"roles",type:"user_roles",label:"Roles",description:"The roles of the user."},{name:"caps",type:"object",label:"Capabilities",description:"The capabilities of the user."},{name:"registered",type:"datetime",label:"Registration date",description:"The date when the user was registered."},{name:"meta",type:"meta",label:"Metadata",description:"The metadata of the user.",context:{table:"_usermeta"}}]}},sd=function(){return{name:"site",label:"Site",primitiveType:"object",propertiesSchema:[{name:"id",type:"integer",label:"ID",description:"The unique identifier for the site."},{name:"name",type:"string",label:"Name",description:"The name of the site."},{name:"description",type:"string",label:"Description",description:"The description of the site."},{name:"url",type:"string",label:"Site URL",description:"The URL of the site."},{name:"home_url",type:"string",label:"Home URL",description:"The URL of the home page of the site."},{name:"admin_email",type:"email",label:"Admin Email",description:"The email address of the site administrator."}]}},ud=function(){return{name:"node",label:"Workflow Node",primitiveType:"object",propertiesSchema:[{name:"id",type:"integer",label:"ID",description:"The unique identifier for the node."},{name:"name",type:"string",label:"Name",description:"The name of the node."},{name:"slug",type:"string",label:"Slug",description:"The slug of the node."},{name:"label",type:"string",label:"Label",description:"The label of the node."},{name:"activation_timestamp",type:"string",label:"Activation Time",description:"The timestamp when the node was activated."},{name:"post_id",type:"integer",label:"Post ID",description:"The ID of the post that triggered the node."}]}},dd=function(){return{name:"array",label:"Array",primitiveType:"array",itemsType:"mixed"}},pd=function(){return{name:"future_action",label:"Future Action",primitiveType:"object",propertiesSchema:[{name:"enabled",type:"boolean",label:"Enabled",description:"Whether the future action is enabled."},{name:"action",type:"string",label:"Action",description:"The action to be performed."},{name:"new_status",type:"string",label:"New Status",description:"The new status of the post."},{name:"date",type:"integer",label:"Date",description:"The date when the future action will be performed in Unix timestamp format."},{name:"date_string",type:"datetime",label:"Date String",description:"The date when the future action will be performed."},{name:"terms",type:"terms_array",label:"Terms",description:"The terms to be used in the future action."}]}},fd=function(){return{name:"terms_array",label:"Terms Array",primitiveType:"object",propertiesSchema:[{name:"ids",type:"array",label:"List of terms IDs",description:"A list of terms IDs."},{name:"labels",type:"array",label:"List of terms labels",description:"A list of terms labels."}]}},md=function(){return{name:"meta",label:"Metadata",primitiveType:"object",propertiesSchema:[{name:"id",type:"integer",label:"ID",description:"The unique identifier for the metadata."},{name:"key",type:"string",label:"Key",description:"The key of the metadata."},{name:"value",type:"mixed",label:"Value",description:"The value of the metadata."},{name:"single",type:"boolean",label:"Single",description:"Whether the metadata is a single value."}]}},bd=function(){return{name:"post_status",label:"Post Status",primitiveType:"string"}},vd=function(){return{name:"post_type",label:"Post Type",primitiveType:"string"}},yd=function(){return{name:"url",label:"URL",primitiveType:"string"}},gd=function(){return{name:"user_roles",label:"User Roles",primitiveType:"array",itemsType:"string"}};var hd=n(3133),wd={};wd.styleTagTransform=jl(),wd.setAttributes=Cl(),wd.insert=Ol().bind(null,"head"),wd.domAPI=Rl(),wd.insertStyleElement=Pl(),Sl()(hd.A,wd),hd.A&&hd.A.locals&&hd.A.locals,n(5375);var _d=window.futureWorkflowEditor,Ed=_d.workflowId,Sd=_d.nodeTypeCategories,xd=_d.nodeTypes;function Rd(){var e=(0,s.useDispatch)(tn),t=e.setupEditor,n=e.setDataTypes,r=(0,s.useDispatch)(E),o=r.setTriggerNodes,i=r.setTriggerCategories,l=r.setActionCategories,c=r.setActionNodes,u=r.setAdvancedCategories,d=r.setAdvancedNodes;return(0,a.useEffect)((function(){t(Ed),o(xd.triggers),c(xd.actions),d(xd.advanced),i(Sd),l(Sd),u(Sd);var e=[ed(),td(),nd(),rd(),od(),ad(),id(),ld(),cd(),sd(),ud(),dd(),pd(),fd(),md(),bd(),vd(),yd(),gd()];n(e)}),[Ed]),React.createElement(a.StrictMode,null,React.createElement(Zu,null))}},3018:(e,t,n)=>{n.d(t,{Ml:()=>i,qj:()=>r,rx:()=>a,wD:()=>o});var r="RIGHT",o="DOWN",a=o,i="publishpress_future_workflow_editor_auto_layout"},2158:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(1601),o=n.n(r),a=n(6314),i=n.n(a)()(o());i.push([e.id,'.block-editor-block-types-list > [role="presentation"] {\n\toverflow: hidden;\n\tdisplay: flex;\n\tflex-wrap: wrap;\n}\n',""]);const l=i},217:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(1601),o=n.n(r),a=n(6314),i=n.n(a)()(o());i.push([e.id,".edit-post-sidebar__panel .condition-natural-language {\n    margin-top: 12px;\n    font-family: monospace, monospace;\n    background-color: #f0f0f1;\n    padding: 12px;\n    border-radius: 4px;\n    border: 1px solid #e0e0e1;\n}\n\n.condition-pro-features-notice {\n    font-style: italic;\n    margin-top: 12px;\n}\n\n.ruleGroup {\n    margin: none;\n    background: none;\n    border: none;\n}\n\n.block-editor-inspector-popover-header__heading {\n    font-size: 13px !important;\n    margin-bottom: 16px !important;\n}\n",""]);const l=i},6943:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(1601),o=n.n(r),a=n(6314),i=n.n(a)()(o());i.push([e.id,".components-button svg {\n    height: 100%;\n}\n\n#wpfooter {\n    display: none !important;\n}\n\n.react-flow {\n    width: 100% !important;\n}\n\n.components-menu-items__item-icon.has-icon-right {\n    width: 24px !important;\n    height: 24px !important;\n}\n\n.react-flow__node-default.selectable.selected,\n.react-flow__node-default.selectable:focus,\n.react-flow__node-default.selectable:focus-visible,\n.react-flow__node-input.selectable.selected,\n.react-flow__node-input.selectable:focus,\n.react-flow__node-input.selectable:focus-visible,\n.react-flow__node-output.selectable.selected,\n.react-flow__node-output.selectable:focus,\n.react-flow__node-output.selectable:focus-visible,\n.react-flow__node-group.selectable.selected,\n.react-flow__node-group.selectable:focus,\n.react-flow__node-group.selectable:focus-visible {\n    box-shadow: 0 0 0 2px #1a192b;\n}\n\n/* .react-flow {\n    background-color: #e1e1e1 !important;\n} */\n\n.settings-field-description {\n    font-size: 12px;\n    color: #666;\n    margin-bottom: 15px;\n}\n\n.settings-field-help-popover {\n    font-size: 12px;\n    color: #666;\n    width: 320px;\n    padding: 16px;\n    position: relative;\n    padding-top: 50px;\n}\n\n.settings-field-help-popover button {\n    position: absolute;\n    top: 10px;\n    right: 10px;\n}\n\n.workflow-editor-inspector-card__handles-schema {\n    display: flex;\n    flex-direction: column;\n    flex-wrap: nowrap;\n    justify-content: flex-start;\n    align-items: flex-start;\n}\n\n.workflow-editor-inspector-card__handles-schema code {\n    padding: 3px 6px;\n    border-radius: 4px;\n    font-size: 12px;\n    background: #ebebeb;\n    color: #696969;\n}\n\n.workflow-editor-inspector-card__handles-schema h3 {\n    margin-bottom: 4px !important;\n}\n\n.workflow-editor-global-variables-description {\n    font-size: 12px;\n    color: #666;\n    margin-bottom: 15px;\n}\n\n.workflow-editor-global-variables-label {\n    font-size: 11px;\n    font-weight: 500;\n    line-height: 1.4;\n    text-transform: uppercase;\n    display: inline-block;\n    margin-bottom: calc(8px);\n    padding: 0px;\n}\n.workflow-editor-global-var-list {\n    margin: 0;\n    padding: 5px;\n    border: 1px solid var(--wp-components-color-gray-600, #949494);\n}\n\n.workflow-editor-global-var-list ul {\n    list-style: disc;\n    margin-left: 30px;\n}\n\n.workflow-editor-global-var-list ul li {\n    margin-bottom: 0;\n}\n\n.edit-post-editor__inserter-panel-content {\n    height: 100%;\n}\n\n.block-editor-inserter__content {\n    display: flex;\n    flex-direction: column;\n    gap: 16px;\n    height: 100%;\n    overflow-y: hidden;\n    position: relative;\n}\n\n.block-editor-inserter__panel-content {\n    overflow-y: auto;\n}\n\n.interface-interface-skeleton__footer {\n    min-height: 25px;\n    padding: 3px 20px;\n    box-sizing: border-box;\n}\n\n.interface-interface-skeleton__secondary-sidebar {\n    box-shadow: 1px 1px 0 0 rgba(0, 0, 0, .133);\n    outline: 1px solid #0000;\n}\n\n.editor-inserter-sidebar *, .editor-inserter-sidebar :after, .editor-inserter-sidebar :before {\n    box-sizing: inherit;\n}\n",""]);const l=i},8565:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(1601),o=n.n(r),a=n(6314),i=n.n(a)()(o());i.push([e.id,".workflow-editor-dev-info-panel .components-panel__row {\n    overflow: scroll;\n}\n\n.workflow-editor-dev-info-wrapper {\n    min-width: 1000px;\n}\n\n.workflow-editor-dev-panel {\n    background-color: #fffaf1;\n}\n",""]);const l=i},7860:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(1601),o=n.n(r),a=n(6314),i=n.n(a)()(o());i.push([e.id,".components-guide__container {\n    max-width: 312px;\n}\n",""]);const l=i},7448:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(1601),o=n.n(r),a=n(6314),i=n.n(a)()(o());i.push([e.id,".edit-post-editor__inserter-panel-header {\n    display: flex;\n\tjustify-content: flex-end;\n}\n\n@media (min-width: 782px) {\n    .editor-inserter-sidebar__header {\n        display: none;\n    }\n}\n\n.edit-post-header-toolbar .editor-document-tools__left > .edit-post-header-toolbar__inserter-toggle.is-pressed svg {\n    transform: rotate(45deg);\n}\n\n",""]);const l=i},4259:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(1601),o=n.n(r),a=n(6314),i=n.n(a)()(o());i.push([e.id,".edit-post-post-status .components-base-control {\n    flex: auto;\n}\n\n.editor-post-title__panel,\n.editor-post-description__panel {\n    padding-top: 8px;\n}\n\n.editor-post-status__panel {\n    margin-top: 16px;\n    gap: 16px !important;\n}\n\n.editor-post-status__panel button {\n    flex-grow: 1;\n    justify-content: center;\n}\n\n.workflow-editor-element-inspector__warning {\n    background: #fff;\n    display: block;\n    font-size: 13px;\n    padding: 32px 36px;\n    text-align: center;\n    flex-grow: 1;\n    justify-content: center;\n}\n\n\n.workflow-editor-inspector-card {\n    align-items: flex-start;\n    color: #1e1e1e;\n    display: flex;\n    padding: 16px;\n}\n\n.workflow-editor-inspector-card {\n    align-items: flex-start;\n    color: #1e1e1e;\n    display: flex;\n    padding: 16px;\n}\n\n.workflow-editor-inspector-icon {\n    align-items: center;\n    display: flex;\n    height: 24px;\n    justify-content: center;\n    width: 24px;\n}\n\n.workflow-editor-inspector-card .workflow-editor-inspector-icon {\n    flex: 0 0 24px;\n    height: 24px;\n    margin-left: 0;\n    margin-right: 12px;\n    width: 24px;\n}\n\n.workflow-editor-inspector-card {\n    align-items: flex-start;\n    color: #1e1e1e;\n    display: flex;\n    padding: 16px;\n}\n\n.workflow-editor-inspector-card__content {\n    flex-grow: 1;\n}\n\n.workflow-editor-inspector-inspector h2, .workflow-editor-inspector-inspector h3 {\n    color: #1e1e1e;\n    font-size: 13px;\n    margin-bottom: 1.5em;\n}\n\n.interface-complementary-area h2 {\n    color: #1e1e1e;\n    font-size: 13px;\n    margin-bottom: 1.5em;\n}\n\n.workflow-editor-inspector-card__title.workflow-editor-inspector-card__title {\n    font-size: 13px;\n    line-height: 1.4;\n    margin: 0;\n    padding: 3px 0;\n}\n\n\n.workflow-editor-inspector-card__description {\n    display: block;\n    font-size: 13px;\n    line-height: 1.4;\n    margin-top: 4px;\n}\n\n.workflow-editor-inspector-icon.has-colors svg {\n    fill: currentColor;\n}\n\n.workflow-editor-inspector-icon svg {\n    max-height: 24px;\n    max-width: 24px;\n    min-height: 20px;\n    min-width: 20px;\n}\n\n.workflow-editor-validation-notification {\n    display: flex;\n    flex-direction: row;\n    align-items: flex-start;\n    justify-content: flex-start;\n}\n\n.workflow-editor-validation-panel .node-icon {\n    margin-right: 5px;\n}\n\n.workflow-editor-validation-notification.workflow-editor-success .node-icon * {\n    color: #46b450;\n}\n\n.workflow-editor-validation-notification.workflow-editor-error .node-icon * {\n    color: #d90f0f;\n}\n\n.edit-post-sidebar__panel .components-h-stack {\n    width: 100%;\n}\n\n.workflow-editor-inspector-card__content table {\n    width: 100%;\n    border-collapse: collapse;\n    border-spacing: 0;\n    margin-top: 20px;\n}\n\n.workflow-editor-inspector-card__content table th,\n.workflow-editor-inspector-card__content table td {\n    padding: 2px 3px;\n    border: 1px solid #e1e1e1;\n    text-align: left;\n}\n\n.workflow-editor-data-flow-variable ul {\n    margin-left: 40px;\n    margin-top: 6px;\n    margin-bottom: 11px;\n    padding: 2px;\n}\n\n.workflow-editor-data-flow-variable ul li {\n    margin-bottom: 2px;\n    list-style: disc;\n    line-height: 16px;\n}\n\n.workflow-editor-data-flow-variable ul code {\n    max-width: 204px;\n    display: inline-block;\n    overflow: auto;\n    text-wrap: wrap;\n}\n\np.settings-field-description,\np.description {\n    margin-top: -14px !important;\n    font-size: 12px;\n    font-style: normal;\n    color: rgb(117, 117, 117);\n}\n\np.description.margin-top {\n    margin-top: 8px !important;\n}\n\n.components-panel__row .components-base-control {\n    width: 100%;\n}\n\n.components-form-token-field__help {\n    display: none;\n}\n\n.margin-bottom-0 {\n    margin-bottom: 0 !important;\n}\n\n.margin-bottom-0 .components-base-control {\n    margin-bottom: 0 !important;\n}\n\n.margin-top-0 {\n    margin-top: 0 !important;\n}\n\n.workflow-editor-setting-popover .components-popover__content {\n    min-width: 320px;\n    padding: 16px;\n}\n\n\n.workflow-editor-inspector-card__header {\n    justify-content: flex-start !important;\n}\n\n.workflow-editor-inspector-card__content .components-v-stack {\n    margin-bottom: 10px;\n}\n\n.workflow-editor-post-data.hidden-calendar .components-datetime__date {\n    display: none;\n}\n\n.workflow-editor-panel {\n    gap: calc(4px) !important;\n}\n\n.workflow-editor-panel__row {\n    width: 100%;\n}\n\n.workflow-editor-panel__row-label {\n    min-width: 0px;\n    align-items: center;\n    display: flex;\n    flex-shrink: 0;\n    hyphens: auto;\n    line-height: 20px;\n    min-height: 32px;\n    padding: 6px 0;\n    width: 38%;\n}\n\n.workflow-editor-panel__row-control {\n    min-width: 0px;\n    align-items: center;\n    display: flex;\n    flex-grow: 1;\n    min-height: 32px;\n    max-height: 38px;\n    overflow: hidden;\n    word-break: break-word;\n    flex-wrap: wrap;\n    hyphens: auto;\n    line-height: 20px;\n}\n\n.workflow-editor-panel__row-control .components-button.is-tertiary {\n    white-space: normal;\n    height: 38px;\n    text-align: left;\n    display: -webkit-box;\n    -webkit-line-clamp: 2;\n    -webkit-box-orient: vertical;\n    overflow: hidden;\n    align-items: center;\n    padding: 4px 8px;\n}\n",""]);const l=i},1578:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(1601),o=n.n(r),a=n(6314),i=n.n(a)()(o());i.push([e.id,".react-flow__node {\n    max-width: 170px;\n}\n\n.react-flow__node-body {\n    border-radius: 8px;\n    color: #171717;\n    font-size: 10px;\n    min-width: 140px;\n    box-sizing: border-box;\n    border: 1px solid transparent;\n    cursor: pointer;\n}\n\n.react-flow__node-inner-body {\n    padding: 6px;\n    box-sizing: border-box;\n}\n\n.react-flow__node-header {\n    text-align: center;\n    width: 100%;\n    position: relative;\n    text-align: left;\n}\n\n.react-flow__node-header .react-flow__node-label {\n    margin-left: 22px;\n    margin-right: 5px;\n}\n\n.react-flow__node-header .dashicon {\n    margin-right: 4px;\n    position: absolute;\n    left: 2px;\n    top: 2px;\n}\n\n.react-flow__node-header .node-icon {\n    margin-right: 4px;\n    position: absolute;\n    top: 1px;\n    left: 2px;\n}\n\n.react-flow__node-description {\n    font-size: 8px;\n    line-height: 10px;\n    color: #0000008a;\n    margin-top: 0px;\n    margin-left: 16px;\n    padding: 0px 6px;\n    border-radius: 6px;\n    overflow-wrap: break-word;\n    max-width: 140px;\n    margin-bottom: 6px;\n}\n\n.react-flow__node-inner-body.with-description {\n    padding-bottom: 4px;\n}\n\n.react-flow__node-slug {\n    font-size: 8px;\n    display: inline-block;\n    height: 6px;\n    line-height: 6px;\n    padding: 2px;\n    position: absolute;\n    top: 45px;\n    left: 27px;\n}\n\n.react-flow__handle {\n    width: 8px !important;\n    height: 8px !important;\n    box-sizing: border-box;\n}\n\n.react-flow__handle.react-flow__handle-bottom {\n    bottom: -4px !important;\n}\n\n.react-flow__handle.react-flow__handle-top {\n    top: -4px !important;\n}\n\n.react-flow__node-top {\n    font-size: 8px;\n    padding: 0 8px;\n    border-top-left-radius: 8px;\n    border-top-right-radius: 8px;\n    border-bottom: 1px solid silver;\n    position: relative;\n    padding-left: 18px;\n}\n\n.react-flow__node-top .publishpress-icon {\n    margin-right: 4px;\n    position: absolute;\n    top: 1px;\n    left: 8px;\n}\n\n.react-flow__node-inserter-popover .components-popover__content {\n    width: 350px;\n}\n\n.react-flow__node-inserter-popover {\n    display: flex;\n    flex-direction: column;\n    position: relative;\n}\n\n.react-flow__node-inserter-popover-content {\n    height: 100%;\n    overflow-y: auto;\n    height: 340px;\n}\n\n.react-flow__node-inserter-popover-close {\n    cursor: pointer;\n    background-color: #000;\n    color: #fff;\n    display: block;\n    width: 100%;\n    padding: 6px;\n    height: 44px;\n}\n\n/* DEFAULT STYLE FOR NODES */\n\n.react-flow__node-genericNode,\n.react-flow__node-genericTrigger,\n.react-flow__node-unknownNode,\n.react-flow__node-genericAction,\n.react-flow__node-genericAdvanced,\n.react-flow__node-queryAction,\n.react-flow__node-debugAction,\n.react-flow__handle {\n    border-width: 1px;\n    border-style: solid;\n}\n\n.react-flow__node-inner-body {\n    border-bottom-width: 1px;\n    border-bottom-style: solid;\n}\n\n/* GENERIC NODE */\n\n.react-flow__node-genericNode {\n    background-color: #b2b2c9;\n    border-color: #b2b2c9;\n}\n\n.react-flow__node-genericNode .react-flow__handle {\n    background-color: #fff;\n    border-color: #b2b2c9;\n}\n\n.react-flow__node-genericNode .react-flow__node-top {\n    border-color: #b2b2c9;\n}\n\n.react-flow__node-genericNode .react-flow__node-slug {\n    color: #b2b2c9;\n}\n\n.react-flow__node-genericNode .react-flow__node-inner-body {\n    border-bottom-color: #b2b2c9;\n}\n\n/* TRIGGER */\n\n.react-flow__node-genericTrigger {\n    background-color: #dce5df;\n    border-color: #b9c0bb;\n}\n\n.react-flow__node-genericTrigger .react-flow__handle {\n    background-color: #fff;\n    border-color: #B594B6;\n}\n\n.react-flow__node-genericTrigger  .react-flow__node-slug {\n    color: #939895;\n}\n\n.react-flow__node-genericTrigger .react-flow__node-top {\n    border-color: #b9c0bb;\n}\n\n.react-flow__node-genericTrigger .react-flow__node-slug {\n    color: #808882;\n}\n\n.react-flow__node-genericTrigger .react-flow__node-inner-body {\n    border-bottom-color: #b9c0bb;\n}\n\n/* GENERIC ACTION */\n\n.react-flow__node-unknownNode {\n    background-color: #afafaf;\n    border-color: #bbbbbb;\n}\n\n.react-flow__node-genericAction {\n    background-color: #89bae4;\n    border-color: #7199bc;\n}\n\n.react-flow__node-unknownNode .react-flow__handle,\n.react-flow__node-genericAction .react-flow__handle {\n    background-color: #fff;\n    border-color: #7199bc;\n}\n\n.react-flow__node-unknownNode .react-flow__node-slug,\n.react-flow__node-genericAction .react-flow__node-slug {\n    color: #8a62be;\n}\n\n.react-flow__node-unknownNode .react-flow__node-top,\n.react-flow__node-genericAction .react-flow__node-top {\n    border-color: #7199bc;\n}\n\n.react-flow__node-unknownNode .react-flow__node-slug,\n.react-flow__node-genericAction .react-flow__node-slug {\n    color: #526e87;\n}\n\n.react-flow__node-genericAction .react-flow__node-inner-body {\n    border-bottom-color: #7199bc;\n}\n\n/* GENERIC ADVANCED */\n\n.react-flow__node-genericAdvanced {\n    background-color: #f8ddad;\n    border-color: #d3bc94;\n}\n\n.react-flow__node-genericAdvanced .react-flow__handle {\n    background-color: #fff;\n    border-color: #d3bc94;\n}\n\n.react-flow__node-genericAdvanced .react-flow__node-slug {\n    color: #b19f80;\n}\n\n.react-flow__node-genericAdvanced .react-flow__node-top {\n    border-color: #d3bc94;\n}\n\n.react-flow__node-genericAdvanced .react-flow__node-slug {\n    color: #908065;\n}\n\n.react-flow__node-genericAdvanced .react-flow__node-inner-body {\n    border-bottom-color: #d3bc94;\n}\n\n/* QUERY ACTION */\n\n.react-flow__node-queryAction {\n    background-color: #d8b6f2;\n    border-color: #b891c2;\n}\n\n.react-flow__node-queryAction .react-flow__handle {\n    background-color: #fff;\n    border-color: #b891c2;\n}\n\n.react-flow__node-queryAction .react-flow__node-slug {\n    color: #9079a1;\n}\n\n.react-flow__node-queryAction .react-flow__node-top {\n    border-color: #b891c2;\n}\n\n.react-flow__node-queryAction .react-flow__node-slug {\n    color: rgb(110, 110, 125);\n}\n\n.react-flow__node-queryAction .react-flow__node-inner-body {\n    border-bottom-color: #b891c2;\n}\n\n/* DEBUG ACTION */\n\n.react-flow__node-debugAction {\n    background-color: #f0aec6;\n    border-color: #cf96ab;\n}\n\n.react-flow__node-debugAction .react-flow__handle {\n    background-color: #fff;\n    border-color: #cf96ab;\n}\n\n.react-flow__node-debugAction .react-flow__node-slug {\n    color: #916877;\n}\n\n.react-flow__node-debugAction .react-flow__node-top {\n    border-color: #cf96ab;\n}\n\n.react-flow__node-debugAction .react-flow__node-inner-body {\n    border-bottom-color: #cf96ab;\n}\n\n/* PLACEHOLDER FOR EMPTY FLOW */\n.react-flow__node-triggerPlaceholderNode {\n    background-color: #fff;\n    border: 1px dashed #d2d2d2;\n    cursor: pointer;\n}\n\n.react-flow__node-triggerPlaceholderNode .react-flow__node-header {\n    display: flex;\n    align-items: center;\n}\n\n.react-flow__node-triggerPlaceholderNode .react-flow__node-header .icon {\n    color: #fff;\n    background-color: #d2d2d2;\n    padding: 2px;\n    display: inline-block;\n    width: 12px;\n    height: 12px;\n    box-sizing: border-box;\n    position: relative;\n    border-radius: 1px;\n    margin-right: 6px;\n}\n\n.react-flow__node-triggerPlaceholderNode .react-flow__node-header .icon svg {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    width: 12px;\n    height: 12px;\n}\n\n.react-flow__node-triggerPlaceholderNode .react-flow__node-header .react-flow__node-label {\n    color: #d2d2d2\n}\n\n.react-flow__node-triggerPlaceholderNode .react-flow__node-header {\n    padding-left: 0;\n}\n\n.react-flow__node-triggerPlaceholderNode:hover {\n    border: 1px dashed #aeaeae;\n}\n\n.react-flow__node-triggerPlaceholderNode:hover .react-flow__node-header .icon {\n    background-color: #aeaeae;\n}\n\n.react-flow__node-triggerPlaceholderNode:hover .react-flow__node-header .react-flow__node-label {\n    color: #aeaeae;\n}\n\n.react-flow__node-triggerPlaceholderNode .react-flow__node-inner-body {\n    border-bottom: none;\n}\n\n/* SELECTED NODES */\n.react-flow__node.selected {\n    background-color: transparent;\n}\n\n.react-flow__node.selected .react-flow__node-body {\n    border: 1px dashed #555;\n}\n\n.react-flow__node-genericNode .react-flow__node-slug {\n    color: #b2b2c9;\n}\n\n/* HANDLE AREA */\n\n.react-flow__node-handle-area {\n    font-size: 6px;\n    background-color: #fff;\n    border-bottom-left-radius: 8px;\n    border-bottom-right-radius: 8px;\n    display: flex;\n    flex-direction: row;\n}\n\n.react-flow__node-handle-name {\n    padding: 4px 2px 6px 2px;\n    text-align: center;\n    line-height: 100%;\n    flex: 1;\n    border-left: 1px solid silver;\n}\n\n.react-flow__node-handle-name:first-child {\n    border-left: 0;\n}\n\n/* Node Content */\n.react-flow__node-content {\n    font-size: 6px;\n    margin-top: 6px;\n}\n\n.react-flow__node-content table {\n    border-spacing: 0;\n    width: 100%;\n}\n\n.react-flow__node-content table th {\n    text-align: left;\n}\n\n.react-flow__node-content table th,\n.react-flow__node-content table td {\n    padding: 0 6px;\n    font-size: 6px;\n    border: 1px solid rgba(0, 0, 0, 0.1);\n}\n\n/* Node Markers */\n.react-flow__node-marker-wrapper {\n    position: absolute;\n    top: -17px;\n    right: 0;\n    display: flex;\n    flex-direction: row;\n    gap: 2px;\n    justify-content: right;\n}\n\n.react-flow__node-error,\n.react-flow__node-pro-badge {\n    display: flex;\n    border-radius: 100%;\n    width: 14px;\n    height: 14px;\n    box-sizing: border-box;\n    justify-content: center;\n    vertical-align: middle;\n}\n\n.react-flow__node-pro-badge {\n    background-color: #ffb200;\n    color: #000;\n}\n\n.react-flow__node-pro-badge .node-icon {\n    margin-top: -2px;\n}\n\n.react-flow__node-error {\n    background-color: #d90f0f;\n    color: #fff;\n    font-size: 10px;\n    text-align: center;\n    line-height: 12px;\n    font-family: monospace;\n    font-weight: 900;\n    padding-left: 0px;\n}\n\n.react-flow__node-error .node-icon {\n    margin-top: 2px;\n}\n\nbody.workflow-editor.is-free .react-flow__node-handle-name {\n    color: #838383;\n}\n\nbody.workflow-editor.is-free .react-flow__node-handle-name.handle-area-source-output,\nbody.workflow-editor.is-free .react-flow__node-handle-name.handle-area-source-true {\n    color: #000;\n}\n\n.react-flow__node-top .node-slug {\n    color: #0000008a;\n}\n",""]);const l=i},4143:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(1601),o=n.n(r),a=n(6314),i=n.n(a)()(o());i.push([e.id,".workflow-editor-notices__snackbar-list {\n    position: fixed;\n    bottom: 35px;\n    left: 220px;\n}\n\n.folded .workflow-editor-notices__snackbar-list {\n    left: 92px;\n}\n\n.is-fullscreen-mode .workflow-editor-notices__snackbar-list {\n    left: 60px;\n}\n",""]);const l=i},8501:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(1601),o=n.n(r),a=n(6314),i=n.n(a)()(o());i.push([e.id,".block-editor-block-types-list__item-pro-badge {\n    background-color: #ffb200;\n    color: #000;\n    padding: 3px 8px;\n    border-radius: 4px;\n    font-size: 10px;\n    font-weight: 600;\n    width: 100%;\n}\n.workflow-editor-inspector-card__pro-badge,\n.block-editor-block-card__pro-badge {\n    background-color: #ffb200;\n    color: #000;\n    padding: 3px 8px;\n    border-radius: 4px;\n    font-size: 10px;\n    font-weight: 600;\n}\n\n.workflow-editor-inspector-card__pro-badge,\n.components-popover__content .block-editor-block-card__pro-badge {\n    margin-left: 8px;\n}\n\n.workflow-editor-inspector-card__pro-instructions,\n.block-editor-block-card__pro-instructions {\n    font-size: 12px;\n    color: #757575;\n    margin-top: 8px;\n    line-height: 1.5;\n    font-style: italic;\n    font-weight: 400;\n    border-top: 1px solid #e0e0e0;\n    padding-top: 8px;\n}\n\n.edit-post-header-toolbar__buy-pro {\n    background-color: #ffb200;\n    color: #000;\n    padding: 4px 10px !important;\n    border-radius: 4px;\n}\n\n.edit-post-header-toolbar__buy-pro .publishpress-icon {\n    width: 18px !important;\n    height: 18px !important;\n    margin-right: 4px;\n}\n",""]);const l=i},269:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(1601),o=n.n(r),a=n(6314),i=n.n(a)()(o());i.push([e.id,"/* .react-flow__node-toolbar {\n    position: absolute;\n    top: -40px;\n    left: 0;\n}\n\n.react-flow__node-toolbar .components-toolbar {\n    height: 30px !important;\n    min-height: 20px;\n}\n\n.react-flow__node-toolbar .components-toolbar > div {\n    min-width: 30px;\n}\n\n.react-flow__node-toolbar button.components-button.components-toolbar__control.has-icon {\n    min-width: 30px !important;\n    height: 30px !important;\n} */\n",""]);const l=i},1461:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(1601),o=n.n(r),a=n(6314),i=n.n(a)()(o());i.push([e.id,".publishpress-future-date-preview .publishpress-future-date-preview-value {\n    font-family: monospace;\n    background-color: #e7e7e7;\n    padding: 4px 6px;\n    display: inline-block;\n    min-width: 140px;\n    min-height: 20px;\n}\n\n.publishpress-future-date-preview.compact .publishpress-future-date-preview-label {\n    display: block;\n}\n\n.publishpress-future-date-preview.compact {\n    margin-bottom: 8px;\n}\n\n.publishpress-future-date-preview.compact h4 {\n    font-size: 11px;\n    font-weight: 500;\n    line-height: 1.4;\n    text-transform: uppercase;\n    display: inline-block;\n    margin-bottom: calc(8px);\n    padding: 0px;\n    flex-shrink: 0;\n    margin-right: 12px;\n    max-width: 75%;\n    margin-top: 0;\n}\n\n.publishpress-future-notice.publishpress-future-notice-error {\n    color: #dc3232;\n}\n",""]);const l=i},8777:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(1601),o=n.n(r),a=n(6314),i=n.n(a)()(o());i.push([e.id,".workflow-editor-panel__row-args-container {\n    gap: 0 !important;\n}\n\n.workflow-editor-panel__row-args {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: space-between;\n    padding: 8px;\n}\n\n.workflow-editor-panel__row-args .workflow-editor-panel__row-label {\n    width: 8px;\n}\n\n.workflow-editor-panel__row-args-empty {\n    padding: 8px;\n}\n\n.workflow-editor-panel__row-args-label {\n    font-size: 11px;\n    font-weight: 500;\n    line-height: 1.4;\n    text-transform: uppercase;\n    display: block;\n    margin-bottom: 10px;\n    padding: 0px;\n}\n",""]);const l=i},5503:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(1601),o=n.n(r),a=n(6314),i=n.n(a)()(o());i.push([e.id,".conditional-editor-modal .expression-builder-button {\n    width: 34px !important;\n    padding-top: 10px !important;\n}\n\n.conditional-editor-modal-remove-element {\n    width: 40px !important;\n    height: 40px !important;\n}\n\n.conditional-editor-modal-operator-selector {\n    height: 41px !important;\n    min-height: 40px;\n    margin-top: 7px;\n}\n",""]);const l=i},5557:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(1601),o=n.n(r),a=n(6314),i=n.n(a)()(o());i.push([e.id,".columns-container {\n    display: flex;\n    flex-direction: row;\n    border: 1px solid #ccc;\n    overflow-x: auto;\n    white-space: nowrap;\n    max-height: 212px;\n    overflow-y: hidden;\n    overflow-x: scroll;\n}\n\n.column {\n    display: flex;\n    flex-direction: column;\n    min-width: 150px;\n    flex: 0 0 auto;\n    border-right: 1px solid #ccc;\n    overflow-y: scroll;\n    max-height: 212px;\n    min-height: 212px;\n}\n\n.column-item {\n    cursor: pointer;\n    padding: 2px 6px;\n    position: relative;\n    user-select: none;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    padding-right: 20px;\n}\n\n.column-item.has-children::after {\n    content: '▶';\n    display: inline-block;\n    position: absolute;\n    right: 4px;\n    top: 50%;\n    transform: translateY(-50%);\n    color: #ccc;\n}\n\n.column-item:hover {\n    background: var(--wp-components-color-accent, var(--wp-admin-theme-color, #3858e9));\n    color: var(--wp-components-color-accent-inverted, #fff);\n    opacity: 0.4;\n}\n\n.selected {\n    background: var(--wp-components-color-accent, var(--wp-admin-theme-color, #3858e9));\n    color: var(--wp-components-color-accent-inverted, #fff);\n}\n\n.column-item.has-children.selected::after {\n    color: var(--wp-components-color-accent-inverted, #fff);\n}\n\n.column-item.selected:hover {\n    background: var(--wp-components-color-accent, var(--wp-admin-theme-color, #3858e9));\n    color: var(--wp-components-color-accent-inverted, #fff);\n    opacity: 0.8;\n}\n\n#expression-editor-full {\n    border: 1px solid #ccc;\n    margin-bottom: 10px;\n    margin-top: 10px;\n}\n\n#expression-editor-preview {\n    margin-bottom: 10px;\n    border: 1px solid #ccc;\n}\n\n.ace_editor {\n    border: 1px solid #ccc;\n    margin-bottom: 10px;\n}\n\n.ace_editor.ace_autocomplete {\n    z-index: 999999999;\n    margin-top: 5px;\n    padding-bottom: 5px;\n}\n\n.components-modal__screen-overlay {\n    z-index: 999999998;\n}\n\n.expression-builder {\n    position: relative;\n    width: 100%;\n}\n\n.expression-builder .expression-builder-button {\n    position: absolute;\n    top: 0;\n    right: 0;\n    height: 24px;\n    padding-top: 4px;\n    width: 24px !important;\n    display: inline-block;\n    min-width: 24px;\n    padding-left: 4px;\n}\n\n.column-item-form {\n    padding: 10px;\n    max-width: 202px;\n}\n\n.column-item-form p {\n    text-wrap: auto;\n}\n\n.expression-builder-variable-name {\n    margin-left: 5px;\n}\n\n.expression-builder-inline {\n    padding-top: 0 !important;\n}\n\n.expression-builder-inline .ace_editor {\n    margin-top: 0 !important;\n    margin-right: 40px !important;\n    margin-bottom: 0 !important;\n    height: 40px !important;\n    width: 300px !important;\n}\n\n.expression-builder-inline > button {\n    top: 0 !important;\n    right: 0 !important;\n    height: 40px !important;\n}\n\n.ace_editor.settings-panel {\n    width: 246px !important;\n    height: 180px !important;\n    margin-top: 10px !important;\n}\n\n.ace_editor.read-only-editor {\n    background-color: #f3f3f3 !important;\n}\n\n.ace_content {\n    top: 5px;\n}\n\n#expression-builder-full .ace_content {\n    top: 0 !important;\n}\n\n.expression-builder .description {\n    margin-top: 10px !important;\n}\n\n.expression-builder-modal .description:last-of-type {\n    min-height: 40px !important;\n    margin-top: 10px !important;\n}\n\n.expression-builder-modal-variables .description code {\n    color: #00458b;\n    margin-left: 0;\n    padding: 5px;\n    font-size: 12px;\n}\n\n.expression-builder .expression-builder-small-heading {\n    font-size: 11px;\n    font-weight: 500;\n    line-height: 1.4;\n    text-transform: uppercase;\n    box-sizing: border-box;\n    display: block;\n    padding-top: 0px;\n    padding-bottom: 0px;\n    max-width: 100%;\n    z-index: 1;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    color: rgb(30, 30, 30);\n    margin-bottom: 15px;\n}\n\n.expression-builder-modal-variables .column-item-step-slug {\n    color: #a3a3a3;\n}\n",""]);const l=i},5931:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(1601),o=n.n(r),a=n(6314),i=n.n(a)()(o());i.push([e.id,".workflow-editor-validation-notification-header {\n    position: relative;\n}\n\n.workflow-editor-validation-notification-details-toggle {\n    cursor: pointer;\n    position: absolute;\n    right: -5px;\n    top: 0;\n}\n\n.workflow-editor-validation-notification-details {\n    margin-top: 10px;\n    margin-left: 20px;\n    color: #555555;\n}\n\n.workflow-editor-validation-notification-message {\n    padding-right: 17px;\n}\n",""]);const l=i},3133:(e,t,n)=>{n.d(t,{A:()=>h});var r=n(1601),o=n.n(r),a=n(6314),i=n.n(a),l=n(6943),c=n(2158),s=n(7448),u=n(4259),d=n(1578),p=n(8565),f=n(7860),m=n(269),b=n(4143),v=n(8501),y=n(217),g=i()(o());g.i(l.A),g.i(c.A),g.i(s.A),g.i(u.A),g.i(d.A),g.i(p.A),g.i(f.A),g.i(m.A),g.i(b.A),g.i(v.A),g.i(y.A),g.push([e.id,".reactflow-wrapper {\n    height: 100%;\n}\n\n.components-notice {\n    padding: 0 12px;\n}\n\n.components-notice-list .components-notice__dismiss {\n    margin-top: 12px;\n}\n",""]);const h=g},5695:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(1601),o=n.n(r),a=n(6314),i=n.n(a)()(o());i.push([e.id,".components-checkbox-control.is-checked .components-checkbox-control__label {\n    font-weight: bold;\n}\n\n.queryBuilder-dragHandle {\n    font-size: 18px;\n    color: #9a9a9a;\n}\n\n.queryBuilder-dragHandle:hover {\n    color: #000;\n}\n",""]);const l=i},9922:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y});var r=n(5072),o=n.n(r),a=n(7825),i=n.n(a),l=n(7659),c=n.n(l),s=n(5056),u=n.n(s),d=n(540),p=n.n(d),f=n(1113),m=n.n(f),b=n(1461),v={};v.styleTagTransform=m(),v.setAttributes=u(),v.insert=c().bind(null,"head"),v.domAPI=i(),v.insertStyleElement=p(),o()(b.A,v);const y=b.A&&b.A.locals?b.A.locals:void 0}}]);