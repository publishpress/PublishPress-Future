(()=>{"use strict";const e=wp.components,t=wp.i18n,r=wp.data,n=wp.element;function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(null,arguments)}var a=function(t){var r=t.children;return React.createElement(e.Fill,{name:"FutureActionPanelAfterActionField"},r)};a.Slot=function(t){return React.createElement(e.Slot,o({name:"FutureActionPanelAfterActionField"},t))};var l=futureWorkflows,c=l.apiUrl,u=l.nonce,i=l.workflows,s=function(o){var a=o.storeName,l=i.length>0?i[0].value:0,s=(0,r.useSelect)((function(e){var t=e("publishpress-future/future-action"),r=e("core/edit-post"),n=e("publishpress-future/future-action-quick-edit"),o=0;return t&&t.getPostId?o=t.getPostId():r&&r.getCurrentPostId?o=r.getCurrentPostId():n&&n.getPostId&&(o=n.getPostId()),{action:e(a).getAction(),workflowId:e(a).getExtraDataByName("workflowId")||l,postId:o}})),f=s.action,p=s.workflowId,w=s.postId,d=(0,r.dispatch)(a).setExtraDataByName;return(0,n.useEffect)((function(){if(w)try{wp.apiFetch({url:"".concat(c,"/post-expiration/").concat(w),headers:{"X-WP-Nonce":u}}).then((function(e){d("workflowId",e.extraData.workflowId)}))}catch(e){console.error(e)}}),[]),React.createElement(React.Fragment,null,i.length>0&&"trigger-workflow"===f&&React.createElement(e.PanelRow,{className:"future-action-panel-content future-action-full-width"},React.createElement(e.SelectControl,{label:(0,t.__)("Workflow to trigger","post-expirator"),value:p,options:i,onChange:function(e){d("workflowId",e)},className:"future-action-workflow"}),React.createElement("input",{type:"hidden",name:"future_action_pro_workflow",value:p})),0===i.length&&"trigger-workflow"===f&&React.createElement(e.PanelRow,{className:"future-action-panel-content future-action-full-width"},React.createElement("p",null,(0,t.__)("No compatible workflows available.","post-expirator"))))};wp.plugins.registerPlugin("legacy-action-plugin",{render:function(){return React.createElement(a,null,(function(e){var t=e.storeName;return React.createElement(s,{storeName:t})}))},scope:"publishpress-future"})})();